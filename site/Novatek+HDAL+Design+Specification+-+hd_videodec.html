
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
      <link rel="icon" href="assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.3.1, mkdocs-material-8.5.3">
    
    
      
        <title>HDAL hd_videodec - NT98336/NT98633 Documents</title>
      
    
    
      <link rel="stylesheet" href="assets/stylesheets/main.7a952b86.min.css">
      
        
        <link rel="stylesheet" href="assets/stylesheets/palette.cbb835fc.min.css">
        
      
      

    
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
    <script>__md_scope=new URL(".",location),__md_hash=e=>[...e].reduce((e,_)=>(e<<5)-e+_.charCodeAt(0),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    
    
    
    
    
    <body dir="ltr" data-md-color-scheme="" data-md-color-primary="none" data-md-color-accent="none">
  
    
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#1-introduction" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

<header class="md-header" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="." title="NT98336/NT98633 Documents" class="md-header__button md-logo" aria-label="NT98336/NT98633 Documents" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54Z"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            NT98336/NT98633 Documents
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              HDAL hd_videodec
            
          </span>
        </div>
      </div>
    </div>
    
    
    
      <label class="md-header__button md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
            
<nav class="md-tabs" aria-label="Tabs" data-md-component="tabs">
  <div class="md-tabs__inner md-grid">
    <ul class="md-tabs__list">
      
        
  
  
    
  


  
  
  
    

  
  
  
    <li class="md-tabs__item">
      <a href="NT9833X_MD_User_Guide_en.html" class="md-tabs__link md-tabs__link--active">
        Software
      </a>
    </li>
  

  

      
        
  
  


  
  
  
    

  
  
  
    <li class="md-tabs__item">
      <a href="not_ready - not_reay.md" class="md-tabs__link">
        Hardware(Not Ready)
      </a>
    </li>
  

  

      
        
  
  


  
  
  
    

  
  
  
    <li class="md-tabs__item">
      <a href="not_ready - not_reay.md" class="md-tabs__link">
        For Reference(Not Ready)
      </a>
    </li>
  

  

      
    </ul>
  </div>
</nav>
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

  


<nav class="md-nav md-nav--primary md-nav--lifted" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="." title="NT98336/NT98633 Documents" class="md-nav__button md-logo" aria-label="NT98336/NT98633 Documents" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54Z"/></svg>

    </a>
    NT98336/NT98633 Documents
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      

  
  
    
  
  
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_1" type="checkbox" id="__nav_1" checked>
      
      
      
      
        <label class="md-nav__link" for="__nav_1">
          Software
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Software" data-md-level="1">
        <label class="md-nav__title" for="__nav_1">
          <span class="md-nav__icon md-icon"></span>
          Software
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_1_1" type="checkbox" id="__nav_1_1" >
      
      
      
      
        <label class="md-nav__link" for="__nav_1_1">
          CVAI
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="CVAI" data-md-level="2">
        <label class="md-nav__title" for="__nav_1_1">
          <span class="md-nav__icon md-icon"></span>
          CVAI
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="NT9833X_MD_User_Guide_en.html" class="md-nav__link">
        MD User Guide
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="NT9833X_IVE_User_Guide_en.html" class="md-nav__link">
        IVE User Guide
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_1_2" type="checkbox" id="__nav_1_2" >
      
      
      
      
        <label class="md-nav__link" for="__nav_1_2">
          ISPQ
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="ISPQ" data-md-level="2">
        <label class="md-nav__title" for="__nav_1_2">
          <span class="md-nav__icon md-icon"></span>
          ISPQ
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="NT9833x_VPE_IQ_Tuning_Guide_en.html" class="md-nav__link">
        VPE IQ Tuning Guide
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="NT9833x_LCD_IQ_Tuning_Guide_en.html" class="md-nav__link">
        LCD IQ Tuning Guide
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
    
  
  
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_1_3" type="checkbox" id="__nav_1_3" checked>
      
      
      
      
        <label class="md-nav__link" for="__nav_1_3">
          MEDIA
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="MEDIA" data-md-level="2">
        <label class="md-nav__title" for="__nav_1_3">
          <span class="md-nav__icon md-icon"></span>
          MEDIA
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
    
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" data-md-toggle="toc" type="checkbox" id="__toc">
      
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          HDAL hd_videodec
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="Novatek%2BHDAL%2BDesign%2BSpecification%2B-%2Bhd_videodec.html" class="md-nav__link md-nav__link--active">
        HDAL hd_videodec
      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#1-introduction" class="md-nav__link">
    1 Introduction
  </a>
  
    <nav class="md-nav" aria-label="1 Introduction">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#11-block-diagram" class="md-nav__link">
    1.1 Block Diagram
  </a>
  
    <nav class="md-nav" aria-label="1.1 Block Diagram">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#111-block-diagram-nt9668x-nt9852x-nt9856x-nt98530" class="md-nav__link">
    1.1.1 Block Diagram (NT9668X / NT9852X / NT9856X / NT98530)
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#112-block-diagram-nt9831x-nt9832x-nt9833x-nt98331" class="md-nav__link">
    1.1.2 Block Diagram (NT9831X / NT9832X / NT9833X / NT98331)
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#12-basic-flow" class="md-nav__link">
    1.2 Basic Flow
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#13-single-trigger-operation" class="md-nav__link">
    1.3 Single Trigger Operation
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#14-multi-list-operation" class="md-nav__link">
    1.4 Multi List Operation
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#2-functions-definition" class="md-nav__link">
    2 Functions Definition
  </a>
  
    <nav class="md-nav" aria-label="2 Functions Definition">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#21-hd_videodec_init" class="md-nav__link">
    2.1 hd_videodec_init
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#22-hd_videodec_open" class="md-nav__link">
    2.2 hd_videodec_open
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#23-hd_videodec_get" class="md-nav__link">
    2.3 hd_videodec_get
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#24-hd_videodec_set" class="md-nav__link">
    2.4 hd_videodec_set
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#25-hd_videodec_bind" class="md-nav__link">
    2.5 hd_videodec_bind
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#26-hd_videodec_start" class="md-nav__link">
    2.6 hd_videodec_start
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#27-hd_videodec_stop" class="md-nav__link">
    2.7 hd_videodec_stop
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#28-hd_videodec_unbind" class="md-nav__link">
    2.8 hd_videodec_unbind
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#29-hd_videodec_close" class="md-nav__link">
    2.9 hd_videodec_close
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#210-hd_videodec_uninit" class="md-nav__link">
    2.10 hd_videodec_uninit
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#211-hd_videodec_push_in_buf" class="md-nav__link">
    2.11 hd_videodec_push_in_buf
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#212-hd_videodec_pull_out_buf" class="md-nav__link">
    2.12 hd_videodec_pull_out_buf
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#213-hd_videodec_release_out_buf" class="md-nav__link">
    2.13 hd_videodec_release_out_buf
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#214-hd_videodec_send_list" class="md-nav__link">
    2.14 hd_videodec_send_list
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#215-hd_videodec_start_list" class="md-nav__link">
    2.15 hd_videodec_start_list
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#216-hd_videodec_stop_list" class="md-nav__link">
    2.16 hd_videodec_stop_list
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#3-parameter-ids-and-data-structures" class="md-nav__link">
    3 Parameter IDs and Data Structures
  </a>
  
    <nav class="md-nav" aria-label="3 Parameter IDs and Data Structures">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#31-parameter-ids" class="md-nav__link">
    3.1 Parameter IDs
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#32-data-structure-definition" class="md-nav__link">
    3.2 Data structure  definition
  </a>
  
    <nav class="md-nav" aria-label="3.2 Data structure  definition">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#321-hd_videodec_syscaps" class="md-nav__link">
    3.2.1 HD_VIDEODEC_SYSCAPS
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#322-hd_videodec_path_config" class="md-nav__link">
    3.2.2 HD_VIDEODEC_PATH_CONFIG
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#323-hd_videodec_maxmem" class="md-nav__link">
    3.2.3 HD_VIDEODEC_MAXMEM
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#324-hd_videodec_pool" class="md-nav__link">
    3.2.4 HD_VIDEODEC_POOL
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#325-hd_videodec_user_bs" class="md-nav__link">
    3.2.5 HD_VIDEODEC_USER_BS
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#326-hd_videodec_align" class="md-nav__link">
    3.2.6 HD_VIDEODEC_ALIGN
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#327-hd_videodec_status" class="md-nav__link">
    3.2.7 HD_VIDEODEC_STATUS
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#4-trouble-shooting" class="md-nav__link">
    4 Trouble shooting
  </a>
  
    <nav class="md-nav" aria-label="4 Trouble shooting">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#41-debug-menu-nt9668x-nt9852x-nt9856x-nt98530" class="md-nav__link">
    4.1 Debug Menu (NT9668X / NT9852X / NT9856X / NT98530)
  </a>
  
    <nav class="md-nav" aria-label="4.1 Debug Menu (NT9668X / NT9852X / NT9856X / NT98530)">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#411-dump-status" class="md-nav__link">
    4.1.1 dump status
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#42-proc-command-nt9668x-nt9852x-nt9856x-nt98530" class="md-nav__link">
    4.2 proc command (NT9668X / NT9852X / NT9856X / NT98530)
  </a>
  
    <nav class="md-nav" aria-label="4.2 proc command (NT9668X / NT9852X / NT9856X / NT98530)">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#421-dump-status" class="md-nav__link">
    4.2.1 dump status
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#422-debug-command" class="md-nav__link">
    4.2.2 debug command
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#423-trace-command" class="md-nav__link">
    4.2.3 trace command
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#424-probe-command" class="md-nav__link">
    4.2.4 probe command
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#425-perf-command" class="md-nav__link">
    4.2.5 perf command
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#426-save-command" class="md-nav__link">
    4.2.6 save command
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#43-proc-command-nt9631x-nt9832x-nt9833x-nt98331" class="md-nav__link">
    4.3 Proc Command (NT9631X / NT9832X / NT9833X / NT98331)
  </a>
  
    <nav class="md-nav" aria-label="4.3 Proc Command (NT9631X / NT9832X / NT9833X / NT98331)">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#431-dump-setting" class="md-nav__link">
    4.3.1 dump setting
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#44-debug-menu-nt9631x-nt9832x-nt9833x-nt98331" class="md-nav__link">
    4.4 Debug Menu  (NT9631X / NT9832X / NT9833X / NT98331)
  </a>
  
    <nav class="md-nav" aria-label="4.4 Debug Menu  (NT9631X / NT9832X / NT9833X / NT98331)">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#441-dump-info" class="md-nav__link">
    4.4.1 dump info
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#5-sample-codes" class="md-nav__link">
    5 Sample Codes
  </a>
  
    <nav class="md-nav" aria-label="5 Sample Codes">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#51-video_playback" class="md-nav__link">
    5.1 Video_playback
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#52-video_decode_only" class="md-nav__link">
    5.2 video_decode_only
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#define-phy2virt_mainpa-vir_addr_main-pa-phy_buf_mainbuf_infophy_addr" class="md-nav__link">
    define PHY2VIRT_MAIN(pa) (vir_addr_main + (pa - phy_buf_main.buf_info.phy_addr))
  </a>
  
    <nav class="md-nav" aria-label="define PHY2VIRT_MAIN(pa) (vir_addr_main + (pa - phy_buf_main.buf_info.phy_addr))">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#53-user_videodec" class="md-nav__link">
    5.3 user_videodec
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#6-faq" class="md-nav__link">
    6 FAQ
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="Novatek%2BHDAL%2BDesign%2BSpecification%2B-%2Bhd_videoenc.html" class="md-nav__link">
        HDAL hd_videoenc
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_1_4" type="checkbox" id="__nav_1_4" >
      
      
      
      
        <label class="md-nav__link" for="__nav_1_4">
          OSDRV
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="OSDRV" data-md-level="2">
        <label class="md-nav__title" for="__nav_1_4">
          <span class="md-nav__icon md-icon"></span>
          OSDRV
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="NT9833x_SDK_Pure_Linux_Programming_Guide_en.html" class="md-nav__link">
        Linux Programming Guide
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_2" type="checkbox" id="__nav_2" >
      
      
      
      
        <label class="md-nav__link" for="__nav_2">
          Hardware(Not Ready)
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Hardware(Not Ready)" data-md-level="1">
        <label class="md-nav__title" for="__nav_2">
          <span class="md-nav__icon md-icon"></span>
          Hardware(Not Ready)
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_2_1" type="checkbox" id="__nav_2_1" >
      
      
      
      
        <label class="md-nav__link" for="__nav_2_1">
          Not Ready
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Not Ready" data-md-level="2">
        <label class="md-nav__title" for="__nav_2_1">
          <span class="md-nav__icon md-icon"></span>
          Not Ready
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="not_ready - not_reay.md" class="md-nav__link">
        None
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_3" type="checkbox" id="__nav_3" >
      
      
      
      
        <label class="md-nav__link" for="__nav_3">
          For Reference(Not Ready)
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="For Reference(Not Ready)" data-md-level="1">
        <label class="md-nav__title" for="__nav_3">
          <span class="md-nav__icon md-icon"></span>
          For Reference(Not Ready)
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_3_1" type="checkbox" id="__nav_3_1" >
      
      
      
      
        <label class="md-nav__link" for="__nav_3_1">
          Not Ready
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Not Ready" data-md-level="2">
        <label class="md-nav__title" for="__nav_3_1">
          <span class="md-nav__icon md-icon"></span>
          Not Ready
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="not_ready - not_reay.md" class="md-nav__link">
        None
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#1-introduction" class="md-nav__link">
    1 Introduction
  </a>
  
    <nav class="md-nav" aria-label="1 Introduction">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#11-block-diagram" class="md-nav__link">
    1.1 Block Diagram
  </a>
  
    <nav class="md-nav" aria-label="1.1 Block Diagram">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#111-block-diagram-nt9668x-nt9852x-nt9856x-nt98530" class="md-nav__link">
    1.1.1 Block Diagram (NT9668X / NT9852X / NT9856X / NT98530)
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#112-block-diagram-nt9831x-nt9832x-nt9833x-nt98331" class="md-nav__link">
    1.1.2 Block Diagram (NT9831X / NT9832X / NT9833X / NT98331)
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#12-basic-flow" class="md-nav__link">
    1.2 Basic Flow
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#13-single-trigger-operation" class="md-nav__link">
    1.3 Single Trigger Operation
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#14-multi-list-operation" class="md-nav__link">
    1.4 Multi List Operation
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#2-functions-definition" class="md-nav__link">
    2 Functions Definition
  </a>
  
    <nav class="md-nav" aria-label="2 Functions Definition">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#21-hd_videodec_init" class="md-nav__link">
    2.1 hd_videodec_init
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#22-hd_videodec_open" class="md-nav__link">
    2.2 hd_videodec_open
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#23-hd_videodec_get" class="md-nav__link">
    2.3 hd_videodec_get
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#24-hd_videodec_set" class="md-nav__link">
    2.4 hd_videodec_set
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#25-hd_videodec_bind" class="md-nav__link">
    2.5 hd_videodec_bind
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#26-hd_videodec_start" class="md-nav__link">
    2.6 hd_videodec_start
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#27-hd_videodec_stop" class="md-nav__link">
    2.7 hd_videodec_stop
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#28-hd_videodec_unbind" class="md-nav__link">
    2.8 hd_videodec_unbind
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#29-hd_videodec_close" class="md-nav__link">
    2.9 hd_videodec_close
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#210-hd_videodec_uninit" class="md-nav__link">
    2.10 hd_videodec_uninit
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#211-hd_videodec_push_in_buf" class="md-nav__link">
    2.11 hd_videodec_push_in_buf
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#212-hd_videodec_pull_out_buf" class="md-nav__link">
    2.12 hd_videodec_pull_out_buf
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#213-hd_videodec_release_out_buf" class="md-nav__link">
    2.13 hd_videodec_release_out_buf
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#214-hd_videodec_send_list" class="md-nav__link">
    2.14 hd_videodec_send_list
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#215-hd_videodec_start_list" class="md-nav__link">
    2.15 hd_videodec_start_list
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#216-hd_videodec_stop_list" class="md-nav__link">
    2.16 hd_videodec_stop_list
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#3-parameter-ids-and-data-structures" class="md-nav__link">
    3 Parameter IDs and Data Structures
  </a>
  
    <nav class="md-nav" aria-label="3 Parameter IDs and Data Structures">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#31-parameter-ids" class="md-nav__link">
    3.1 Parameter IDs
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#32-data-structure-definition" class="md-nav__link">
    3.2 Data structure  definition
  </a>
  
    <nav class="md-nav" aria-label="3.2 Data structure  definition">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#321-hd_videodec_syscaps" class="md-nav__link">
    3.2.1 HD_VIDEODEC_SYSCAPS
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#322-hd_videodec_path_config" class="md-nav__link">
    3.2.2 HD_VIDEODEC_PATH_CONFIG
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#323-hd_videodec_maxmem" class="md-nav__link">
    3.2.3 HD_VIDEODEC_MAXMEM
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#324-hd_videodec_pool" class="md-nav__link">
    3.2.4 HD_VIDEODEC_POOL
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#325-hd_videodec_user_bs" class="md-nav__link">
    3.2.5 HD_VIDEODEC_USER_BS
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#326-hd_videodec_align" class="md-nav__link">
    3.2.6 HD_VIDEODEC_ALIGN
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#327-hd_videodec_status" class="md-nav__link">
    3.2.7 HD_VIDEODEC_STATUS
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#4-trouble-shooting" class="md-nav__link">
    4 Trouble shooting
  </a>
  
    <nav class="md-nav" aria-label="4 Trouble shooting">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#41-debug-menu-nt9668x-nt9852x-nt9856x-nt98530" class="md-nav__link">
    4.1 Debug Menu (NT9668X / NT9852X / NT9856X / NT98530)
  </a>
  
    <nav class="md-nav" aria-label="4.1 Debug Menu (NT9668X / NT9852X / NT9856X / NT98530)">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#411-dump-status" class="md-nav__link">
    4.1.1 dump status
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#42-proc-command-nt9668x-nt9852x-nt9856x-nt98530" class="md-nav__link">
    4.2 proc command (NT9668X / NT9852X / NT9856X / NT98530)
  </a>
  
    <nav class="md-nav" aria-label="4.2 proc command (NT9668X / NT9852X / NT9856X / NT98530)">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#421-dump-status" class="md-nav__link">
    4.2.1 dump status
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#422-debug-command" class="md-nav__link">
    4.2.2 debug command
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#423-trace-command" class="md-nav__link">
    4.2.3 trace command
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#424-probe-command" class="md-nav__link">
    4.2.4 probe command
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#425-perf-command" class="md-nav__link">
    4.2.5 perf command
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#426-save-command" class="md-nav__link">
    4.2.6 save command
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#43-proc-command-nt9631x-nt9832x-nt9833x-nt98331" class="md-nav__link">
    4.3 Proc Command (NT9631X / NT9832X / NT9833X / NT98331)
  </a>
  
    <nav class="md-nav" aria-label="4.3 Proc Command (NT9631X / NT9832X / NT9833X / NT98331)">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#431-dump-setting" class="md-nav__link">
    4.3.1 dump setting
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#44-debug-menu-nt9631x-nt9832x-nt9833x-nt98331" class="md-nav__link">
    4.4 Debug Menu  (NT9631X / NT9832X / NT9833X / NT98331)
  </a>
  
    <nav class="md-nav" aria-label="4.4 Debug Menu  (NT9631X / NT9832X / NT9833X / NT98331)">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#441-dump-info" class="md-nav__link">
    4.4.1 dump info
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#5-sample-codes" class="md-nav__link">
    5 Sample Codes
  </a>
  
    <nav class="md-nav" aria-label="5 Sample Codes">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#51-video_playback" class="md-nav__link">
    5.1 Video_playback
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#52-video_decode_only" class="md-nav__link">
    5.2 video_decode_only
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#define-phy2virt_mainpa-vir_addr_main-pa-phy_buf_mainbuf_infophy_addr" class="md-nav__link">
    define PHY2VIRT_MAIN(pa) (vir_addr_main + (pa - phy_buf_main.buf_info.phy_addr))
  </a>
  
    <nav class="md-nav" aria-label="define PHY2VIRT_MAIN(pa) (vir_addr_main + (pa - phy_buf_main.buf_info.phy_addr))">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#53-user_videodec" class="md-nav__link">
    5.3 user_videodec
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#6-faq" class="md-nav__link">
    6 FAQ
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  


<h2 id="1-introduction">1 Introduction<a class="headerlink" href="#1-introduction" title="Permanent link">&para;</a></h2>
<p>The major purpose of hd_videodec is to get bitstream data from upper unit, and controls the video decoder to decode the bitstream data then return the YUV frame data which can be used for displaying. This document will talk about the red block in the following diagram. The device driver is not the main point in this document.</p>
<p><img alt="" src="Novatek%2BHDAL%2BDesign%2BSpecification%2B-%2Bhd_videodec.files/image002.gif" /></p>
<p>Module diagram is shown as below:</p>
<p><img alt="" src="Novatek%2BHDAL%2BDesign%2BSpecification%2B-%2Bhd_videodec.files/image003.gif" /></p>
<h3 id="11-block-diagram">1.1 Block Diagram<a class="headerlink" href="#11-block-diagram" title="Permanent link">&para;</a></h3>
<h4 id="111-block-diagram-nt9668x-nt9852x-nt9856x-nt98530">1.1.1 Block Diagram (NT9668X / NT9852X / NT9856X / NT98530)<a class="headerlink" href="#111-block-diagram-nt9668x-nt9852x-nt9856x-nt98530" title="Permanent link">&para;</a></h4>
<p>The block diagram of H264/H265 codec is shown as below:</p>
<p><img alt="" src="Novatek%2BHDAL%2BDesign%2BSpecification%2B-%2Bhd_videodec.files/image004.gif" /></p>
<h4 id="112-block-diagram-nt9831x-nt9832x-nt9833x-nt98331">1.1.2 Block Diagram (NT9831X / NT9832X / NT9833X / NT98331)<a class="headerlink" href="#112-block-diagram-nt9831x-nt9832x-nt9833x-nt98331" title="Permanent link">&para;</a></h4>
<p>The block diagram of H264 codec is shown as below:</p>
<p><img alt="" src="Novatek%2BHDAL%2BDesign%2BSpecification%2B-%2Bhd_videodec.files/image005.gif" /></p>
<p>The block diagram of H265 codec is shown as below:</p>
<p><img alt="" src="Novatek%2BHDAL%2BDesign%2BSpecification%2B-%2Bhd_videodec.files/image006.gif" /></p>
<h3 id="12-basic-flow">1.2 Basic Flow<a class="headerlink" href="#12-basic-flow" title="Permanent link">&para;</a></h3>
<p>The call sequence is needed to be done correctly for the unit. The standard starting flows of most modules are init, open, get, set and start. The standard closing flows of most modules are stop, unbind, close and uninit. The basic flow is shown as below.</p>
<p><img alt="" src="Novatek%2BHDAL%2BDesign%2BSpecification%2B-%2Bhd_videodec.files/image007.gif" /></p>
<p>Now, below section in this chapter is mainly about what things to do in those functions above.</p>
<h3 id="13-single-trigger-operation">1.3 Single Trigger Operation<a class="headerlink" href="#13-single-trigger-operation" title="Permanent link">&para;</a></h3>
<p>Single trigger operation is used to trigger the unit to do one job, such as to grab one YUV frame from video capture; or encode one frame to bitstream by using video encoder. There are two types of functions for the input port and output port. The sequence for input port is new, push and release; the sequence for output port is pull and release. The flow is shown as below.</p>
<p><img alt="" src="Novatek%2BHDAL%2BDesign%2BSpecification%2B-%2Bhd_videodec.files/image008.gif" /></p>
<h3 id="14-multi-list-operation">1.4 Multi List Operation<a class="headerlink" href="#14-multi-list-operation" title="Permanent link">&para;</a></h3>
<p>Multi list operation is used to send mulit bitstream simultaneously, it is very efficiency in the multi channels case. The flow is shown as below:</p>
<p><img alt="" src="Novatek%2BHDAL%2BDesign%2BSpecification%2B-%2Bhd_videodec.files/image009.gif" /></p>
<h2 id="2-functions-definition">2 Functions Definition<a class="headerlink" href="#2-functions-definition" title="Permanent link">&para;</a></h2>
<h3 id="21-hd_videodec_init">2.1 hd_videodec_init<a class="headerlink" href="#21-hd_videodec_init" title="Permanent link">&para;</a></h3>
<p>[Description]</p>
<p>Initialize the unit</p>
<p>[Syntax]</p>
<p>HD_RESULT hd_videodec_init(VOID);</p>
<p>[Parameter]</p>
<table>
<thead>
<tr>
<th></th>
<th></th>
</tr>
</thead>
<tbody>
<tr>
<td>Value</td>
<td>Description</td>
</tr>
<tr>
<td>VOID</td>
<td>Not available</td>
</tr>
</tbody>
</table>
<p>[Return Value]</p>
<table>
<thead>
<tr>
<th></th>
<th></th>
</tr>
</thead>
<tbody>
<tr>
<td>Value</td>
<td>Description</td>
</tr>
<tr>
<td>HD_OK</td>
<td>Success</td>
</tr>
<tr>
<td>HD_ERR_NG</td>
<td>Failure</td>
</tr>
</tbody>
</table>
<h3 id="22-hd_videodec_open">2.2 hd_videodec_open<a class="headerlink" href="#22-hd_videodec_open" title="Permanent link">&para;</a></h3>
<p>[Description]</p>
<p>Open the unit</p>
<p>[Syntax]</p>
<p>HD_RESULT hd_videodec_open(HD_IN_ID in_id, HD_OUT_ID out_id, HD_PATH_ID* p_path_id)</p>
<p>[Parameter]</p>
<table>
<thead>
<tr>
<th></th>
<th></th>
</tr>
</thead>
<tbody>
<tr>
<td>Value</td>
<td>Description</td>
</tr>
<tr>
<td>in_id</td>
<td>Id of input port.</td>
</tr>
<tr>
<td>out_id</td>
<td>Id of output port.</td>
</tr>
<tr>
<td>p_path_id</td>
<td>Pointer of the path id</td>
</tr>
</tbody>
</table>
<p>[Return Value]</p>
<table>
<thead>
<tr>
<th></th>
<th></th>
</tr>
</thead>
<tbody>
<tr>
<td>Value</td>
<td>Description</td>
</tr>
<tr>
<td>HD_OK</td>
<td>Success</td>
</tr>
<tr>
<td>HD_ERR_NG</td>
<td>Failure</td>
</tr>
</tbody>
</table>
<h3 id="23-hd_videodec_get">2.3 hd_videodec_get<a class="headerlink" href="#23-hd_videodec_get" title="Permanent link">&para;</a></h3>
<p>[Description]</p>
<p>Get parameters from unit by path id</p>
<p>[Syntax]</p>
<p>HD_RESULT hd_videodec_get(HD_PATH_ID path_id, HD_VIDEODEC_PARAM_ID id, VOID* p_param)</p>
<p>[Parameter]</p>
<table>
<thead>
<tr>
<th></th>
<th></th>
</tr>
</thead>
<tbody>
<tr>
<td>Value</td>
<td>Description</td>
</tr>
<tr>
<td>path_id</td>
<td>The path id</td>
</tr>
<tr>
<td>id</td>
<td>Id of parameters</td>
</tr>
<tr>
<td>p_param</td>
<td>Pointer of parameters</td>
</tr>
</tbody>
</table>
<p>[Return Value]</p>
<table>
<thead>
<tr>
<th></th>
<th></th>
</tr>
</thead>
<tbody>
<tr>
<td>Value</td>
<td>Description</td>
</tr>
<tr>
<td>HD_OK</td>
<td>Success</td>
</tr>
<tr>
<td>HD_ERR_NG</td>
<td>Failure</td>
</tr>
<tr>
<td>HD_ERR_NOT_SUPPORT</td>
<td>Not support this parameter</td>
</tr>
</tbody>
</table>
<h3 id="24-hd_videodec_set">2.4 hd_videodec_set<a class="headerlink" href="#24-hd_videodec_set" title="Permanent link">&para;</a></h3>
<p>[Description]</p>
<p>Set parameters to unit by path id</p>
<p>[Syntax]</p>
<p>HD_RESULT hd_videodec_set(HD_PATH_ID path_id, HD_VIDEODEC_PARAM_ID id, VOID* p_param)</p>
<p>[Parameter]</p>
<table>
<thead>
<tr>
<th></th>
<th></th>
</tr>
</thead>
<tbody>
<tr>
<td>Value</td>
<td>Description</td>
</tr>
<tr>
<td>path_id</td>
<td>The path id</td>
</tr>
<tr>
<td>id</td>
<td>Id of parameters</td>
</tr>
<tr>
<td>p_param</td>
<td>Pointer of parameters</td>
</tr>
</tbody>
</table>
<p>[Return Value]</p>
<table>
<thead>
<tr>
<th></th>
<th></th>
</tr>
</thead>
<tbody>
<tr>
<td>Value</td>
<td>Description</td>
</tr>
<tr>
<td>HD_OK</td>
<td>Success</td>
</tr>
<tr>
<td>HD_ERR_NG</td>
<td>Failure</td>
</tr>
<tr>
<td>HD_ERR_NOT_SUPPORT</td>
<td>Not support this parameter</td>
</tr>
</tbody>
</table>
<h3 id="25-hd_videodec_bind">2.5 hd_videodec_bind<a class="headerlink" href="#25-hd_videodec_bind" title="Permanent link">&para;</a></h3>
<p>[Description]</p>
<p>Bind this unit with destination unit</p>
<p>[Syntax]</p>
<p>HD_RESULT hd_videodec_bind(HD_OUT_ID out_id, HD_IN_ID dest_in_id)</p>
<p>[Parameter]</p>
<table>
<thead>
<tr>
<th></th>
<th></th>
</tr>
</thead>
<tbody>
<tr>
<td>Value</td>
<td>Description</td>
</tr>
<tr>
<td>out_id</td>
<td>Id of output port.</td>
</tr>
<tr>
<td>dest_in_id</td>
<td>Id of the destination input port.</td>
</tr>
</tbody>
</table>
<p>[Return Value]</p>
<table>
<thead>
<tr>
<th></th>
<th></th>
</tr>
</thead>
<tbody>
<tr>
<td>Value</td>
<td>Description</td>
</tr>
<tr>
<td>HD_OK</td>
<td>Success</td>
</tr>
<tr>
<td>HD_ERR_NG</td>
<td>Failure</td>
</tr>
</tbody>
</table>
<h3 id="26-hd_videodec_start">2.6 hd_videodec_start<a class="headerlink" href="#26-hd_videodec_start" title="Permanent link">&para;</a></h3>
<p>[Description]</p>
<p>Start the unit</p>
<p>[Syntax]</p>
<p>HD_RESULT hd_videodec_start(HD_PATH_ID path_id)</p>
<p>[Parameter]</p>
<table>
<thead>
<tr>
<th></th>
<th></th>
</tr>
</thead>
<tbody>
<tr>
<td>Value</td>
<td>Description</td>
</tr>
<tr>
<td>path_id</td>
<td>Pointer of the path id</td>
</tr>
</tbody>
</table>
<p>[Return Value]</p>
<table>
<thead>
<tr>
<th></th>
<th></th>
</tr>
</thead>
<tbody>
<tr>
<td>Value</td>
<td>Description</td>
</tr>
<tr>
<td>HD_OK</td>
<td>Success</td>
</tr>
<tr>
<td>HD_ERR_NG</td>
<td>Failure</td>
</tr>
</tbody>
</table>
<h3 id="27-hd_videodec_stop">2.7 hd_videodec_stop<a class="headerlink" href="#27-hd_videodec_stop" title="Permanent link">&para;</a></h3>
<p>[Description]</p>
<p>Stop the unit</p>
<p>[Syntax]</p>
<p>HD_RESULT hd_videodec_stop(HD_PATH_ID path_id)</p>
<p>[Parameter]</p>
<table>
<thead>
<tr>
<th></th>
<th></th>
</tr>
</thead>
<tbody>
<tr>
<td>Value</td>
<td>Description</td>
</tr>
<tr>
<td>path_id</td>
<td>Pointer of the path id</td>
</tr>
</tbody>
</table>
<p>[Return Value]</p>
<table>
<thead>
<tr>
<th></th>
<th></th>
</tr>
</thead>
<tbody>
<tr>
<td>Value</td>
<td>Description</td>
</tr>
<tr>
<td>HD_OK</td>
<td>Success</td>
</tr>
<tr>
<td>HD_ERR_NG</td>
<td>Failure</td>
</tr>
</tbody>
</table>
<h3 id="28-hd_videodec_unbind">2.8 hd_videodec_unbind<a class="headerlink" href="#28-hd_videodec_unbind" title="Permanent link">&para;</a></h3>
<p>[Description]</p>
<p>Unbind the unit</p>
<p>[Syntax]</p>
<p>HD_RESULT hd_videodec_unbind (HD_OUT_ID out_id)</p>
<p>[Parameter]</p>
<table>
<thead>
<tr>
<th></th>
<th></th>
</tr>
</thead>
<tbody>
<tr>
<td>Value</td>
<td>Description</td>
</tr>
<tr>
<td>out_id</td>
<td>Id of output port.</td>
</tr>
</tbody>
</table>
<p>[Return Value]</p>
<table>
<thead>
<tr>
<th></th>
<th></th>
</tr>
</thead>
<tbody>
<tr>
<td>Value</td>
<td>Description</td>
</tr>
<tr>
<td>HD_OK</td>
<td>Success</td>
</tr>
<tr>
<td>HD_ERR_NG</td>
<td>Failure</td>
</tr>
</tbody>
</table>
<h3 id="29-hd_videodec_close">2.9 hd_videodec_close<a class="headerlink" href="#29-hd_videodec_close" title="Permanent link">&para;</a></h3>
<p>[Description]</p>
<p>Close the unit</p>
<p>[Syntax]</p>
<p>HD_RESULT hd_videodec_close(HD_PATH_ID path_id)</p>
<p>[Parameter]</p>
<table>
<thead>
<tr>
<th></th>
<th></th>
</tr>
</thead>
<tbody>
<tr>
<td>Value</td>
<td>Description</td>
</tr>
<tr>
<td>path_id</td>
<td>Pointer of the path id</td>
</tr>
</tbody>
</table>
<p>[Return Value]</p>
<table>
<thead>
<tr>
<th></th>
<th></th>
</tr>
</thead>
<tbody>
<tr>
<td>Value</td>
<td>Description</td>
</tr>
<tr>
<td>HD_OK</td>
<td>Success</td>
</tr>
<tr>
<td>HD_ERR_NG</td>
<td>Failure</td>
</tr>
</tbody>
</table>
<h3 id="210-hd_videodec_uninit">2.10 hd_videodec_uninit<a class="headerlink" href="#210-hd_videodec_uninit" title="Permanent link">&para;</a></h3>
<p>[Description]</p>
<p>Uninitialize the unit</p>
<p>[Syntax]</p>
<p>HD_RESULT hd_videodec_uninit(VOID);</p>
<p>[Parameter]</p>
<table>
<thead>
<tr>
<th></th>
<th></th>
</tr>
</thead>
<tbody>
<tr>
<td>Value</td>
<td>Description</td>
</tr>
<tr>
<td>VOID</td>
<td>Not available</td>
</tr>
</tbody>
</table>
<p>[Return Value]</p>
<table>
<thead>
<tr>
<th></th>
<th></th>
</tr>
</thead>
<tbody>
<tr>
<td>Value</td>
<td>Description</td>
</tr>
<tr>
<td>HD_OK</td>
<td>Success</td>
</tr>
<tr>
<td>HD_ERR_NG</td>
<td>Failure</td>
</tr>
</tbody>
</table>
<h3 id="211-hd_videodec_push_in_buf">2.11 hd_videodec_push_in_buf<a class="headerlink" href="#211-hd_videodec_push_in_buf" title="Permanent link">&para;</a></h3>
<p>[Description]</p>
<p>Push the video bitstream buffer to unit</p>
<p>[Syntax]</p>
<p>HD_RESULT hd_videodec_push_in_buf(HD_PATH_ID path_id, HD_VIDEO_BS<em> p_in_videodec_bs, HD_VIDEO_FRAME</em> p_user_out_video_frame, INT32 wait_ms);</p>
<p>[Parameter]</p>
<table>
<thead>
<tr>
<th></th>
<th></th>
</tr>
</thead>
<tbody>
<tr>
<td>Value</td>
<td>Description</td>
</tr>
<tr>
<td>path_id</td>
<td>The path id</td>
</tr>
<tr>
<td>p_in_videodec_bs</td>
<td>Pointer of the input bitstream buffer</td>
</tr>
<tr>
<td>p_user_out_video_frame</td>
<td>Pointer of the output frame buffer</td>
</tr>
<tr>
<td>wait_ms</td>
<td>Timeout value in microsecond</td>
</tr>
</tbody>
</table>
<p>[Return Value]</p>
<table>
<thead>
<tr>
<th></th>
<th></th>
</tr>
</thead>
<tbody>
<tr>
<td>Value</td>
<td>Description</td>
</tr>
<tr>
<td>HD_OK</td>
<td>Success</td>
</tr>
<tr>
<td>HD_ERR_NG</td>
<td>Failure</td>
</tr>
</tbody>
</table>
<h3 id="212-hd_videodec_pull_out_buf">2.12 hd_videodec_pull_out_buf<a class="headerlink" href="#212-hd_videodec_pull_out_buf" title="Permanent link">&para;</a></h3>
<p>[Description]</p>
<p>Pull the video frame buffer from unit</p>
<p>[Syntax]</p>
<p>HD_RESULT hd_videodec_pull_out_buf(HD_PATH_ID path_id, HD_VIDEO_FRAME* p_video_frame, INT32 wait_ms);</p>
<p>[Parameter]</p>
<table>
<thead>
<tr>
<th></th>
<th></th>
</tr>
</thead>
<tbody>
<tr>
<td>Value</td>
<td>Description</td>
</tr>
<tr>
<td>path_id</td>
<td>The path id</td>
</tr>
<tr>
<td>p_video_frame</td>
<td>Pointer of the output frame buffer<br><br>[Supplement]<br><br>Only for [NT9832X][NT9833X][NT98331]<br><br>HD_VIDEO_FRAME* p_video_frame :: reserved[]<br><br>0: width of background dimension<br><br>1: height of background dimension</td>
</tr>
<tr>
<td>wait_ms</td>
<td>Timeout value in microsecond</td>
</tr>
</tbody>
</table>
<p>[Return Value]</p>
<table>
<thead>
<tr>
<th></th>
<th></th>
</tr>
</thead>
<tbody>
<tr>
<td>Value</td>
<td>Description</td>
</tr>
<tr>
<td>HD_OK</td>
<td>Success</td>
</tr>
<tr>
<td>HD_ERR_NG</td>
<td>General failure</td>
</tr>
<tr>
<td>HD_ERR_TIMEDOUT</td>
<td>Timeout occurred  <br>(There is no decoded data in pull_out queue.)</td>
</tr>
<tr>
<td>HD_ERR_SYS</td>
<td>Operating system call failure</td>
</tr>
<tr>
<td>HD_ERR_FAIL</td>
<td>Decoding error occurred</td>
</tr>
</tbody>
</table>
<h3 id="213-hd_videodec_release_out_buf">2.13 hd_videodec_release_out_buf<a class="headerlink" href="#213-hd_videodec_release_out_buf" title="Permanent link">&para;</a></h3>
<p>[Description]</p>
<p>Release the video frame buffer which is get from unit</p>
<p>[Syntax]</p>
<p>HD_RESULT hd_videodec_release_out_buf(HD_PATH_ID path_id, HD_VIDEO_FRAME* p_video_frame)</p>
<p>[Parameter]</p>
<table>
<thead>
<tr>
<th></th>
<th></th>
</tr>
</thead>
<tbody>
<tr>
<td>Value</td>
<td>Description</td>
</tr>
<tr>
<td>path_id</td>
<td>The path id</td>
</tr>
<tr>
<td>p_video_frame</td>
<td>Pointer of the output frame buffer</td>
</tr>
</tbody>
</table>
<p>[Return Value]</p>
<table>
<thead>
<tr>
<th></th>
<th></th>
</tr>
</thead>
<tbody>
<tr>
<td>Value</td>
<td>Description</td>
</tr>
<tr>
<td>HD_OK</td>
<td>Success</td>
</tr>
<tr>
<td>HD_ERR_NG</td>
<td>Failure</td>
</tr>
</tbody>
</table>
<h3 id="214-hd_videodec_send_list">2.14 hd_videodec_send_list<a class="headerlink" href="#214-hd_videodec_send_list" title="Permanent link">&para;</a></h3>
<p>[Description]</p>
<p>Send(Push) multiple video bitstream buffers to each corresponding unit</p>
<p>[Syntax]</p>
<p>HD_RESULT hd_videodec_send_list(HD_VIDEODEC_SEND_LIST *p_videodec_list, UINT32 num, INT32 wait_ms);</p>
<p>[Parameter]</p>
<table>
<thead>
<tr>
<th></th>
<th></th>
</tr>
</thead>
<tbody>
<tr>
<td>Value</td>
<td>Description</td>
</tr>
<tr>
<td>p_videodec_list</td>
<td>Pointer of multiple bitstream buffers</td>
</tr>
<tr>
<td>num</td>
<td>Number of multiple bitstream buffers</td>
</tr>
<tr>
<td>wait_ms</td>
<td>Timeout value in microsecond</td>
</tr>
</tbody>
</table>
<p>[Return Value]</p>
<table>
<thead>
<tr>
<th></th>
<th></th>
</tr>
</thead>
<tbody>
<tr>
<td>Value</td>
<td>Description</td>
</tr>
<tr>
<td>HD_OK</td>
<td>Success</td>
</tr>
<tr>
<td>HD_ERR_NG</td>
<td>Failure</td>
</tr>
<tr>
<td>HD_ERR_PATH</td>
<td>Invalid path id</td>
</tr>
<tr>
<td>HD_ERR_TIMEDOUT</td>
<td>Timeout occured</td>
</tr>
</tbody>
</table>
<p>[Difference]</p>
<table>
<thead>
<tr>
<th></th>
<th></th>
</tr>
</thead>
<tbody>
<tr>
<td>Chip</td>
<td>Description</td>
</tr>
<tr>
<td>NT9668X<br><br>NT9852X<br><br>NT9856X<br><br>NT98530</td>
<td>Not supported.</td>
</tr>
<tr>
<td>NT9831X<br><br>NT9832X<br><br>NT9833X<br><br>NT98331</td>
<td>All functions are supported.</td>
</tr>
</tbody>
</table>
<h3 id="215-hd_videodec_start_list">2.15 hd_videodec_start_list<a class="headerlink" href="#215-hd_videodec_start_list" title="Permanent link">&para;</a></h3>
<p>[Description]</p>
<p>Start multiple units to run</p>
<p>[Syntax]</p>
<p>HD_RESULT hd_videodec_start_list(HD_PATH_ID *path_id, UINT num);</p>
<p>[Parameter]</p>
<table>
<thead>
<tr>
<th></th>
<th></th>
</tr>
</thead>
<tbody>
<tr>
<td>Value</td>
<td>Description</td>
</tr>
<tr>
<td>path_id</td>
<td>The path id</td>
</tr>
<tr>
<td>num</td>
<td>Number of multiple units</td>
</tr>
</tbody>
</table>
<p>[Return Value]</p>
<table>
<thead>
<tr>
<th></th>
<th></th>
</tr>
</thead>
<tbody>
<tr>
<td>Value</td>
<td>Description</td>
</tr>
<tr>
<td>HD_OK</td>
<td>Success</td>
</tr>
<tr>
<td>HD_ERR_NG</td>
<td>Failure</td>
</tr>
</tbody>
</table>
<p>[Difference]</p>
<table>
<thead>
<tr>
<th></th>
<th></th>
</tr>
</thead>
<tbody>
<tr>
<td>Chip</td>
<td>Description</td>
</tr>
<tr>
<td>NT9668X<br><br>NT9852X<br><br>NT9856X<br><br>NT98530</td>
<td>Not supported.</td>
</tr>
<tr>
<td>NT9831X<br><br>NT9832X<br><br>NT9833X<br><br>NT98331</td>
<td>All functions are supported.</td>
</tr>
</tbody>
</table>
<h3 id="216-hd_videodec_stop_list">2.16 hd_videodec_stop_list<a class="headerlink" href="#216-hd_videodec_stop_list" title="Permanent link">&para;</a></h3>
<p>[Description]</p>
<p>Stop multiple units running</p>
<p>[Syntax]</p>
<p>HD_RESULT hd_videodec_stop_list(HD_PATH_ID *path_id, UINT num);</p>
<p>[Parameter]</p>
<table>
<thead>
<tr>
<th></th>
<th></th>
</tr>
</thead>
<tbody>
<tr>
<td>Value</td>
<td>Description</td>
</tr>
<tr>
<td>path_id</td>
<td>The path id</td>
</tr>
<tr>
<td>num</td>
<td>Number of multiple units</td>
</tr>
</tbody>
</table>
<p>[Return Value]</p>
<table>
<thead>
<tr>
<th></th>
<th></th>
</tr>
</thead>
<tbody>
<tr>
<td>Value</td>
<td>Description</td>
</tr>
<tr>
<td>HD_OK</td>
<td>Success</td>
</tr>
<tr>
<td>HD_ERR_NG</td>
<td>Failure</td>
</tr>
</tbody>
</table>
<p>[Difference]</p>
<table>
<thead>
<tr>
<th></th>
<th></th>
</tr>
</thead>
<tbody>
<tr>
<td>Chip</td>
<td>Description</td>
</tr>
<tr>
<td>NT9668X<br><br>NT9852X<br><br>NT9856X<br><br>NT98530</td>
<td>Not supported.</td>
</tr>
<tr>
<td>NT9831X<br><br>NT9832X<br><br>NT9833X<br><br>NT98331</td>
<td>All functions are supported.</td>
</tr>
</tbody>
</table>
<h2 id="3-parameter-ids-and-data-structures">3 Parameter IDs and Data Structures<a class="headerlink" href="#3-parameter-ids-and-data-structures" title="Permanent link">&para;</a></h2>
<h3 id="31-parameter-ids">3.1 Parameter IDs<a class="headerlink" href="#31-parameter-ids" title="Permanent link">&para;</a></h3>
<p>The videodec provides the following parameter IDs:</p>
<p>l HD_VIDEODEC_PARAM_DEVCOUNT</p>
<p>o support get with ctrl path</p>
<p>o using HD_DEVCOUNT struct (device id max count)</p>
<p>l HD_VIDEODEC_PARAM_SYSCAPS</p>
<p>o support get with ctrl path</p>
<p>o using HD_VIDEODEC_SYSCAPS</p>
<p>l HD_VIDEODEC_PARAM_PATH_CONFIG</p>
<p>o support get/set with i/o path</p>
<p>o using HD_VIDEODEC_PATH_CONFIG</p>
<p>l HD_VIDEODEC_PARAM_STATUS</p>
<p>o support get/set with i/o path</p>
<p>o Using HD_VIDEODEC_STATUS</p>
<h3 id="32-data-structure-definition">3.2 Data structure  definition<a class="headerlink" href="#32-data-structure-definition" title="Permanent link">&para;</a></h3>
<h4 id="321-hd_videodec_syscaps">3.2.1 HD_VIDEODEC_SYSCAPS<a class="headerlink" href="#321-hd_videodec_syscaps" title="Permanent link">&para;</a></h4>
<p>[Description]</p>
<p>Device capability.</p>
<p>[Parameter]</p>
<table>
<thead>
<tr>
<th></th>
<th></th>
</tr>
</thead>
<tbody>
<tr>
<td>Value</td>
<td>Description</td>
</tr>
<tr>
<td>dev_id</td>
<td>device id</td>
</tr>
<tr>
<td>chip_id</td>
<td>chip id of this device</td>
</tr>
<tr>
<td>max_in_count</td>
<td>max count of input of this device</td>
</tr>
<tr>
<td>max_out_count</td>
<td>max count of output of this device</td>
</tr>
<tr>
<td>dev_caps</td>
<td>capability of device, combine caps of HD_DEVICE_CAPS and HD_VIDEODEC_DEVCAPS</td>
</tr>
<tr>
<td>in_caps</td>
<td>capability of input, combine caps of HD_VIDEO_CAPS and HD_VIDEODEC_INCAPS</td>
</tr>
<tr>
<td>out_caps</td>
<td>capability of output, combine caps of HD_VIDEO_CAPS and HD_VIDEODEC_OUTCAPS</td>
</tr>
<tr>
<td>max_dim</td>
<td>max dimension of video decoder</td>
</tr>
<tr>
<td>max_bitrate</td>
<td>max bitrate of video decoder</td>
</tr>
</tbody>
</table>
<p>[Difference]</p>
<table>
<thead>
<tr>
<th></th>
<th></th>
</tr>
</thead>
<tbody>
<tr>
<td>Chip</td>
<td>Description</td>
</tr>
<tr>
<td>NT9668X<br><br>NT9852X<br><br>NT9856X<br><br>NT98530</td>
<td>max_in_count = 16;<br><br>max_out_count = 16;<br><br>dev_caps =<br><br>??????????????? HD_CAPS_PATHCONFIG;<br><br>in_caps[0~16] =<br><br>??????????????? ?HD_VIDEODEC_CAPS_JPEG<br><br>??????????????? ?| HD_VIDEODEC_CAPS_H264<br><br>??????????????? ?| HD_VIDEODEC_CAPS_H265;<br><br>out_caps[0~16] =<br><br>??????????????? ?HD_VIDEO_CAPS_YUV420<br><br>??????????????? ?| HD_VIDEO_CAPS_YUV422;</td>
</tr>
<tr>
<td>NT9831X<br><br>NT9832X<br><br>NT9833X<br><br>NT98331</td>
<td>max_in_count = 128;<br><br>max_out_count = 128;<br><br>dev_caps =<br><br>??????????????? HD_CAPS_LISTFUNC;<br><br>in_caps[0~127] =<br><br>??????????????? ?HD_VIDEODEC_CAPS_JPEG<br><br>??????????????? ?| HD_VIDEODEC_CAPS_H264<br><br>??????????????? ?| HD_VIDEODEC_CAPS_H265;<br><br>out_caps[0~127] =<br><br>??????????????? ?HD_VIDEO_CAPS_YUV420<br><br>??????????????? ?| HD_VIDEO_CAPS_YUV422;</td>
</tr>
</tbody>
</table>
<h4 id="322-hd_videodec_path_config">3.2.2 HD_VIDEODEC_PATH_CONFIG<a class="headerlink" href="#322-hd_videodec_path_config" title="Permanent link">&para;</a></h4>
<p>[Description]</p>
<p>Device configurations.</p>
<p>[Parameter]</p>
<table>
<thead>
<tr>
<th></th>
<th></th>
</tr>
</thead>
<tbody>
<tr>
<td>Value</td>
<td>Description</td>
</tr>
<tr>
<td>max_mem</td>
<td>maximum memory information,<br><br>see <a href="#_HD_VIDEODEC_MAXMEM">HD_VIDEODEC_MAXMEM</a></td>
</tr>
<tr>
<td>data_pool</td>
<td>pool memory information,<br><br>see <a href="#_HD_VIDEODEC_POOL">HD_VIDEODEC_POOL</a></td>
</tr>
</tbody>
</table>
<p>[Difference]</p>
<table>
<thead>
<tr>
<th></th>
<th></th>
</tr>
</thead>
<tbody>
<tr>
<td>Chip</td>
<td>Description</td>
</tr>
<tr>
<td>NT9668X<br><br>NT9852X<br><br>NT9856X<br><br>NT98530</td>
<td>data_pool is not supported.</td>
</tr>
<tr>
<td>NT9831X<br><br>NT9832X<br><br>NT9833X<br><br>NT98331</td>
<td>All parameters are supported.</td>
</tr>
</tbody>
</table>
<p>[Apply Require]</p>
<p>stop -&gt; close -&gt; open -&gt; set -&gt; start</p>
<h4 id="323-hd_videodec_maxmem">3.2.3 HD_VIDEODEC_MAXMEM<a class="headerlink" href="#323-hd_videodec_maxmem" title="Permanent link">&para;</a></h4>
<p>[Description]</p>
<p>Maximum memory allocation informations.</p>
<p>[Parameter]</p>
<table>
<thead>
<tr>
<th></th>
<th></th>
</tr>
</thead>
<tbody>
<tr>
<td>Value</td>
<td>Description</td>
</tr>
<tr>
<td>codec_type</td>
<td>Video codec type</td>
</tr>
<tr>
<td>dim</td>
<td>Video image dimension</td>
</tr>
<tr>
<td>frame_rate</td>
<td>Video frame rate</td>
</tr>
<tr>
<td>max_bitrate</td>
<td>Maximum bitrate support</td>
</tr>
<tr>
<td>bs_counts</td>
<td>Bitstream buffer counts</td>
</tr>
<tr>
<td>max_ref_num</td>
<td>Maximum reference number of video frame</td>
</tr>
<tr>
<td>ddr_id</td>
<td>The ddr id</td>
</tr>
<tr>
<td>max_bs_size</td>
<td>Maximum bitstream size (window size), 0 means AUTO calculating by system.</td>
</tr>
<tr>
<td>max_multi_slice_num</td>
<td>Maximum multiple slice number</td>
</tr>
<tr>
<td>reserved</td>
<td>Reserved for future using</td>
</tr>
</tbody>
</table>
<p>[Difference]</p>
<table>
<thead>
<tr>
<th></th>
<th></th>
</tr>
</thead>
<tbody>
<tr>
<td>Chip</td>
<td>Description</td>
</tr>
<tr>
<td>NT9668X<br><br>NT9852X<br><br>NT9856X</td>
<td>Only support codec_type and dim.</td>
</tr>
<tr>
<td>NT98530</td>
<td>Only support codec_type, dim and max_ref_num.</td>
</tr>
<tr>
<td>NT9831X<br><br>NT9832X<br><br>NT9833X<br><br>NT98331</td>
<td>All parameters are supported.</td>
</tr>
</tbody>
</table>
<p>[Apply Require]</p>
<p>stop -&gt; close -&gt; open -&gt; set -&gt; start</p>
<h4 id="324-hd_videodec_pool">3.2.4 HD_VIDEODEC_POOL<a class="headerlink" href="#324-hd_videodec_pool" title="Permanent link">&para;</a></h4>
<p>[Description]</p>
<p>Memory pool informations.</p>
<p>[Parameter]</p>
<table>
<thead>
<tr>
<th></th>
<th></th>
</tr>
</thead>
<tbody>
<tr>
<td>Value</td>
<td>Description</td>
</tr>
<tr>
<td>ddr_id</td>
<td>The ddr id</td>
</tr>
<tr>
<td>counts</td>
<td>Counts of buffer,<br><br>use HD_VIDEODEC_SET_COUNT to set.<br><br>(Take 30 fps as an example, a bit-stream is 1/30 of the playback time. The larger the setting, the longer the playback time that datain can cache.)</td>
</tr>
<tr>
<td>max_counts</td>
<td>Maximum counts of buffer,<br><br>use HD_VIDEODEC_SET_COUNT to set.</td>
</tr>
<tr>
<td>min_counts</td>
<td>Minimum counts of buffer,<br><br>use HD_VIDEODEC_SET_COUNT to set.</td>
</tr>
<tr>
<td>mode</td>
<td>Pool mode,<br><br>0: auto, 1: enable, 2: disable</td>
</tr>
</tbody>
</table>
<p>[Apply Require]</p>
<p>stop -&gt; close -&gt; open -&gt; set -&gt; start</p>
<p>[Difference]</p>
<table>
<thead>
<tr>
<th></th>
<th></th>
</tr>
</thead>
<tbody>
<tr>
<td>Chip</td>
<td>Description</td>
</tr>
<tr>
<td>NT9668X<br><br>NT9852X<br><br>NT9856X<br><br>NT98530</td>
<td>Not supported.</td>
</tr>
<tr>
<td>NT9831X<br><br>NT9832X<br><br>NT9833X<br><br>NT98331</td>
<td>All parameters are supported.</td>
</tr>
</tbody>
</table>
<h4 id="325-hd_videodec_user_bs">3.2.5 HD_VIDEODEC_USER_BS<a class="headerlink" href="#325-hd_videodec_user_bs" title="Permanent link">&para;</a></h4>
<p>[Description]</p>
<p>User video bitstream information</p>
<p>[Parameter]</p>
<table>
<thead>
<tr>
<th></th>
<th></th>
</tr>
</thead>
<tbody>
<tr>
<td>Value</td>
<td>Description</td>
</tr>
<tr>
<td>sign</td>
<td>Data signature,<br><br>use MAKEFOURCC(&lsquo;V&rsquo;,&rsquo;S&rsquo;,&rsquo;T&rsquo;,&rsquo;M&rsquo;)</td>
</tr>
<tr>
<td>p_next</td>
<td>Pointer to next meta</td>
</tr>
<tr>
<td>p_bs_buf</td>
<td>Pointer of bitstream buffer address pointer</td>
</tr>
<tr>
<td>bs_buf_size</td>
<td>Bitstream buffer size</td>
</tr>
<tr>
<td>retval</td>
<td>Reserved for future using</td>
</tr>
<tr>
<td>time_align</td>
<td>Playback timestamp alignment mode,<br><br>see HD_VIDEODEC_ALIGN</td>
</tr>
<tr>
<td>time_diff</td>
<td>Playback interval time (unit: microsecond)</td>
</tr>
<tr>
<td>timestamp</td>
<td>Decode bitstream timestamp to encode for transcode (unit: microsecond)</td>
</tr>
<tr>
<td>user_flag</td>
<td>User specific control flag,<br><br>use HD_VIDEODEC_FLAG_XXX definitions</td>
</tr>
<tr>
<td>reserved</td>
<td>Reserved for future using</td>
</tr>
</tbody>
</table>
<p>[Difference]</p>
<table>
<thead>
<tr>
<th></th>
<th></th>
</tr>
</thead>
<tbody>
<tr>
<td>Chip</td>
<td>Description</td>
</tr>
<tr>
<td>NT9668X<br><br>NT9852X<br><br>NT9856X<br><br>NT98530</td>
<td>Not supported.</td>
</tr>
<tr>
<td>NT9831X<br><br>NT9832X<br><br>NT9833X<br><br>NT98331</td>
<td>All parameters are supported.</td>
</tr>
</tbody>
</table>
<h4 id="326-hd_videodec_align">3.2.6 HD_VIDEODEC_ALIGN<a class="headerlink" href="#326-hd_videodec_align" title="Permanent link">&para;</a></h4>
<p>[Description]</p>
<p>Playback timestamp alignment information</p>
<p>[State]</p>
<table>
<thead>
<tr>
<th></th>
<th></th>
</tr>
</thead>
<tbody>
<tr>
<td>Value</td>
<td>Description</td>
</tr>
<tr>
<td>HD_VIDEODEC_TIME_ALIGN_ENABLE</td>
<td>(default) playback time align by LCD period (e.g. 60HZ should be 33333 us)</td>
</tr>
<tr>
<td>HD_VIDEODEC_TIME_ALIGN_DISABLE</td>
<td>Play timestamp by hd_videodec_send_list called</td>
</tr>
<tr>
<td>HD_VIDEODEC_TIME_ALIGN_USER</td>
<td>Start to play at previous play point + time_diff(us)</td>
</tr>
</tbody>
</table>
<p>[Difference]</p>
<table>
<thead>
<tr>
<th></th>
<th></th>
</tr>
</thead>
<tbody>
<tr>
<td>Chip</td>
<td>Description</td>
</tr>
<tr>
<td>NT9668X<br><br>NT9852X<br><br>NT9856X<br><br>NT98530</td>
<td>Not supported.</td>
</tr>
<tr>
<td>NT9831X<br><br>NT9832X<br><br>NT9833X<br><br>NT98331</td>
<td>All states are supported.</td>
</tr>
</tbody>
</table>
<h4 id="327-hd_videodec_status">3.2.7 HD_VIDEODEC_STATUS<a class="headerlink" href="#327-hd_videodec_status" title="Permanent link">&para;</a></h4>
<p>[Description]</p>
<p>Video decoder current status.</p>
<p>[Parameter]</p>
<table>
<thead>
<tr>
<th></th>
<th></th>
</tr>
</thead>
<tbody>
<tr>
<td>Value</td>
<td>Description</td>
</tr>
<tr>
<td>left_frames</td>
<td>Number of frames to be decoded.</td>
</tr>
<tr>
<td>reserved_ref_frame</td>
<td>Reserved reference frame when unbind unit.<br><br><strong>NOTE: Cannot be set when swtiching codec type.</strong></td>
</tr>
<tr>
<td>done_frames</td>
<td>Number of decoded frames</td>
</tr>
<tr>
<td>reserved[0]</td>
<td>Decode input available buffer counts.<br><br>Please refer to sample for usage,<br><br>playback_with_sync.c (code\hdal\samples\media_flow)</td>
</tr>
<tr>
<td>reserved[1~7]</td>
<td>Reserved for future using.</td>
</tr>
</tbody>
</table>
<p>[Difference]</p>
<table>
<thead>
<tr>
<th></th>
<th></th>
</tr>
</thead>
<tbody>
<tr>
<td>Chip</td>
<td>Description</td>
</tr>
<tr>
<td>NT9668X<br><br>NT9852X<br><br>NT9856X<br><br>NT98530</td>
<td>Not supported.</td>
</tr>
<tr>
<td>NT9831X<br><br>NT9832X<br><br>NT9833X<br><br>NT98331</td>
<td>All states are supported.</td>
</tr>
</tbody>
</table>
<h2 id="4-trouble-shooting">4 Trouble shooting<a class="headerlink" href="#4-trouble-shooting" title="Permanent link">&para;</a></h2>
<p>The videodec module supports two kinds of debug mechanism for user. User can use proc command or debug menu to debug.</p>
<h3 id="41-debug-menu-nt9668x-nt9852x-nt9856x-nt98530">4.1 Debug Menu (NT9668X / NT9852X / NT9856X / NT98530)<a class="headerlink" href="#41-debug-menu-nt9668x-nt9852x-nt9856x-nt98530" title="Permanent link">&para;</a></h3>
<p>In application, call hd_debug_run_menu() to open the debug menu.</p>
<p>==============================</p>
<p>?HDAL</p>
<p>------------------------------</p>
<p>?01 : AUDIOCAPTURE</p>
<p>?02 : AUDIOOUT</p>
<p>?03 : AUDIOENC</p>
<p>?04 : AUDIODEC</p>
<p>?05 : VIDEOCAPTURE</p>
<p>?06 : VIDEOOUT</p>
<p>?07 : VIDEOPROCESS</p>
<p>?08 : VIDEOENC</p>
<p>?09 : VIDEODEC</p>
<p>?10 : OSG</p>
<p>?11 : COMMON</p>
<p>?12 : UTIL</p>
<p>?13 : DEBUG</p>
<p>------------------------------</p>
<p>?254 : Quit</p>
<p>?255 : Return</p>
<p>------------------------------</p>
<p>Enter “9” to open VIDEODEC debug menu</p>
<p>==============================</p>
<p>VIDEODEC</p>
<p>------------------------------</p>
<p>?01 : dump status</p>
<p>------------------------------</p>
<p>?254 : Quit</p>
<p>?255 : Return</p>
<p>------------------------------</p>
<p>Note: The items in the menu may vary for each chip.</p>
<h4 id="411-dump-status">4.1.1 dump status<a class="headerlink" href="#411-dump-status" title="Permanent link">&para;</a></h4>
<p>Enter “1” to show the status of videodec</p>
<p>Run: 01 : dump status</p>
<p>HDAL_VERSION: 00010001:00010001</p>
<p>------------------------- VIDEODEC 0? PATH &amp; BIND ------------------------------</p>
<p>in??? out?? state bind_src????????????? bind_dest</p>
<p>0???? 0???? START (null)??????????????? VIDEOPROC_0_IN_0</p>
<p>------------------------- VIDEODEC 0? PATH CONFIG ------------------------------</p>
<p>in??? out?? max_w max_h? codec</p>
<p>0???? 0???? 640?? 480??? JPEG</p>
<p>------------------------- VIDEODEC 0? IN FRAME ---------------------------------</p>
<p>in??? codec</p>
<p>0???? JPEG</p>
<p>As above, the debug menu shows the path &amp; bind information, path_config , input frame / output bitstream information, more detail can see the table as below.</p>
<p>[PATH &amp; BIND]</p>
<table>
<thead>
<tr>
<th></th>
<th></th>
<th></th>
</tr>
</thead>
<tbody>
<tr>
<td>Status</td>
<td>Description</td>
<td>Value</td>
</tr>
<tr>
<td>In</td>
<td>input id of path</td>
<td>0 ~ [max_in_count]</td>
</tr>
<tr>
<td>out</td>
<td>output id of path</td>
<td>0 ~ [max_out_count]</td>
</tr>
<tr>
<td>state</td>
<td>state of path</td>
<td>OFF/OPEN/START (default OFF)</td>
</tr>
<tr>
<td>bind_src</td>
<td>current binding source of input</td>
<td>bind: [module]<em>[device_id]_OUT</em>[output_id]<br><br>not-bind: (null)</td>
</tr>
<tr>
<td>bind_dest</td>
<td>current binding source of output</td>
<td>bind: [module]<em>[device_id]_IN</em>[input_id]<br><br>not-bind: (null)</td>
</tr>
</tbody>
</table>
<p>[PATH CONFIG]</p>
<table>
<thead>
<tr>
<th></th>
<th></th>
<th></th>
</tr>
</thead>
<tbody>
<tr>
<td>Value</td>
<td>Description</td>
<td>Value</td>
</tr>
<tr>
<td>in</td>
<td>input id of path</td>
<td>0 ~ [max_in_count]</td>
</tr>
<tr>
<td>out</td>
<td>output id of path</td>
<td>0 ~ [max_out_count]</td>
</tr>
<tr>
<td>max_w</td>
<td>maximum dimension width</td>
<td>16 ~ 65532: user assign width<br><br>default 0 (n/a)</td>
</tr>
<tr>
<td>max_h</td>
<td>maximum dimension height</td>
<td>16 ~ 65532: user assign height<br><br>default 0 (n/a)</td>
</tr>
</tbody>
</table>
<p>[IN FRAME]</p>
<table>
<thead>
<tr>
<th></th>
<th></th>
<th></th>
</tr>
</thead>
<tbody>
<tr>
<td>Value</td>
<td>Description</td>
<td>Value</td>
</tr>
<tr>
<td>in</td>
<td>input id</td>
<td>0 ~ [max_in_count]</td>
</tr>
<tr>
<td>codec</td>
<td>current input video codec type</td>
<td>enum: user assign codec type<br><br>see HD_VIDEO_CODEC<br><br>default 0 (n/a)</td>
</tr>
</tbody>
</table>
<h3 id="42-proc-command-nt9668x-nt9852x-nt9856x-nt98530">4.2 proc command (NT9668X / NT9852X / NT9856X / NT98530)<a class="headerlink" href="#42-proc-command-nt9668x-nt9852x-nt9856x-nt98530" title="Permanent link">&para;</a></h3>
<p>User can obtained debugging information from the proc file system of Linux.</p>
<h4 id="421-dump-status">4.2.1 dump status<a class="headerlink" href="#421-dump-status" title="Permanent link">&para;</a></h4>
<p>[dump info]</p>
<p>cat /proc/hdal/vdec/info</p>
<p>the result is exactly the same as <a href="#_dump_status">4.1.1 Dump status</a></p>
<p>Run: 01 : dump status</p>
<p>HDAL_VERSION: 00010001:00010001</p>
<p>------------------------- VIDEODEC 0? PATH &amp; BIND ------------------------------</p>
<p>in??? out?? state bind_src????????????? bind_dest</p>
<p>0???? 0???? START (null)??????????????? VIDEOPROC_0_IN_0</p>
<p>------------------------- VIDEODEC 0? PATH CONFIG ------------------------------</p>
<p>in??? out?? max_w max_h? codec</p>
<p>0???? 0???? 640?? 480??? JPEG</p>
<p>------------------------- VIDEODEC 0? IN FRAME ---------------------------------</p>
<p>in??? codec</p>
<p>0???? JPEG</p>
<h4 id="422-debug-command">4.2.2 debug command<a class="headerlink" href="#422-debug-command" title="Permanent link">&para;</a></h4>
<p>[debug port]</p>
<p>echo debug [dev] [i/o] [mask] > /proc/hdal/adec/cmd</p>
<p>where [dev] = d0 , [i/o] = i0, i1, i2, &hellip;, o0, o1, o2, &hellip; , [mask] = show info mask</p>
<p>[ Sample ]</p>
<p>echo debug d0 o0 mffff &gt; /proc/hdal/vdec/cmd</p>
<p>this debug command can show more debug log on console</p>
<p>root@NVTEVM:/mnt/sd$ hd_video_playback 2</p>
<p>[ 4183.595988] hd_reset - begin</p>
<p>[ 4183.601853] hd_reset - end</p>
<p>HDAL_VERSION: 00010001:00010002</p>
<p>[ 4183.657738]</p>
<p>[ 4183.657738] hd: &ldquo;vdodec&rdquo;.out[0]: open begin, state=0</p>
<p>[ 4183.665326] hd: &ldquo;vdodec&rdquo;.out[0]: cmd OPEN</p>
<p>[ 4183.678796] hd: &ldquo;vdodec&rdquo;.out[0]: open end, state=1</p>
<p>[ 4183.685213] hd: &ldquo;vdodec&rdquo;.out[0]: set param(08000a05)=1</p>
<p>[ 4183.708678] hd: &ldquo;vdodec&rdquo;.out[0]: set param(08000a00)=1</p>
<p>[ 4183.716255] hd: &ldquo;vdodec&rdquo;.out[0]: set param(08000a00)=1</p>
<p>[ 4183.722596]</p>
<p>[ 4183.722596] hd: &ldquo;vdodec&rdquo;.out[0]: bind begin, (&ldquo;vdoprc0&rdquo;.in[0])</p>
<p>[ 4183.732387] hd: &ldquo;vdodec&rdquo;.out[0]: cmd CONNECT</p>
<p>[ 4183.737854] hd: &ldquo;vdodec&rdquo;.out[0]: cmd RDYSYNC</p>
<p>[ 4183.748315] hd: &ldquo;vdodec&rdquo;.out[0]: bind end</p>
<p>[ 4183.753391]</p>
<p>[ 4183.753391] hd: &ldquo;vdodec&rdquo;.out[0]: start begin, state=1</p>
<p>[ 4183.761045] hd: &ldquo;vdodec&rdquo;.out[0]: cmd RDYSYNC</p>
<p>[ 4183.771498] hd: &ldquo;vdodec&rdquo;.out[0]: cmd START</p>
<p>[ 4183.782689] hd: &ldquo;vdodec&rdquo;.out[0]: start end, state=2</p>
<p>Enter q to exit</p>
<p>bs file: [/mnt/sd/video_bs_640_480_jpeg.dat]</p>
<p>bslen file: [/mnt/sd/video_bs_640_480_jpeg.len]</p>
<p>q</p>
<p>[ 4188.409136]</p>
<p>[ 4188.409136] hd: &ldquo;vdodec&rdquo;.out[0]: stop begin, state=2</p>
<p>[ 4188.416733] hd: &ldquo;vdodec&rdquo;.out[0]: cmd STOP</p>
<p>[ 4188.429400] hd: &ldquo;vdodec&rdquo;.out[0]: stop end, state=1</p>
<p>[ 4188.443260]</p>
<p>[ 4188.443260] hd: &ldquo;vdodec&rdquo;.out[0]: unbind begin, (&ldquo;vdoprc0&rdquo;.in[0])</p>
<p>[ 4188.451877] hd: &ldquo;vdodec&rdquo;.out[0]: cmd DISCONNECT</p>
<p>[ 4188.457451] hd: &ldquo;vdodec&rdquo;.out[0]: unbind end</p>
<p>[ 4188.462694] hd: &ldquo;vdodec&rdquo;.out[0]: set param(08000a05)=0</p>
<p>[ 4188.468879]</p>
<p>[ 4188.468879] hd: &ldquo;vdodec&rdquo;.out[0]: close begin, state=1</p>
<p>[ 4188.476533] hd: &ldquo;vdodec&rdquo;.out[0]: cmd CLOSE</p>
<p>[ 4188.484832] hd: &ldquo;vdodec&rdquo;.out[0]: close end, state=0</p>
<h4 id="423-trace-command">4.2.3 trace command<a class="headerlink" href="#423-trace-command" title="Permanent link">&para;</a></h4>
<p>[trace port]</p>
<p>echo trace [dev] [i/o] [mask] > /proc/hdal/adec/cmd</p>
<p>where [dev] = d0 , [i/o] = i0, i1, i2, &hellip;, o0, o1, o2, &hellip; , [mask] = show info mask</p>
<p>[ Sample ]</p>
<p>echo trace d0 o0 mffff &gt; /proc/hdal/vdec/cmd</p>
<p>this trace command could enable module internal debug message to know what’s going on for the VIDEODEC module.</p>
<h4 id="424-probe-command">4.2.4 probe command<a class="headerlink" href="#424-probe-command" title="Permanent link">&para;</a></h4>
<p>[probe port]</p>
<p>echo probe [dev] [i/o] [mask] > /proc/hdal/adec/cmd</p>
<p>where [dev] = d0 , [i/o] = i0, i1, i2, &hellip;, o0, o1, o2, &hellip; , [mask] = show info mask</p>
<p>[ Sample ]</p>
<p>echo probe d0 o0 mffff &gt; /proc/hdal/vdec/cmd</p>
<p>this probe command could print per-data status</p>
<p>[ 5310.074418] hd: &ldquo;vdodec&rdquo;.out[0] - NEW - new &ndash; h=94001fc0 size=00070800 addr=94002000 OK</p>
<p>[ 5310.085787] hd: &ldquo;vdodec&rdquo;.out[0] - PUSH - data &ndash; h=94001fc0 t=000000013dd1c406 (YUV: 640x480.520c0420 94002000 9404d000 640 640)</p>
<p>[ 5310.113972] hd: &ldquo;vdodec&rdquo;.out[0] - NEW - new &ndash; h=9407afc0 size=00070800 addr=9407b000 OK</p>
<p>[ 5310.125334] hd: &ldquo;vdodec&rdquo;.out[0] - PUSH - data &ndash; h=9407afc0 t=000000013dd25e8e (YUV: 640x480.520c0420 9407b000 940c6000 640 640)</p>
<p>[ 5310.153493] hd: &ldquo;vdodec&rdquo;.out[0] - NEW - new &ndash; h=940f3fc0 size=00070800 addr=940f4000 OK</p>
<p>[ 5310.164831] hd: &ldquo;vdodec&rdquo;.out[0] - PUSH - data &ndash; h=940f3fc0 t=000000013dd2f8ef (YUV: 640x480.520c0420 940f4000 9413f000 640 640)</p>
<p>[ 5310.192974] hd: &ldquo;vdodec&rdquo;.out[0] - NEW - new &ndash; h=940f3fc0 size=00070800 addr=940f4000 OK</p>
<p>[ 5310.204320] hd: &ldquo;vdodec&rdquo;.out[0] - PUSH - data &ndash; h=940f3fc0 t=000000013dd39329 (YUV: 640x480.520c0420 940f4000 9413f000 640 640)</p>
<p>[ 5310.232463] hd: &ldquo;vdodec&rdquo;.out[0] - NEW - new &ndash; h=9407afc0 size=00070800 addr=9407b000 OK</p>
<p>[ 5310.243803] hd: &ldquo;vdodec&rdquo;.out[0] - PUSH - data &ndash; h=9407afc0 t=000000013dd42d6b (YUV: 640x480.520c0420 9407b000 940c6000 640 640)</p>
<p>[ 5310.271956] hd: &ldquo;vdodec&rdquo;.out[0] - NEW - new &ndash; h=94001fc0 size=00070800 addr=94002000 OK</p>
<p>[ 5310.283296] hd: &ldquo;vdodec&rdquo;.out[0] - PUSH - data &ndash; h=94001fc0 t=000000013dd4c7ac (YUV: 640x480.520c0420 94002000 9404d000 640 640)</p>
<h4 id="425-perf-command">4.2.5 perf command<a class="headerlink" href="#425-perf-command" title="Permanent link">&para;</a></h4>
<p>[perf port]</p>
<p>echo perf [dev] [i/o] > /proc/hdal/adec/cmd</p>
<p>[ Sample ]</p>
<p>echo perf d0 i0 &gt; /proc/hdal/vdec/cmd</p>
<p>this perf command could print data count per second</p>
<p>[ 5390.325791] hd: &ldquo;vdodec&rdquo;.in[0] - perf &ndash; (VideoBs) 825 KByte/sec</p>
<p>[ 5391.330332] hd: &ldquo;vdodec&rdquo;.in[0] - perf &ndash; (VideoBs) 825 KByte/sec</p>
<p>[ 5392.336753] hd: &ldquo;vdodec&rdquo;.in[0] - perf &ndash; (VideoBs) 819 KByte/sec</p>
<p>[ 5393.345119] hd: &ldquo;vdodec&rdquo;.in[0] - perf &ndash; (VideoBs) 820 KByte/sec</p>
<h4 id="426-save-command">4.2.6 save command<a class="headerlink" href="#426-save-command" title="Permanent link">&para;</a></h4>
<p>[save port]</p>
<p>echo save [dev] [i/o] [count] &gt; /proc/hdal/adec/cmd</p>
<p>where [count] means how many i/o datas to save</p>
<p>[ Sample ]</p>
<p>echo save d0 i0 &gt; /proc/hdal/vdec/cmd</p>
<p>this save command could save i/o data to SDCard for debug purpose.</p>
<p>[ 5471.047725] save i/o begin: &ldquo;vdodec&rdquo;.in[0] count=1</p>
<p>[ 5473.414755] hd: &ldquo;vdodec&rdquo;.in[0] - save &ndash; h=9416dfc0 t=00000001478e2434 (VSTM: 1296e000 25874)</p>
<p>[ 5473.443425] hd: &ldquo;vdodec&rdquo;.in[0] - save &ndash; //mnt//sd//isf_? vdodec_in[0]_c0.bsv ok</p>
<p>[ 5473.451859] save port end</p>
<h3 id="43-proc-command-nt9631x-nt9832x-nt9833x-nt98331">4.3 Proc Command (NT9631X / NT9832X / NT9833X / NT98331)<a class="headerlink" href="#43-proc-command-nt9631x-nt9832x-nt9833x-nt98331" title="Permanent link">&para;</a></h3>
<h4 id="431-dump-setting">4.3.1 dump setting<a class="headerlink" href="#431-dump-setting" title="Permanent link">&para;</a></h4>
<p>User can cat info file to dump module’s status.</p>
<p>------------------------- VIDEODEC 0? PATH &amp; BIND -----------------------------</p>
<p>in????? out???? state?? bind_src??????????????? bind_dest</p>
<p>0?????? 0?????? START?? -?????????????????????? VIDEOPROC_4_IN_0</p>
<p>0?????? 1?????? START?? -?????????????????????? VIDEOPROC_5_IN_0</p>
<p>0?????? 2?????? START?? -?????????????????????? VIDEOPROC_6_IN_0</p>
<p>0?????? 3?????? START?? -????????? ?????????????VIDEOPROC_7_IN_0</p>
<p>------------------------- VIDEODEC 0? PATH POOL -----------------------------</p>
<p>out???? pool??? ddr_id? count?? max_count</p>
<p>0?????? 0?????? 0?????? 3.5???? 3.0</p>
<p>0?????? 1?????? 0?????? 3.5???? 3.0</p>
<p>1?????? 0?????? 0?????? 3.5???? 3.0</p>
<p>1?????? 1?????? 0?????? 3.5???? 3.0</p>
<p>2?????? 0?????? 0?????? 3.5???? 3.0</p>
<p>2?????? 1?????? 0?????? 3.5???? 3.0</p>
<p>3?????? 0?????? 0?????? 3.5???? 3.0</p>
<p>3?????? 1?????? 0?????? 3.5???? 3.0</p>
<p>[PATH &amp; BIND]</p>
<table>
<thead>
<tr>
<th></th>
<th></th>
<th></th>
</tr>
</thead>
<tbody>
<tr>
<td>Status</td>
<td>Description</td>
<td>Value</td>
</tr>
<tr>
<td>in</td>
<td>input id of path</td>
<td>0</td>
</tr>
<tr>
<td>out</td>
<td>output id of path</td>
<td>0 ~ [max_out_count]</td>
</tr>
<tr>
<td>state</td>
<td>state of path</td>
<td>OFF/OPEN/START (default OFF)</td>
</tr>
<tr>
<td>bind_src</td>
<td>current binding source of input</td>
<td>bind: [module]<em>[device_id]_OUT</em>[output_id]<br><br>not-bind: (null)</td>
</tr>
<tr>
<td>bind_dest</td>
<td>current binding source of output</td>
<td>bind: [module]<em>[device_id]_IN</em>[input_id]<br><br>not-bind: (null)</td>
</tr>
</tbody>
</table>
<h3 id="44-debug-menu-nt9631x-nt9832x-nt9833x-nt98331">4.4 Debug Menu  (NT9631X / NT9832X / NT9833X / NT98331)<a class="headerlink" href="#44-debug-menu-nt9631x-nt9832x-nt9833x-nt98331" title="Permanent link">&para;</a></h3>
<h4 id="441-dump-info">4.4.1 dump info<a class="headerlink" href="#441-dump-info" title="Permanent link">&para;</a></h4>
<p>After enter debug menu, select 09 to enter this module’s sub-menu.</p>
<p>User can select 01 to dump module’s status shown as below.</p>
<p>------------------------- VIDEODEC 0? PATH &amp; BIND -----------------------------</p>
<p>in????? out???? state?? bind_src??????????????? bind_dest</p>
<p>0?????? 0?????? START?? -?????????????????????? VIDEOPROC_4_IN_0</p>
<p>0?????? 1?????? START?? -?????????????????????? VIDEOPROC_5_IN_0</p>
<p>0?????? 2?????? START?? -?????????????????????? VIDEOPROC_6_IN_0</p>
<p>0?????? 3?????? START?? -?????????????????????? VIDEOPROC_7_IN_0</p>
<p>------------------------- VIDEODEC 0? PATH POOL -----------------------------</p>
<p>out???? pool??? ddr_id? count?? max_count</p>
<p>0?????? 0?????? 0?????? 3.5???? 3.0</p>
<p>0?????? 1?????? 0?????? 3.5???? 3.0</p>
<p>1?????? 0?????? 0?????? 3.5???? 3.0</p>
<p>1?????? 1?????? 0?????? 3.5???? 3.0</p>
<p>2?????? 0?????? 0?????? 3.5???? 3.0</p>
<p>2?????? 1?????? 0?????? 3.5???? 3.0</p>
<p>3?????? 0?????? 0?????? 3.5???? 3.0</p>
<p>3?????? 1?????? 0?????? 3.5?? ??3.0</p>
<h2 id="5-sample-codes">5 Sample Codes<a class="headerlink" href="#5-sample-codes" title="Permanent link">&para;</a></h2>
<h3 id="51-video_playback">5.1 Video_playback<a class="headerlink" href="#51-video_playback" title="Permanent link">&para;</a></h3>
<p>This sample code is used in NT9668X / NT9852X / NT9856X / NT98530. The <strong>hd_video_playback</strong> demonstrates how to use the single trigger operation to process the input image.</p>
<p><strong>/* Allocate common buffer*/</strong></p>
<p>// config common pool (main)</p>
<p>mem_cfg.pool_info[0].type = HD_COMMON_MEM_COMMON_POOL;</p>
<p>mem_cfg.pool_info[0].blk_size = DBGINFO_BUFSIZE()+VDO_YUV_BUFSIZE(ALIGN_CEIL_64(VDO_SIZE_W), ALIGN_CEIL_64(VDO_SIZE_H), HD_VIDEO_PXLFMT_YUV420);? // align to 16 for rotate buffer</p>
<p>mem_cfg.pool_info[0].blk_cnt = 3;</p>
<p>mem_cfg.pool_info[0].ddr_id = DDR_ID0;</p>
<p>// config common pool for bs pushing in</p>
<p>mem_cfg.pool_info[1].type = HD_COMMON_MEM_USER_POOL_BEGIN;</p>
<p>mem_cfg.pool_info[1].blk_size = BS_BLK_SIZE;</p>
<p>mem_cfg.pool_info[1].blk_cnt = 1;</p>
<p>mem_cfg.pool_info[1].ddr_id = DDR_ID0;</p>
<p>ret = hd_common_mem_init(&amp;mem_cfg);</p>
<p><strong>/* Set dec path configuration */</strong></p>
<p>video_path_cfg.max_mem.codec_type = dec_type;</p>
<p>video_path_cfg.max_mem.dim.w = p_max_dim-&gt;w;</p>
<p>video_path_cfg.max_mem.dim.h = p_max_dim-&gt;h;</p>
<p>ret = hd_videodec_set(video_dec_path, HD_VIDEODEC_PARAM_PATH_CONFIG, &amp;video_path_cfg);</p>
<p>if (ret != HD_OK) { return ret; }</p>
<p><strong>/* Set dec parameter */</strong></p>
<p>video_in_param.codec_type = dec_type;</p>
<p>video_in_param.dim.w = p_dim-&gt;w;</p>
<p>video_in_param.dim.h = p_dim-&gt;h;</p>
<p>ret = hd_videodec_set(video_dec_path, HD_VIDEODEC_PARAM_IN, &amp;video_in_param);</p>
<p>if (ret != HD_OK) { return ret; }</p>
<p><strong>/* Set proc configuration */</strong></p>
<p>ret = hd_videoproc_open(0, HD_VIDEOPROC_0_CTRL, &amp;video_proc_ctrl); //open this for device control</p>
<p>if (p_max_dim != NULL) {</p>
<p>video_cfg_param.pipe = HD_VIDEOPROC_PIPE_SCALE;</p>
<p>video_cfg_param.isp_id = 0;</p>
<p>video_cfg_param.ctrl_max.func = 0;</p>
<p>video_cfg_param.in_max.func = 0;</p>
<p>video_cfg_param.in_max.dim.w = p_max_dim-&gt;w;</p>
<p>video_cfg_param.in_max.dim.h = p_max_dim-&gt;h;</p>
<p>video_cfg_param.in_max.pxlfmt = HD_VIDEO_PXLFMT_YUV420;</p>
<p>video_cfg_param.in_max.frc = HD_VIDEO_FRC_RATIO(1,1);</p>
<p>ret = hd_videoproc_set(video_proc_ctrl, HD_VIDEOPROC_PARAM_DEV_CONFIG, &amp;video_cfg_param);</p>
<p>???? if (ret != HD_OK) {</p>
<p>???????? return HD_ERR_NG;</p>
<p>???? }</p>
<p>}</p>
<p>video_ctrl_param.func = 0;</p>
<p>ret = hd_videoproc_set(video_proc_ctrl, HD_VIDEOPROC_PARAM_CTRL, &amp;video_ctrl_param);</p>
<p>if (ret != HD_OK) { return ret;}</p>
<p><strong>/* Set proc parameter */</strong></p>
<p>video_out_param.func = 0;</p>
<p>video_out_param.dim.w = p_dim-&gt;w;</p>
<p>video_out_param.dim.h = p_dim-&gt;h;</p>
<p>video_out_param.pxlfmt = HD_VIDEO_PXLFMT_YUV420;</p>
<p>video_out_param.dir = HD_VIDEO_DIR_NONE;</p>
<p>video_out_param.frc = HD_VIDEO_FRC_RATIO(1,1);</p>
<p>ret = hd_videoproc_set(video_proc_path, HD_VIDEOPROC_PARAM_OUT, &amp;video_out_param);</p>
<p>if (ret != HD_OK) { return ret;}</p>
<p><strong>/* Set out configuration */</strong></p>
<p>ret = hd_videoout_open(0, HD_VIDEOOUT_0_CTRL, &amp;video_out_ctrl); //open this for device control</p>
<p>switch(out_type){</p>
<p>case 0:</p>
<p>???? videoout_mode.output_type = HD_COMMON_VIDEO_OUT_CVBS;</p>
<p>???? videoout_mode.input_dim = HD_VIDEOOUT_IN_AUTO;</p>
<p>???? videoout_mode.output_mode.cvbs= HD_VIDEOOUT_CVBS_NTSC;</p>
<p>break;</p>
<p>case 1:</p>
<p>???? videoout_mode.output_type = HD_COMMON_VIDEO_OUT_LCD;</p>
<p>???? videoout_mode.input_dim = HD_VIDEOOUT_IN_AUTO;</p>
<p>???? videoout_mode.output_mode.lcd = HD_VIDEOOUT_LCD_0;</p>
<p>break;</p>
<p>case 2:</p>
<p>???? videoout_mode.output_type = HD_COMMON_VIDEO_OUT_HDMI;</p>
<p>???? videoout_mode.input_dim = HD_VIDEOOUT_IN_AUTO;</p>
<p>???? videoout_mode.output_mode.hdmi= hdmi_id;</p>
<p>break;</p>
<p>default:</p>
<p>???? printf(&ldquo;not support out_type\r\n&rdquo;);</p>
<p>break;</p>
<p>}</p>
<p>ret = hd_videoout_set(video_out_ctrl, HD_VIDEOOUT_PARAM_MODE, &amp;videoout_mode);</p>
<p>if (ret != HD_OK) { return ret;}</p>
<p><strong>/* Set out parameter */</strong></p>
<p>video_out_param.dim.w = p_dim-&gt;w;</p>
<p>video_out_param.dim.h = p_dim-&gt;h;</p>
<p>video_out_param.pxlfmt = HD_VIDEO_PXLFMT_YUV420;</p>
<p>video_out_param.dir = HD_VIDEO_DIR_NONE;</p>
<p>ret = hd_videoout_set(video_out_path, HD_VIDEOOUT_PARAM_IN, &amp;video_out_param);</p>
<p>if (ret != HD_OK) { return ret;}</p>
<p>memset((void *)&amp;video_out_param,0,sizeof(HD_VIDEOOUT_IN));</p>
<p>ret = hd_videoout_get(video_out_path, HD_VIDEOOUT_PARAM_IN, &amp;video_out_param);</p>
<p>if (ret != HD_OK) { return ret;}</p>
<p><strong>/* Bind modules */</strong></p>
<p>hd_videodec_bind(HD_VIDEODEC_0_OUT_0, HD_VIDEOPROC_0_IN_0);</p>
<p>hd_videoproc_bind(HD_VIDEOPROC_0_OUT_0, HD_VIDEOOUT_0_IN_0);</p>
<p><strong>/* start modules */</strong></p>
<p>hd_videodec_start(stream[0].dec_path);</p>
<p>hd_videoproc_start(stream[0].proc_path);</p>
<p>hd_videoout_start(stream[0].out_path);</p>
<p><strong>/* Push in buffer */</strong></p>
<p>blk = hd_common_mem_get_block(HD_COMMON_MEM_COMMON_POOL, blk_size, ddr_id);</p>
<p>pa = hd_common_mem_blk2pa(blk);</p>
<p>va= hd_common_mem_mmap(HD_COMMON_MEM_MEM_TYPE_CACHE, pa, blk_size);</p>
<p>fread((void *)va, 1, length, bs_fd);</p>
<p>video_bs.phy_addr[0] = pa;</p>
<p>video_bs.size = length;</p>
<p>ret = hd_videodec_push_in_buf(p_stream0-&gt;dec_path, &amp;video_bs, NULL, 0);</p>
<p>if (ret != HD_OK) { return ret; }</p>
<p><strong>/* Release in buffer */</strong></p>
<p>hd_common_mem_munmap((void *)va, blk_size)</p>
<p>hd_common_mem_release_block(blk);</p>
<h3 id="52-video_decode_only">5.2 video_decode_only<a class="headerlink" href="#52-video_decode_only" title="Permanent link">&para;</a></h3>
<p>This sample code is used in NT9668X / NT9852X / NT9856X / NT98530. The <strong>hd_videodec_only</strong> demonstrates how to use the single trigger operation to process the input image.</p>
<p><strong>/* Allocate common buffer*/</strong></p>
<p>// config common pool (main)</p>
<p>mem_cfg.pool_info[0].type = HD_COMMON_MEM_COMMON_POOL;</p>
<p>mem_cfg.pool_info[0].blk_size = DBGINFO_BUFSIZE()+VDO_YUV_BUFSIZE(ALIGN_CEIL_64(VDO_SIZE_W), ALIGN_CEIL_64(VDO_SIZE_H), HD_VIDEO_PXLFMT_YUV420);? // align to 16 for rotate buffer</p>
<p>mem_cfg.pool_info[0].blk_cnt = 3;</p>
<p>mem_cfg.pool_info[0].ddr_id = DDR_ID0;</p>
<p>// config common pool for bs pushing in</p>
<p>mem_cfg.pool_info[1].type = HD_COMMON_MEM_USER_POOL_BEGIN;</p>
<p>mem_cfg.pool_info[1].blk_size = BS_BLK_SIZE;</p>
<p>mem_cfg.pool_info[1].blk_cnt = 1;</p>
<p>mem_cfg.pool_info[1].ddr_id = DDR_ID0;</p>
<p>ret = hd_common_mem_init(&amp;mem_cfg);</p>
<p><strong>/* Set dec path configuration */</strong></p>
<p>video_path_cfg.max_mem.codec_type = dec_type;</p>
<p>video_path_cfg.max_mem.dim.w = p_max_dim-&gt;w;</p>
<p>video_path_cfg.max_mem.dim.h = p_max_dim-&gt;h;</p>
<p>ret = hd_videodec_set(video_dec_path, HD_VIDEODEC_PARAM_PATH_CONFIG, &amp;video_path_cfg);</p>
<p>if (ret != HD_OK) { return ret; }</p>
<p><strong>/* Set dec parameter */</strong></p>
<p>video_in_param.codec_type = dec_type;</p>
<p>video_in_param.dim.w = p_dim-&gt;w;</p>
<p>video_in_param.dim.h = p_dim-&gt;h;</p>
<p>ret = hd_videodec_set(video_dec_path, HD_VIDEODEC_PARAM_IN, &amp;video_in_param);</p>
<p>if (ret != HD_OK) { return ret; }</p>
<p><strong>/* start modules */</strong></p>
<p>hd_videodec_start(stream[0].dec_path);</p>
<p><strong>/* Push in buffer */</strong></p>
<p>blk = hd_common_mem_get_block(HD_COMMON_MEM_COMMON_POOL, blk_size, ddr_id);</p>
<p>pa = hd_common_mem_blk2pa(blk);</p>
<p>va= hd_common_mem_mmap(HD_COMMON_MEM_MEM_TYPE_CACHE, pa, blk_size);</p>
<p>fread((void *)va, 1, length, bs_fd);</p>
<p>video_bs.phy_addr[0] = pa;</p>
<p>video_bs.size = length;</p>
<p>ret = hd_videodec_push_in_buf(p_stream0-&gt;dec_path, &amp;video_bs, NULL, 0);</p>
<p>if (ret != HD_OK) { return ret; }</p>
<p><strong>/* Release in buffer */</strong></p>
<p>hd_common_mem_munmap((void *)va, blk_size)</p>
<p>hd_common_mem_release_block(blk);</p>
<p><strong>/* Pull out buffer */</strong></p>
<p>ret = hd_videodec_pull_out_buf(p_stream0-&gt;dec_path, &amp;data_pull, -1);</p>
<p>if (ret == HD_OK) {</p>
<p>???? hd_videodec_get(p_stream0-&gt;dec_path, HD_VIDEODEC_PARAM_BUFINFO, &amp;phy_buf_main);</p>
<p>vir_addr_main = (UINT32)hd_common_mem_mmap(HD_COMMON_MEM_MEM_TYPE_CACHE,</p>
<p>phy_buf_main.buf_info.phy_addr,</p>
<p>phy_buf_main.buf_info.buf_size);</p>
<h1 id="define-phy2virt_mainpa-vir_addr_main-pa-phy_buf_mainbuf_infophy_addr">define PHY2VIRT_MAIN(pa) (vir_addr_main + (pa - phy_buf_main.buf_info.phy_addr))<a class="headerlink" href="#define-phy2virt_mainpa-vir_addr_main-pa-phy_buf_mainbuf_infophy_addr" title="Permanent link">&para;</a></h1>
<p>???? va = PHY2VIRT_MAIN(data_pull.phy_addr);</p>
<p>???? size = data_pull.size;</p>
<p>???? sprintf(filename, &ldquo;dump_frm_main.dat&rdquo;);</p>
<p>???? save_output(filename, va, size);</p>
<p>}</p>
<p><strong>/* Release out buffer */</strong></p>
<p>hd_common_mem_munmap(vir_addr_main, phy_buf_main.buf_info.buf_size);</p>
<p>hd_videodec_release_out_buf(p_stream0-&gt;dec_path, &amp;data_pull);</p>
<h3 id="53-user_videodec">5.3 user_videodec<a class="headerlink" href="#53-user_videodec" title="Permanent link">&para;</a></h3>
<p>This sample code is used in NT9831X / NT9832X / NT9833X / NT98331. The <strong>user_videodec</strong> demonstrates how to use the single trigger operation to process the input image.</p>
<p><strong>/* Set parameters */</strong></p>
<p>config.max_mem.dim.w = max_frame_width;</p>
<p>config.max_mem.dim.h = max_frame_height;</p>
<p>config.max_mem.frame_rate = 30;</p>
<p>ret = hd_videodec_set(path_id, HD_VIDEODEC_PARAM_PATH_CONFIG, &amp;config);</p>
<p>if (ret != HD_OK) {</p>
<p>???? printf(&ldquo;hd_videodec_set fail\n&rdquo;);</p>
<p>???? goto exit;</p>
<p>}</p>
<p><strong>/* Allocate in buffer */</strong></p>
<p>bs_in_buffer.ddr_id = ddr_id;</p>
<p>bs_in_buffer.size = BS_BUF_SIZE;</p>
<p>blk = hd_common_mem_get_block(pool, bs_in_buffer.size, ddr_id);</p>
<p>if (HD_COMMON_MEM_VB_INVALID_BLK == blk) {</p>
<p>???? printf(&ldquo;hd_common_mem_get_block fail\r\n&rdquo;);</p>
<p>???? ret =? HD_ERR_NG;</p>
<p>???? goto exit;</p>
<p>}</p>
<p>bs_in_buffer.phy_addr = hd_common_mem_blk2pa(blk);</p>
<p>if (bs_in_buffer.phy_addr == 0) {</p>
<p>???? printf(&ldquo;hd_common_mem_blk2pa fail, blk = %#lx\r\n&rdquo;, blk);</p>
<p>???? hd_common_mem_release_block(blk);</p>
<p>???? return HD_ERR_NG;</p>
<p>}</p>
<p>bs_in_buffer_va = hd_common_mem_mmap(HD_COMMON_MEM_MEM_TYPE_NONCACHE,</p>
<p>??????????????????????????????? bs_in_buffer.phy_addr,</p>
<p>??????????????????????????????? bs_in_buffer.size);</p>
<p><strong>/* Allocate out buffer */</strong></p>
<p>blk = hd_common_mem_get_block(pool, frame_buf_size, ddr_id);</p>
<p>if (HD_COMMON_MEM_VB_INVALID_BLK == blk) {</p>
<p>???? printf(&ldquo;hd_common_mem_get_block fail\r\n&rdquo;);</p>
<p>???? ret =? HD_ERR_NG;</p>
<p>???? goto exit;</p>
<p>}</p>
<p>dec_out_buffer.phy_addr[0] = hd_common_mem_blk2pa(blk);</p>
<p>if (dec_out_buffer.phy_addr[0] == 0) {</p>
<p>???? printf(&ldquo;hd_common_mem_blk2pa fail, blk = %#lx\r\n&rdquo;, blk);</p>
<p>???? hd_common_mem_release_block(blk);</p>
<p>???? return HD_ERR_NG;</p>
<p>}</p>
<p>dec_out_buffer_va = hd_common_mem_mmap(HD_COMMON_MEM_MEM_TYPE_NONCACHE,</p>
<p>???????????????????????????????????????? dec_out_buffer.phy_addr[0],</p>
<p>???????????????????????????????????????? frame_buf_size);</p>
<p><strong>/* Push in buffer */</strong></p>
<p>fscanf(bs_len_fd, &ldquo;%d\n&rdquo;, &amp;length);</p>
<p>if (length &gt; BS_BUF_SIZE) {</p>
<p>???? printf(&ldquo;User bitstream is too large. bs_size(%d) &gt; max(%d)\n&rdquo;, length, BS_BUF_SIZE);</p>
<p>???? goto exit;</p>
<p>}</p>
<p>fseek(bs_fd, 0, SEEK_SET);</p>
<p>fread((void *)bs_in_buffer_va, 1, length, bs_fd);</p>
<p>bs_in_buffer.size = length;</p>
<p>ret = hd_videodec_push_in_buf(path_id, &amp;bs_in_buffer, &amp;dec_out_buffer, 500);</p>
<p>if (ret != HD_OK) {</p>
<p>???? printf(&ldquo;hd_videodec_push_in_buf fail\n&rdquo;);</p>
<p>???? goto exit;</p>
<p>}</p>
<p><strong>/* Pull out buffer */</strong></p>
<p>ret = hd_videodec_pull_out_buf(path_id, &amp;dec_out_buffer, 500);</p>
<p>if (ret != HD_OK) {</p>
<p>???? printf(&ldquo;hd_videodec_pull_out_buf fail\n&rdquo;);</p>
<p>???? goto exit;</p>
<p>} else {</p>
<p>???? dec_out_buffer_va = hd_common_mem_mmap(HD_COMMON_MEM_MEM_TYPE_NONCACHE,</p>
<p>???????????????????????????????????????? dec_out_buffer.phy_addr[0],</p>
<p>???????????????????????????????????????? frame_buf_size);</p>
<p>???? sprintf(filename, &ldquo;user_dec_%ldx%ld_YUV420_16x2.yuv&rdquo;,</p>
<p>dec_out_buffer.dim.w, dec_out_buffer.dim.h);</p>
<p>???? save_output(filename, dec_out_buffer_va, frame_buf_size);</p>
<p>}</p>
<p><strong>/* Release in buffer */</strong></p>
<p>hd_common_mem_munmap(bs_in_buffer_va, frame_buf_size);</p>
<p>hd_common_mem_release_block((HD_COMMON_MEM_VB_BLK)bs_in_buffer.phy_addr);</p>
<p><strong>/* Release out buffer */</strong></p>
<p>hd_common_mem_munmap(dec_out_buffer_va, frame_buf_size);</p>
<p>hd_common_mem_release_block((HD_COMMON_MEM_VB_BLK)dec_out_buffer.phy_addr[0]);</p>
<h2 id="6-faq">6 FAQ<a class="headerlink" href="#6-faq" title="Permanent link">&para;</a></h2>
<ol>
<li>Why using hd_videodec_push_in_buf() but return error -19?</li>
</ol>
<p>Answer:</p>
<p>o Check hd_videodec_start() is already called.</p>
<p>o If hd_videodec_start() is called, please check the order of hd_videodec_set</p>
<p>(HD_VIDEODEC_PARAM_IN_DESC) and hd_videodec_start(). Call</p>
<p>hd_videodec_set(HD_VIDEODEC_PARAM_IN_DESC) first, and then call</p>
<p>hd_videodec_start().</p>
<ol start="2">
<li>Why using hd_videoproc_pull_out_buf() to pull the yuv data from videodec, but return time out error -15?</li>
</ol>
<p>Answer:</p>
<p>o Check the bitstream first. If the continuous incorrect frames exist in the bitstream,</p>
<p>video decode error happened and decoder not send the error YUV to vproc in</p>
<p>binding mode.  It caused time out error -15 if timeout value is set.</p>
<ol start="3">
<li>What values of width and height should I set for each codecs?</li>
</ol>
<p>Answer:</p>
<p>o H264: width is aligned to 64, height is aligned to 16.</p>
<p>o H265: width is aligned to 64, height is aligned to 64.</p>
<p>o JPEG: width is aligned to 16, height is aligned to 16.</p>
<ol start="4">
<li>Is it possible to push yuv data from vdodec to vdoout directly?</li>
</ol>
<p>Answer:</p>
<p>o For Achieving video playback function, vdec, vproc and vout are necessary. The</p>
<p>binding order is vdec, vproc, and then vout. Vproc scaled the resolution if the</p>
<p>resolution of YUV is differ to display device.</p>
<ol start="5">
<li>Is it possible to change the resolution when video decode is processing?</li>
</ol>
<p>Answer:</p>
<p>o No, please call hd_videodec_stop() to stop decoder, set the new width/height, and</p>
<p>?? call hd_videodec_start() to start decoder again. Remember that config the</p>
<p>maximum width/height at beginning.</p>
<ol start="6">
<li>I set vdodec_maxpath = 17 in dtsi, why show warning message “dts max_path=17 is larger than built-in max_path=16”?</li>
</ol>
<p>Answer:</p>
<p>o VDODEC_MAX_PATH_NUM is defined as 16 in isf_vdodec, which means video decode path maximum is 16. Please set vdodec_maxpath &lt;= 16 in dtsi.</p>





                
              </article>
            </div>
          
          
        </div>
        
      </main>
      
        <footer class="md-footer">
  
    
    <nav class="md-footer__inner md-grid" aria-label="Footer" >
      
        
        <a href="NT9833x_LCD_IQ_Tuning_Guide_en.html" class="md-footer__link md-footer__link--prev" aria-label="Previous: LCD IQ Tuning Guide" rel="prev">
          <div class="md-footer__button md-icon">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
          </div>
          <div class="md-footer__title">
            <div class="md-ellipsis">
              <span class="md-footer__direction">
                Previous
              </span>
              LCD IQ Tuning Guide
            </div>
          </div>
        </a>
      
      
        
        <a href="Novatek%2BHDAL%2BDesign%2BSpecification%2B-%2Bhd_videoenc.html" class="md-footer__link md-footer__link--next" aria-label="Next: HDAL hd_videoenc" rel="next">
          <div class="md-footer__title">
            <div class="md-ellipsis">
              <span class="md-footer__direction">
                Next
              </span>
              HDAL hd_videoenc
            </div>
          </div>
          <div class="md-footer__button md-icon">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11H4Z"/></svg>
          </div>
        </a>
      
    </nav>
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
        <div class="md-social">
  
    
    
      
      
    
    <a href="https://github.com" target="_blank" rel="noopener" title="github.com" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><!--! Font Awesome Free 6.2.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc.--><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"/></svg>
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    <script id="__config" type="application/json">{"base": ".", "features": ["search.highlight", "navigation.tabs"], "search": "assets/javascripts/workers/search.5bf1dace.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.config.lang": "en", "search.config.pipeline": "trimmer, stopWordFilter", "search.config.separator": "[\\s\\-]+", "search.placeholder": "Search", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version.title": "Select version"}}</script>
    
    
      <script src="assets/javascripts/bundle.37e9125f.min.js"></script>
      
    
  </body>
</html>