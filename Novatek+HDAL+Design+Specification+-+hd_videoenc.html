
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
      <link rel="icon" href="assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.3.1, mkdocs-material-8.5.3">
    
    
      
        <title>HDAL hd_videoenc - NT98336/NT98633 Documents</title>
      
    
    
      <link rel="stylesheet" href="assets/stylesheets/main.7a952b86.min.css">
      
        
        <link rel="stylesheet" href="assets/stylesheets/palette.cbb835fc.min.css">
        
      
      

    
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
    <script>__md_scope=new URL(".",location),__md_hash=e=>[...e].reduce((e,_)=>(e<<5)-e+_.charCodeAt(0),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    
    
    
    
    
    <body dir="ltr" data-md-color-scheme="" data-md-color-primary="none" data-md-color-accent="none">
  
    
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#1-introduction" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

<header class="md-header" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="." title="NT98336/NT98633 Documents" class="md-header__button md-logo" aria-label="NT98336/NT98633 Documents" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54Z"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            NT98336/NT98633 Documents
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              HDAL hd_videoenc
            
          </span>
        </div>
      </div>
    </div>
    
    
    
      <label class="md-header__button md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
            
<nav class="md-tabs" aria-label="Tabs" data-md-component="tabs">
  <div class="md-tabs__inner md-grid">
    <ul class="md-tabs__list">
      
        
  
  
    
  


  
  
  
    

  
  
  
    <li class="md-tabs__item">
      <a href="NT9833X_MD_User_Guide_en.html" class="md-tabs__link md-tabs__link--active">
        Software
      </a>
    </li>
  

  

      
        
  
  


  
  
  
    

  
  
  
    <li class="md-tabs__item">
      <a href="not_ready - not_reay.md" class="md-tabs__link">
        Hardware(Not Ready)
      </a>
    </li>
  

  

      
        
  
  


  
  
  
    

  
  
  
    <li class="md-tabs__item">
      <a href="not_ready - not_reay.md" class="md-tabs__link">
        For Reference(Not Ready)
      </a>
    </li>
  

  

      
    </ul>
  </div>
</nav>
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

  


<nav class="md-nav md-nav--primary md-nav--lifted" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="." title="NT98336/NT98633 Documents" class="md-nav__button md-logo" aria-label="NT98336/NT98633 Documents" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54Z"/></svg>

    </a>
    NT98336/NT98633 Documents
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      

  
  
    
  
  
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_1" type="checkbox" id="__nav_1" checked>
      
      
      
      
        <label class="md-nav__link" for="__nav_1">
          Software
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Software" data-md-level="1">
        <label class="md-nav__title" for="__nav_1">
          <span class="md-nav__icon md-icon"></span>
          Software
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_1_1" type="checkbox" id="__nav_1_1" >
      
      
      
      
        <label class="md-nav__link" for="__nav_1_1">
          CVAI
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="CVAI" data-md-level="2">
        <label class="md-nav__title" for="__nav_1_1">
          <span class="md-nav__icon md-icon"></span>
          CVAI
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="NT9833X_MD_User_Guide_en.html" class="md-nav__link">
        MD User Guide
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="NT9833X_IVE_User_Guide_en.html" class="md-nav__link">
        IVE User Guide
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_1_2" type="checkbox" id="__nav_1_2" >
      
      
      
      
        <label class="md-nav__link" for="__nav_1_2">
          ISPQ
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="ISPQ" data-md-level="2">
        <label class="md-nav__title" for="__nav_1_2">
          <span class="md-nav__icon md-icon"></span>
          ISPQ
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="NT9833x_VPE_IQ_Tuning_Guide_en.html" class="md-nav__link">
        VPE IQ Tuning Guide
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="NT9833x_LCD_IQ_Tuning_Guide_en.html" class="md-nav__link">
        LCD IQ Tuning Guide
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
    
  
  
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_1_3" type="checkbox" id="__nav_1_3" checked>
      
      
      
      
        <label class="md-nav__link" for="__nav_1_3">
          MEDIA
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="MEDIA" data-md-level="2">
        <label class="md-nav__title" for="__nav_1_3">
          <span class="md-nav__icon md-icon"></span>
          MEDIA
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="Novatek%2BHDAL%2BDesign%2BSpecification%2B-%2Bhd_videodec.html" class="md-nav__link">
        HDAL hd_videodec
      </a>
    </li>
  

            
          
            
              
  
  
    
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" data-md-toggle="toc" type="checkbox" id="__toc">
      
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          HDAL hd_videoenc
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="Novatek%2BHDAL%2BDesign%2BSpecification%2B-%2Bhd_videoenc.html" class="md-nav__link md-nav__link--active">
        HDAL hd_videoenc
      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#1-introduction" class="md-nav__link">
    1 Introduction
  </a>
  
    <nav class="md-nav" aria-label="1 Introduction">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#11-basic-flow" class="md-nav__link">
    1.1 Basic Flow
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#12-single-trigger-operation" class="md-nav__link">
    1.2 Single Trigger Operation
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#13-multi-channel-operation" class="md-nav__link">
    1.3 Multi Channel Operation
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#2-parameter-ids-and-data-structure-definition" class="md-nav__link">
    2 Parameter IDs and data structure definition
  </a>
  
    <nav class="md-nav" aria-label="2 Parameter IDs and data structure definition">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#21-general-function" class="md-nav__link">
    2.1 General function
  </a>
  
    <nav class="md-nav" aria-label="2.1 General function">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#211-hd_videoenc_init" class="md-nav__link">
    2.1.1 hd_videoenc_init
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#212-hd_videoenc_open" class="md-nav__link">
    2.1.2 hd_videoenc_open
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#213-hd_videoenc_get" class="md-nav__link">
    2.1.3 hd_videoenc_get
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#214-hd_videoenc_set" class="md-nav__link">
    2.1.4 hd_videoenc_set
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#215-hd_videoenc_bind" class="md-nav__link">
    2.1.5 hd_videoenc_bind
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#216-hd_videoenc_start" class="md-nav__link">
    2.1.6 hd_videoenc_start
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#217-hd_videoenc_stop" class="md-nav__link">
    2.1.7 hd_videoenc_stop
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#218-hd_videoenc_unbind" class="md-nav__link">
    2.1.8 hd_videoenc_unbind
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#219-hd_videoenc_close" class="md-nav__link">
    2.1.9 hd_videoenc_close
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#2110-hd_videoenc_uninit" class="md-nav__link">
    2.1.10 hd_videoenc_uninit
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#2111-hd_videoenc_push_in_buf" class="md-nav__link">
    2.1.11 hd_videoenc_push_in_buf
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#2112-hd_videoenc_pull_out_buf" class="md-nav__link">
    2.1.12 hd_videoenc_pull_out_buf
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#2113-hd_videoenc_release_out_buf" class="md-nav__link">
    2.1.13 hd_videoenc_release_out_buf
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#22-multi-list-operation" class="md-nav__link">
    2.2 Multi List Operation
  </a>
  
    <nav class="md-nav" aria-label="2.2 Multi List Operation">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#221-hd_videoenc_start_list" class="md-nav__link">
    2.2.1 hd_videoenc_start_list
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#222-hd_videoenc_stop_list" class="md-nav__link">
    2.2.2 hd_videoenc_stop_list
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#223-hd_videoenc_poll_list" class="md-nav__link">
    2.2.3 hd_videoenc_poll_list
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#224-hd_videoenc_recv_list" class="md-nav__link">
    2.2.4 hd_videoenc_recv_list
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#23-data-structure-definition" class="md-nav__link">
    2.3 Data structure  definition
  </a>
  
    <nav class="md-nav" aria-label="2.3 Data structure  definition">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#231-hd_videoenc_param_syscaps" class="md-nav__link">
    2.3.1 HD_VIDEOENC_PARAM_SYSCAPS
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#232-hd_videoenc_param_path_config" class="md-nav__link">
    2.3.2 HD_VIDEOENC_PARAM_PATH_CONFIG
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#233-hd_videoenc_param_bufinfo" class="md-nav__link">
    2.3.3 HD_VIDEOENC_PARAM_BUFINFO
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#234-hd_videoenc_param_in" class="md-nav__link">
    2.3.4 HD_VIDEOENC_PARAM_IN
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#235-hd_videoenc_param_in_frc" class="md-nav__link">
    2.3.5 HD_VIDEOENC_PARAM_IN_FRC
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#236-hd_videoenc_param_out_enc_param" class="md-nav__link">
    2.3.6 HD_VIDEOENC_PARAM_OUT_ENC_PARAM
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#237-hd_videoenc_param_out_vui" class="md-nav__link">
    2.3.7 HD_VIDEOENC_PARAM_OUT_VUI
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#238-hd_videoenc_param_out_deblock" class="md-nav__link">
    2.3.8 HD_VIDEOENC_PARAM_OUT_DEBLOCK
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#239-hd_videoenc_param_out_rate_control" class="md-nav__link">
    2.3.9 HD_VIDEOENC_PARAM_OUT_RATE_CONTROL
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#2310-hd_videoenc_param_out_usr_qp" class="md-nav__link">
    2.3.10 HD_VIDEOENC_PARAM_OUT_USR_QP
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#2311-hd_videoenc_param_out_slice_split" class="md-nav__link">
    2.3.11 HD_VIDEOENC_PARAM_OUT_SLICE_SPLIT
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#2312-hd_videoenc_param_out_enc_gdr" class="md-nav__link">
    2.3.12 HD_VIDEOENC_PARAM_OUT_ENC_GDR
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#2313-hd_videoenc_param_out_roi" class="md-nav__link">
    2.3.13 HD_VIDEOENC_PARAM_OUT_ROI
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#2314-hd_videoenc_param_out_row_rc" class="md-nav__link">
    2.3.14 HD_VIDEOENC_PARAM_OUT_ROW_RC
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#2315-hd_videoenc_param_out_aq" class="md-nav__link">
    2.3.15 HD_VIDEOENC_PARAM_OUT_AQ
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#2316-hd_videoenc_param_out_request_iframe" class="md-nav__link">
    2.3.16 HD_VIDEOENC_PARAM_OUT_REQUEST_IFRAME
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#2317-hd_videoenc_param_out_trig_snapshot" class="md-nav__link">
    2.3.17 HD_VIDEOENC_PARAM_OUT_TRIG_SNAPSHOT
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#2318-hd_videoenc_param_in_stamp_buf" class="md-nav__link">
    2.3.18 HD_VIDEOENC_PARAM_IN_STAMP_BUF
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#2319-hd_videoenc_param_in_stamp_img" class="md-nav__link">
    2.3.19 HD_VIDEOENC_PARAM_IN_STAMP_IMG
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#2320-hd_videoenc_param_in_stamp_attr" class="md-nav__link">
    2.3.20 HD_VIDEOENC_PARAM_IN_STAMP_ATTR
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#2321-hd_videoenc_param_in_mask_attr" class="md-nav__link">
    2.3.21 HD_VIDEOENC_PARAM_IN_MASK_ATTR
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#2322-hd_videoenc_param_in_mosaic_attr" class="md-nav__link">
    2.3.22 HD_VIDEOENC_PARAM_IN_MOSAIC_ATTR
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#2323-hd_videoenc_param_in_palette_table" class="md-nav__link">
    2.3.23 HD_VIDEOENC_PARAM_IN_PALETTE_TABLE
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#2324-hd_videoenc_param_func_config" class="md-nav__link">
    2.3.24 HD_VIDEOENC_PARAM_FUNC_CONFIG
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#2325-hd_videoenc_poll_list" class="md-nav__link">
    2.3.25 HD_VIDEOENC_POLL_LIST
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#2326-hd_videoenc_user_bs" class="md-nav__link">
    2.3.26 HD_VIDEOENC_USER_BS
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#2327-hd_videoenc_recv_list" class="md-nav__link">
    2.3.27 HD_VIDEOENC_RECV_LIST
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#2328-hd_h26x_config" class="md-nav__link">
    2.3.28 HD_H26X_CONFIG
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#2329-hd_jpeg_config" class="md-nav__link">
    2.3.29 HD_JPEG_CONFIG
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#3-trouble-shooting" class="md-nav__link">
    3 Trouble shooting
  </a>
  
    <nav class="md-nav" aria-label="3 Trouble shooting">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#31-debug-menu-nt9668x-nt9852x-nt9856x-nt98530" class="md-nav__link">
    3.1 debug  menu (NT9668X / NT9852X / NT9856X / NT98530)
  </a>
  
    <nav class="md-nav" aria-label="3.1 debug  menu (NT9668X / NT9852X / NT9856X / NT98530)">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#311-dump-status" class="md-nav__link">
    3.1.1 dump status
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#312-enc-info" class="md-nav__link">
    3.1.2 enc info
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#313-rc-info-on" class="md-nav__link">
    3.1.3 rc info on
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#314-rc-info-off" class="md-nav__link">
    3.1.4 rc info off
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#32-proc-command-nt9668x-nt9852x-nt9856x-nt98530" class="md-nav__link">
    3.2 proc command (NT9668X / NT9852X / NT9856X / NT98530)
  </a>
  
    <nav class="md-nav" aria-label="3.2 proc command (NT9668X / NT9852X / NT9856X / NT98530)">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#321-dump-status" class="md-nav__link">
    3.2.1 dump status
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#322-debug-command" class="md-nav__link">
    3.2.2 debug command
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#323-trace-command" class="md-nav__link">
    3.2.3 trace command
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#324-probe-command" class="md-nav__link">
    3.2.4 probe command
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#325-perf-command" class="md-nav__link">
    3.2.5 perf command
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#326-save-command" class="md-nav__link">
    3.2.6 save command
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#33-osg-proc-command" class="md-nav__link">
    3.3 OSG proc command
  </a>
  
    <nav class="md-nav" aria-label="3.3 OSG proc command">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#331-dump-status" class="md-nav__link">
    3.3.1 dump status
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#332-change-status" class="md-nav__link">
    3.3.2 change status
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#34-debug-menu-nt9831x-nt9832x-nt9833x-nt98331" class="md-nav__link">
    3.4 Debug menu (NT9831X / NT9832X / NT9833X / NT98331)
  </a>
  
    <nav class="md-nav" aria-label="3.4 Debug menu (NT9831X / NT9832X / NT9833X / NT98331)">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#341-dump-status" class="md-nav__link">
    3.4.1 dump status
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#35-proc-command-nt9831x-nt9832x-nt9833x" class="md-nav__link">
    3.5 proc command (NT9831X / NT9832X / NT9833X)
  </a>
  
    <nav class="md-nav" aria-label="3.5 proc command (NT9831X / NT9832X / NT9833X)">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#351-dump-status" class="md-nav__link">
    3.5.1 dump status
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#4-sample-codes" class="md-nav__link">
    4 Sample Codes
  </a>
  
    <nav class="md-nav" aria-label="4 Sample Codes">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#41-hd_videoenc_only" class="md-nav__link">
    4.1 hd_videoenc_only
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#define-phy2virt_mainpa-vir_addr_main-pa-phy_buf_mainbuf_infophy_addr" class="md-nav__link">
    define PHY2VIRT_MAIN(pa) (vir_addr_main + (pa - phy_buf_main.buf_info.phy_addr))
  </a>
  
    <nav class="md-nav" aria-label="define PHY2VIRT_MAIN(pa) (vir_addr_main + (pa - phy_buf_main.buf_info.phy_addr))">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#42-user_videoenc" class="md-nav__link">
    4.2 user_videoenc
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#5-faq-nt9668x-nt9852x-nt9856x-nt98530" class="md-nav__link">
    5 FAQ (NT9668X / NT9852X / NT9856X / NT98530)
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_1_4" type="checkbox" id="__nav_1_4" >
      
      
      
      
        <label class="md-nav__link" for="__nav_1_4">
          OSDRV
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="OSDRV" data-md-level="2">
        <label class="md-nav__title" for="__nav_1_4">
          <span class="md-nav__icon md-icon"></span>
          OSDRV
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="NT9833x_SDK_Pure_Linux_Programming_Guide_en.html" class="md-nav__link">
        Linux Programming Guide
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_2" type="checkbox" id="__nav_2" >
      
      
      
      
        <label class="md-nav__link" for="__nav_2">
          Hardware(Not Ready)
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Hardware(Not Ready)" data-md-level="1">
        <label class="md-nav__title" for="__nav_2">
          <span class="md-nav__icon md-icon"></span>
          Hardware(Not Ready)
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_2_1" type="checkbox" id="__nav_2_1" >
      
      
      
      
        <label class="md-nav__link" for="__nav_2_1">
          Not Ready
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Not Ready" data-md-level="2">
        <label class="md-nav__title" for="__nav_2_1">
          <span class="md-nav__icon md-icon"></span>
          Not Ready
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="not_ready - not_reay.md" class="md-nav__link">
        None
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_3" type="checkbox" id="__nav_3" >
      
      
      
      
        <label class="md-nav__link" for="__nav_3">
          For Reference(Not Ready)
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="For Reference(Not Ready)" data-md-level="1">
        <label class="md-nav__title" for="__nav_3">
          <span class="md-nav__icon md-icon"></span>
          For Reference(Not Ready)
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_3_1" type="checkbox" id="__nav_3_1" >
      
      
      
      
        <label class="md-nav__link" for="__nav_3_1">
          Not Ready
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Not Ready" data-md-level="2">
        <label class="md-nav__title" for="__nav_3_1">
          <span class="md-nav__icon md-icon"></span>
          Not Ready
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="not_ready - not_reay.md" class="md-nav__link">
        None
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#1-introduction" class="md-nav__link">
    1 Introduction
  </a>
  
    <nav class="md-nav" aria-label="1 Introduction">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#11-basic-flow" class="md-nav__link">
    1.1 Basic Flow
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#12-single-trigger-operation" class="md-nav__link">
    1.2 Single Trigger Operation
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#13-multi-channel-operation" class="md-nav__link">
    1.3 Multi Channel Operation
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#2-parameter-ids-and-data-structure-definition" class="md-nav__link">
    2 Parameter IDs and data structure definition
  </a>
  
    <nav class="md-nav" aria-label="2 Parameter IDs and data structure definition">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#21-general-function" class="md-nav__link">
    2.1 General function
  </a>
  
    <nav class="md-nav" aria-label="2.1 General function">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#211-hd_videoenc_init" class="md-nav__link">
    2.1.1 hd_videoenc_init
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#212-hd_videoenc_open" class="md-nav__link">
    2.1.2 hd_videoenc_open
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#213-hd_videoenc_get" class="md-nav__link">
    2.1.3 hd_videoenc_get
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#214-hd_videoenc_set" class="md-nav__link">
    2.1.4 hd_videoenc_set
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#215-hd_videoenc_bind" class="md-nav__link">
    2.1.5 hd_videoenc_bind
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#216-hd_videoenc_start" class="md-nav__link">
    2.1.6 hd_videoenc_start
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#217-hd_videoenc_stop" class="md-nav__link">
    2.1.7 hd_videoenc_stop
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#218-hd_videoenc_unbind" class="md-nav__link">
    2.1.8 hd_videoenc_unbind
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#219-hd_videoenc_close" class="md-nav__link">
    2.1.9 hd_videoenc_close
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#2110-hd_videoenc_uninit" class="md-nav__link">
    2.1.10 hd_videoenc_uninit
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#2111-hd_videoenc_push_in_buf" class="md-nav__link">
    2.1.11 hd_videoenc_push_in_buf
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#2112-hd_videoenc_pull_out_buf" class="md-nav__link">
    2.1.12 hd_videoenc_pull_out_buf
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#2113-hd_videoenc_release_out_buf" class="md-nav__link">
    2.1.13 hd_videoenc_release_out_buf
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#22-multi-list-operation" class="md-nav__link">
    2.2 Multi List Operation
  </a>
  
    <nav class="md-nav" aria-label="2.2 Multi List Operation">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#221-hd_videoenc_start_list" class="md-nav__link">
    2.2.1 hd_videoenc_start_list
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#222-hd_videoenc_stop_list" class="md-nav__link">
    2.2.2 hd_videoenc_stop_list
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#223-hd_videoenc_poll_list" class="md-nav__link">
    2.2.3 hd_videoenc_poll_list
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#224-hd_videoenc_recv_list" class="md-nav__link">
    2.2.4 hd_videoenc_recv_list
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#23-data-structure-definition" class="md-nav__link">
    2.3 Data structure  definition
  </a>
  
    <nav class="md-nav" aria-label="2.3 Data structure  definition">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#231-hd_videoenc_param_syscaps" class="md-nav__link">
    2.3.1 HD_VIDEOENC_PARAM_SYSCAPS
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#232-hd_videoenc_param_path_config" class="md-nav__link">
    2.3.2 HD_VIDEOENC_PARAM_PATH_CONFIG
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#233-hd_videoenc_param_bufinfo" class="md-nav__link">
    2.3.3 HD_VIDEOENC_PARAM_BUFINFO
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#234-hd_videoenc_param_in" class="md-nav__link">
    2.3.4 HD_VIDEOENC_PARAM_IN
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#235-hd_videoenc_param_in_frc" class="md-nav__link">
    2.3.5 HD_VIDEOENC_PARAM_IN_FRC
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#236-hd_videoenc_param_out_enc_param" class="md-nav__link">
    2.3.6 HD_VIDEOENC_PARAM_OUT_ENC_PARAM
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#237-hd_videoenc_param_out_vui" class="md-nav__link">
    2.3.7 HD_VIDEOENC_PARAM_OUT_VUI
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#238-hd_videoenc_param_out_deblock" class="md-nav__link">
    2.3.8 HD_VIDEOENC_PARAM_OUT_DEBLOCK
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#239-hd_videoenc_param_out_rate_control" class="md-nav__link">
    2.3.9 HD_VIDEOENC_PARAM_OUT_RATE_CONTROL
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#2310-hd_videoenc_param_out_usr_qp" class="md-nav__link">
    2.3.10 HD_VIDEOENC_PARAM_OUT_USR_QP
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#2311-hd_videoenc_param_out_slice_split" class="md-nav__link">
    2.3.11 HD_VIDEOENC_PARAM_OUT_SLICE_SPLIT
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#2312-hd_videoenc_param_out_enc_gdr" class="md-nav__link">
    2.3.12 HD_VIDEOENC_PARAM_OUT_ENC_GDR
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#2313-hd_videoenc_param_out_roi" class="md-nav__link">
    2.3.13 HD_VIDEOENC_PARAM_OUT_ROI
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#2314-hd_videoenc_param_out_row_rc" class="md-nav__link">
    2.3.14 HD_VIDEOENC_PARAM_OUT_ROW_RC
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#2315-hd_videoenc_param_out_aq" class="md-nav__link">
    2.3.15 HD_VIDEOENC_PARAM_OUT_AQ
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#2316-hd_videoenc_param_out_request_iframe" class="md-nav__link">
    2.3.16 HD_VIDEOENC_PARAM_OUT_REQUEST_IFRAME
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#2317-hd_videoenc_param_out_trig_snapshot" class="md-nav__link">
    2.3.17 HD_VIDEOENC_PARAM_OUT_TRIG_SNAPSHOT
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#2318-hd_videoenc_param_in_stamp_buf" class="md-nav__link">
    2.3.18 HD_VIDEOENC_PARAM_IN_STAMP_BUF
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#2319-hd_videoenc_param_in_stamp_img" class="md-nav__link">
    2.3.19 HD_VIDEOENC_PARAM_IN_STAMP_IMG
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#2320-hd_videoenc_param_in_stamp_attr" class="md-nav__link">
    2.3.20 HD_VIDEOENC_PARAM_IN_STAMP_ATTR
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#2321-hd_videoenc_param_in_mask_attr" class="md-nav__link">
    2.3.21 HD_VIDEOENC_PARAM_IN_MASK_ATTR
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#2322-hd_videoenc_param_in_mosaic_attr" class="md-nav__link">
    2.3.22 HD_VIDEOENC_PARAM_IN_MOSAIC_ATTR
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#2323-hd_videoenc_param_in_palette_table" class="md-nav__link">
    2.3.23 HD_VIDEOENC_PARAM_IN_PALETTE_TABLE
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#2324-hd_videoenc_param_func_config" class="md-nav__link">
    2.3.24 HD_VIDEOENC_PARAM_FUNC_CONFIG
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#2325-hd_videoenc_poll_list" class="md-nav__link">
    2.3.25 HD_VIDEOENC_POLL_LIST
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#2326-hd_videoenc_user_bs" class="md-nav__link">
    2.3.26 HD_VIDEOENC_USER_BS
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#2327-hd_videoenc_recv_list" class="md-nav__link">
    2.3.27 HD_VIDEOENC_RECV_LIST
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#2328-hd_h26x_config" class="md-nav__link">
    2.3.28 HD_H26X_CONFIG
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#2329-hd_jpeg_config" class="md-nav__link">
    2.3.29 HD_JPEG_CONFIG
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#3-trouble-shooting" class="md-nav__link">
    3 Trouble shooting
  </a>
  
    <nav class="md-nav" aria-label="3 Trouble shooting">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#31-debug-menu-nt9668x-nt9852x-nt9856x-nt98530" class="md-nav__link">
    3.1 debug  menu (NT9668X / NT9852X / NT9856X / NT98530)
  </a>
  
    <nav class="md-nav" aria-label="3.1 debug  menu (NT9668X / NT9852X / NT9856X / NT98530)">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#311-dump-status" class="md-nav__link">
    3.1.1 dump status
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#312-enc-info" class="md-nav__link">
    3.1.2 enc info
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#313-rc-info-on" class="md-nav__link">
    3.1.3 rc info on
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#314-rc-info-off" class="md-nav__link">
    3.1.4 rc info off
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#32-proc-command-nt9668x-nt9852x-nt9856x-nt98530" class="md-nav__link">
    3.2 proc command (NT9668X / NT9852X / NT9856X / NT98530)
  </a>
  
    <nav class="md-nav" aria-label="3.2 proc command (NT9668X / NT9852X / NT9856X / NT98530)">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#321-dump-status" class="md-nav__link">
    3.2.1 dump status
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#322-debug-command" class="md-nav__link">
    3.2.2 debug command
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#323-trace-command" class="md-nav__link">
    3.2.3 trace command
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#324-probe-command" class="md-nav__link">
    3.2.4 probe command
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#325-perf-command" class="md-nav__link">
    3.2.5 perf command
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#326-save-command" class="md-nav__link">
    3.2.6 save command
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#33-osg-proc-command" class="md-nav__link">
    3.3 OSG proc command
  </a>
  
    <nav class="md-nav" aria-label="3.3 OSG proc command">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#331-dump-status" class="md-nav__link">
    3.3.1 dump status
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#332-change-status" class="md-nav__link">
    3.3.2 change status
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#34-debug-menu-nt9831x-nt9832x-nt9833x-nt98331" class="md-nav__link">
    3.4 Debug menu (NT9831X / NT9832X / NT9833X / NT98331)
  </a>
  
    <nav class="md-nav" aria-label="3.4 Debug menu (NT9831X / NT9832X / NT9833X / NT98331)">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#341-dump-status" class="md-nav__link">
    3.4.1 dump status
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#35-proc-command-nt9831x-nt9832x-nt9833x" class="md-nav__link">
    3.5 proc command (NT9831X / NT9832X / NT9833X)
  </a>
  
    <nav class="md-nav" aria-label="3.5 proc command (NT9831X / NT9832X / NT9833X)">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#351-dump-status" class="md-nav__link">
    3.5.1 dump status
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#4-sample-codes" class="md-nav__link">
    4 Sample Codes
  </a>
  
    <nav class="md-nav" aria-label="4 Sample Codes">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#41-hd_videoenc_only" class="md-nav__link">
    4.1 hd_videoenc_only
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#define-phy2virt_mainpa-vir_addr_main-pa-phy_buf_mainbuf_infophy_addr" class="md-nav__link">
    define PHY2VIRT_MAIN(pa) (vir_addr_main + (pa - phy_buf_main.buf_info.phy_addr))
  </a>
  
    <nav class="md-nav" aria-label="define PHY2VIRT_MAIN(pa) (vir_addr_main + (pa - phy_buf_main.buf_info.phy_addr))">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#42-user_videoenc" class="md-nav__link">
    4.2 user_videoenc
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#5-faq-nt9668x-nt9852x-nt9856x-nt98530" class="md-nav__link">
    5 FAQ (NT9668X / NT9852X / NT9856X / NT98530)
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  


<h2 id="1-introduction">1 Introduction<a class="headerlink" href="#1-introduction" title="Permanent link">&para;</a></h2>
<p>The major purpose of hd_videoenc is to get YUV raw data from upper unit, and controls the video encoder to encode the YUV data then return the bitstream data which can be used for saving video files / online streaming. This document will talk about the red block in the following diagram. The device driver is not the main point in this document.</p>
<p><img alt="" src="Novatek%2BHDAL%2BDesign%2BSpecification%2B-%2Bhd_videoenc.files/image002.gif" /></p>
<p>Module diagram is shown as below:</p>
<p><img alt="" src="Novatek%2BHDAL%2BDesign%2BSpecification%2B-%2Bhd_videoenc.files/image003.gif" /></p>
<h3 id="11-basic-flow">1.1 Basic Flow<a class="headerlink" href="#11-basic-flow" title="Permanent link">&para;</a></h3>
<p>The call sequence is needed to be done correctly for the unit. The standard starting flows of most modules are init, open, get, set, bind and start. The standard closing flows of most modules are stop, unbind, close and uninit. The basic flow is shown as below.</p>
<p><img alt="" src="Novatek%2BHDAL%2BDesign%2BSpecification%2B-%2Bhd_videoenc.files/image004.gif" /></p>
<p>Now, below section in this chapter is mainly about what things to do in those functions above.</p>
<h3 id="12-single-trigger-operation">1.2 Single Trigger Operation<a class="headerlink" href="#12-single-trigger-operation" title="Permanent link">&para;</a></h3>
<p>Single trigger operation is used to trigger the unit to do one job, such as to grab one YUV frame from video capture; then, encode one frame to bitstream by using video encoder. There are two types of functions for the input port and output port. The sequence for input port is push; the sequence for output port is pull and release. The flow is shown as below.</p>
<p><img alt="" src="Novatek%2BHDAL%2BDesign%2BSpecification%2B-%2Bhd_videoenc.files/image005.gif" /></p>
<h3 id="13-multi-channel-operation">1.3 Multi Channel Operation<a class="headerlink" href="#13-multi-channel-operation" title="Permanent link">&para;</a></h3>
<p>Multi channel operation is used to send multi bitstream simultaneously, it is very efficiency in the multi channels case. The flow is shown as below:</p>
<p><img alt="" src="Novatek%2BHDAL%2BDesign%2BSpecification%2B-%2Bhd_videoenc.files/image006.gif" /></p>
<h2 id="2-parameter-ids-and-data-structure-definition">2 Parameter IDs and data structure definition<a class="headerlink" href="#2-parameter-ids-and-data-structure-definition" title="Permanent link">&para;</a></h2>
<p>The videoenc provides the following parameter IDs:</p>
<p>l HD_VIDEOENC_PARAM_DEVCOUNT</p>
<p>o support get with ctrl path</p>
<p>o using HD_DEVCOUNT struct (device id max count)</p>
<p>l HD_VIDEOENC_PARAM_SYSCAPS</p>
<p>o support get with ctrl path</p>
<p>o using HD_VIDEOENC_SYSCAPS struct (system capabilitiy)</p>
<p>l HD_VIDEOENC_PARAM_PATH_CONFIG</p>
<p>o support get/set with i/o path</p>
<p>o using HD_VIDEOENC_PATH_CONFIG struct</p>
<p>l HD_VIDEOENC_PARAM_BUFINFO</p>
<p>o support get with i/o path</p>
<p>o using HD_VIDEOENC_BUFINFO struct</p>
<p>l HD_VIDEOENC_PARAM_IN</p>
<p>o support get/set with i/o path</p>
<p>o using HD_VIDEOENC_IN struct</p>
<p>l HD_VIDEOENC_PARAM_OUT_ENC_PARAM</p>
<p>o support get/set with i/o path</p>
<p>o using HD_VIDEOENC_OUT struct</p>
<p>l HD_VIDEOENC_PARAM_OUT_VUI</p>
<p>o support get/set with i/o path</p>
<p>o using HD_H26XENC_VUI struct</p>
<p>l HD_VIDEOENC_PARAM_OUT_DEBLOCK</p>
<p>o support get/set with i/o path</p>
<p>o using HD_H26XENC_DEBLOCK struct</p>
<p>l HD_VIDEOENC_PARAM_OUT_RATE_CONTROL</p>
<p>o support get/set with i/o path</p>
<p>o using HD_H26XENC_RATE_CONTROL struct</p>
<p>l HD_VIDEOENC_PARAM_OUT_USR_QP</p>
<p>o support get/set with i/o path</p>
<p>o using HD_H26XENC_USR_QP struct</p>
<p>l HD_VIDEOENC_PARAM_OUT_SLICE_SPLIT</p>
<p>o support get/set with i/o path</p>
<p>o using HD_H26XENC_SLICE_SPLIT struct</p>
<p>l HD_VIDEOENC_PARAM_OUT_ENC_GDR</p>
<p>o support get/set with i/o path</p>
<p>o using HD_H26XENC_GDR struct</p>
<p>l HD_VIDEOENC_PARAM_OUT_ROI</p>
<p>o support get/set with i/o path</p>
<p>o using HD_H26XENC_ROI struct</p>
<p>l HD_VIDEOENC_PARAM_OUT_ROW_RC</p>
<p>o support get/set with i/o path</p>
<p>o using HD_H26XENC_ROW_RC struct</p>
<p>l HD_VIDEOENC_PARAM_OUT_AQ</p>
<p>o support get/set with i/o path</p>
<p>o using HD_H26XENC_AQ struct</p>
<p>l HD_VIDEOENC_PARAM_OUT_REQUEST_IFRAME</p>
<p>o support set with i/o path</p>
<p>o using HD_H26XENC_REQUEST_IFRAME struct</p>
<p>l HD_VIDEOENC_PARAM_OUT_TRIG_SNAPSHOT</p>
<p>o support set with i/o path</p>
<p>o using HD_H26XENC_TRIG_SNAPSHOT struct</p>
<p>l HD_VIDEOENC_PARAM_IN_STAMP_BUF</p>
<p>o support set with i/stamp path</p>
<p>o using HD_OSG_STAMP_BUF struct (stamp buffer parameter)</p>
<p>l HD_VIDEOENC_PARAM_IN_STAMP_IMG</p>
<p>o support set with i/stamp path</p>
<p>o using HD_OSG_STAMP_IMG struct (stamp image parameter)</p>
<p>l HD_VIDEOENC_PARAM_IN_STAMP_ATTR</p>
<p>o support get/set with i/stamp path</p>
<p>o using HD_OSG_STAMP_ATTR struct (stamp display attribute)</p>
<p>l HD_VIDEOENC_PARAM_IN_MASK_ATTR</p>
<p>o support get/set with i/mask path</p>
<p>o using HD_OSG_MASK_ATTR struct (mask display attribute)</p>
<p>l HD_VIDEOENC_PARAM_IN_MOSAIC_ATTR</p>
<p>o support get/set with i/mask path</p>
<p>o using HD_OSG_MOSAIC_ATTR struct (mosaic display attribute)</p>
<p>l HD_VIDEOENC_PARAM_IN_PALETTE_TABLE</p>
<p>o support get/set with i path</p>
<p>o using HD_OSG_PALETTE_TBL struct</p>
<h3 id="21-general-function">2.1 General function<a class="headerlink" href="#21-general-function" title="Permanent link">&para;</a></h3>
<h4 id="211-hd_videoenc_init">2.1.1 hd_videoenc_init<a class="headerlink" href="#211-hd_videoenc_init" title="Permanent link">&para;</a></h4>
<p>[Description]</p>
<p>Initialize the unit</p>
<p>[Syntax]</p>
<p>HD_RESULT hd_videoenc_init(VOID);</p>
<p>[Parameter]</p>
<table>
<thead>
<tr>
<th></th>
<th></th>
</tr>
</thead>
<tbody>
<tr>
<td>Value</td>
<td>Description</td>
</tr>
<tr>
<td>VOID</td>
<td>Not available</td>
</tr>
</tbody>
</table>
<p>[Return Value]</p>
<table>
<thead>
<tr>
<th></th>
<th></th>
</tr>
</thead>
<tbody>
<tr>
<td>Value</td>
<td>Description</td>
</tr>
<tr>
<td>HD_OK</td>
<td>Success</td>
</tr>
<tr>
<td>HD_ERR_NG</td>
<td>Failure</td>
</tr>
</tbody>
</table>
<h4 id="212-hd_videoenc_open">2.1.2 hd_videoenc_open<a class="headerlink" href="#212-hd_videoenc_open" title="Permanent link">&para;</a></h4>
<p>[Description]</p>
<p>Open the unit</p>
<p>[Syntax]</p>
<p>HD_RESULT hd_videoenc_open(HD_IN_ID in_id, HD_OUT_ID out_id, HD_PATH_ID* p_path_id)</p>
<p>[Parameter]</p>
<table>
<thead>
<tr>
<th></th>
<th></th>
</tr>
</thead>
<tbody>
<tr>
<td>Value</td>
<td>Description</td>
</tr>
<tr>
<td>in_id</td>
<td>id of input port</td>
</tr>
<tr>
<td>out_id</td>
<td>id of output port</td>
</tr>
<tr>
<td>p_path_id</td>
<td>pointer of the path id</td>
</tr>
</tbody>
</table>
<p>[Return Value]</p>
<table>
<thead>
<tr>
<th></th>
<th></th>
</tr>
</thead>
<tbody>
<tr>
<td>Value</td>
<td>Description</td>
</tr>
<tr>
<td>HD_OK</td>
<td>Success</td>
</tr>
<tr>
<td>HD_ERR_NG</td>
<td>Failure</td>
</tr>
</tbody>
</table>
<p>[Note]</p>
<p>For OSG:</p>
<ol>
<li>
<p>There are two kinds of OSG : ext and non-ext. ext poses less position limitation but consumes more CPU/DMA. ext is ideal for OSG with small resolution and high position flexibility.</p>
</li>
<li>
<p>Ext modifies input yuv buffer. If an input yuv buffer is feed to multiple streamings and each streaming should have its own OSG, don’t use ext.</p>
</li>
<li>
<p>One buffer mode can’t work with ext. It’s possible videoprocess and ext are updating the same yuv buffer and leads to broken streamings.</p>
</li>
<li>
<p>Compressed yuv can’t work with ext.</p>
</li>
<li>
<p>Currently, OSG on jpeg is implemented as ext. This means performance deterioration and input buffer pollution automatically apply to jpeg.</p>
</li>
<li>
<p>Built-in mask should be regarded as built-in stamp. This means all restrictions imposed to stamp also impose to mask. For example, a macro block can’t render a mask and a stamp in a layer. Opening HD_MASK_X after opening HD_STAMP_X would render HD_STAMP_X invalid unless opening HD_MASK_Y instead.</p>
</li>
<li>
<p>NT9853X has full built-in mask. Above note doesn’t hold for NT9853X. Built-in mask is rendered atop stamp.</p>
</li>
<li>
<p>If encoder rotation is supported and enabled, ext will be rotated.</p>
</li>
<li>
<p>OSG should be opened with HD_MASK_X, HD_MASK_EX_X, HD_STAMP_X and HD_STAMP_EX_X. Don’t use HD_MASK(), HD_MASK_EX(), HD_STAMP() or HD_STAMP_EX().</p>
</li>
<li>
<p>Ext OSG are rendered beneath non-ext OSG.</p>
</li>
</ol>
<h4 id="213-hd_videoenc_get">2.1.3 hd_videoenc_get<a class="headerlink" href="#213-hd_videoenc_get" title="Permanent link">&para;</a></h4>
<p>[Description]</p>
<p>Get parameters from unit by path id</p>
<p>[Syntax]</p>
<p>HD_RESULT hd_videoenc_get(HD_PATH_ID path_id, HD_VIDEOENC_PARAM_ID id, VOID* p_param)</p>
<p>[Parameter]</p>
<table>
<thead>
<tr>
<th></th>
<th></th>
</tr>
</thead>
<tbody>
<tr>
<td>Value</td>
<td>Description</td>
</tr>
<tr>
<td>path_id</td>
<td>the path id</td>
</tr>
<tr>
<td>id</td>
<td>id of parameters</td>
</tr>
<tr>
<td>p_param</td>
<td>pointer of parameters</td>
</tr>
</tbody>
</table>
<p>[Return Value]</p>
<table>
<thead>
<tr>
<th></th>
<th></th>
</tr>
</thead>
<tbody>
<tr>
<td>Value</td>
<td>Description</td>
</tr>
<tr>
<td>HD_OK</td>
<td>Success</td>
</tr>
<tr>
<td>HD_ERR_NG</td>
<td>Failure</td>
</tr>
<tr>
<td>HD_ERR_NOT_SUPPORT</td>
<td>Not support this parameter</td>
</tr>
</tbody>
</table>
<h4 id="214-hd_videoenc_set">2.1.4 hd_videoenc_set<a class="headerlink" href="#214-hd_videoenc_set" title="Permanent link">&para;</a></h4>
<p>[Description]</p>
<p>Set parameters to unit by path id</p>
<p>[Syntax]</p>
<p>HD_RESULT hd_videoenc_set(HD_PATH_ID path_id, HD_VIDEOENC_PARAM_ID id, VOID* p_param)</p>
<p>[Parameter]</p>
<table>
<thead>
<tr>
<th></th>
<th></th>
</tr>
</thead>
<tbody>
<tr>
<td>Value</td>
<td>Description</td>
</tr>
<tr>
<td>path_id</td>
<td>the path id</td>
</tr>
<tr>
<td>id</td>
<td>id of parameters</td>
</tr>
<tr>
<td>p_param</td>
<td>pointer of parameters</td>
</tr>
</tbody>
</table>
<p>[Return Value]</p>
<table>
<thead>
<tr>
<th></th>
<th></th>
</tr>
</thead>
<tbody>
<tr>
<td>Value</td>
<td>Description</td>
</tr>
<tr>
<td>HD_OK</td>
<td>Success</td>
</tr>
<tr>
<td>HD_ERR_NG</td>
<td>Failure</td>
</tr>
<tr>
<td>HD_ERR_NOT_SUPPORT</td>
<td>Not support this parameter</td>
</tr>
</tbody>
</table>
<h4 id="215-hd_videoenc_bind">2.1.5 hd_videoenc_bind<a class="headerlink" href="#215-hd_videoenc_bind" title="Permanent link">&para;</a></h4>
<p>[Description]</p>
<p>Bind this unit with destination unit</p>
<p>[Syntax]</p>
<p>HD_RESULT hd_videoenc_bind(HD_OUT_ID out_id, HD_IN_ID dest_in_id)</p>
<p>[Parameter]</p>
<table>
<thead>
<tr>
<th></th>
<th></th>
</tr>
</thead>
<tbody>
<tr>
<td>Value</td>
<td>Description</td>
</tr>
<tr>
<td>out_id</td>
<td>id of output port.</td>
</tr>
<tr>
<td>dest_in_id</td>
<td>id of input port.</td>
</tr>
</tbody>
</table>
<p>[Return Value]</p>
<table>
<thead>
<tr>
<th></th>
<th></th>
</tr>
</thead>
<tbody>
<tr>
<td>Value</td>
<td>Description</td>
</tr>
<tr>
<td>HD_OK</td>
<td>Success</td>
</tr>
<tr>
<td>HD_ERR_NG</td>
<td>Failure</td>
</tr>
</tbody>
</table>
<h4 id="216-hd_videoenc_start">2.1.6 hd_videoenc_start<a class="headerlink" href="#216-hd_videoenc_start" title="Permanent link">&para;</a></h4>
<p>[Description]</p>
<p>Start the unit</p>
<p>[Syntax]</p>
<p>HD_RESULT hd_videoenc_start(HD_PATH_ID path_id)</p>
<p>[Parameter]</p>
<table>
<thead>
<tr>
<th></th>
<th></th>
</tr>
</thead>
<tbody>
<tr>
<td>Value</td>
<td>Description</td>
</tr>
<tr>
<td>path_id</td>
<td>pointer of the path id</td>
</tr>
</tbody>
</table>
<p>[Return Value]</p>
<table>
<thead>
<tr>
<th></th>
<th></th>
</tr>
</thead>
<tbody>
<tr>
<td>Value</td>
<td>Description</td>
</tr>
<tr>
<td>HD_OK</td>
<td>Success</td>
</tr>
<tr>
<td>HD_ERR_NG</td>
<td>Failure</td>
</tr>
</tbody>
</table>
<h4 id="217-hd_videoenc_stop">2.1.7 hd_videoenc_stop<a class="headerlink" href="#217-hd_videoenc_stop" title="Permanent link">&para;</a></h4>
<p>[Description]</p>
<p>Stop the unit</p>
<p>[Syntax]</p>
<p>HD_RESULT hd_videoenc_stop(HD_PATH_ID path_id)</p>
<p>[Parameter]</p>
<table>
<thead>
<tr>
<th></th>
<th></th>
</tr>
</thead>
<tbody>
<tr>
<td>Value</td>
<td>Description</td>
</tr>
<tr>
<td>path_id</td>
<td>pointer of the path id</td>
</tr>
</tbody>
</table>
<p>[Return Value]</p>
<table>
<thead>
<tr>
<th></th>
<th></th>
</tr>
</thead>
<tbody>
<tr>
<td>Value</td>
<td>Description</td>
</tr>
<tr>
<td>HD_OK</td>
<td>Success</td>
</tr>
<tr>
<td>HD_ERR_NG</td>
<td>Failure</td>
</tr>
</tbody>
</table>
<h4 id="218-hd_videoenc_unbind">2.1.8 hd_videoenc_unbind<a class="headerlink" href="#218-hd_videoenc_unbind" title="Permanent link">&para;</a></h4>
<p>[Description]</p>
<p>Unbind the unit</p>
<p>[Syntax]</p>
<p>HD_RESULT hd_videoenc_unbind(HD_OUT_ID out_id);</p>
<p>[Parameter]</p>
<table>
<thead>
<tr>
<th></th>
<th></th>
</tr>
</thead>
<tbody>
<tr>
<td>Value</td>
<td>Description</td>
</tr>
<tr>
<td>out_id</td>
<td>id of output port.</td>
</tr>
</tbody>
</table>
<p>[Return Value]</p>
<table>
<thead>
<tr>
<th></th>
<th></th>
</tr>
</thead>
<tbody>
<tr>
<td>Value</td>
<td>Description</td>
</tr>
<tr>
<td>HD_OK</td>
<td>Success</td>
</tr>
<tr>
<td>HD_ERR_NG</td>
<td>Failure</td>
</tr>
</tbody>
</table>
<h4 id="219-hd_videoenc_close">2.1.9 hd_videoenc_close<a class="headerlink" href="#219-hd_videoenc_close" title="Permanent link">&para;</a></h4>
<p>[Description]</p>
<p>Close the unit</p>
<p>[Syntax]</p>
<p>HD_RESULT hd_videoenc_close(HD_PATH_ID path_id)</p>
<p>[Parameter]</p>
<table>
<thead>
<tr>
<th></th>
<th></th>
</tr>
</thead>
<tbody>
<tr>
<td>Value</td>
<td>Description</td>
</tr>
<tr>
<td>path_id</td>
<td>pointer of the path id</td>
</tr>
</tbody>
</table>
<p>[Return Value]</p>
<table>
<thead>
<tr>
<th></th>
<th></th>
</tr>
</thead>
<tbody>
<tr>
<td>Value</td>
<td>Description</td>
</tr>
<tr>
<td>HD_OK</td>
<td>Success</td>
</tr>
<tr>
<td>HD_ERR_NG</td>
<td>Failure</td>
</tr>
</tbody>
</table>
<p>[Note]</p>
<p>For OSG:</p>
<ol>
<li>OSGs will keep registered buffer until they are closed. Only after this API returns can application safely access/reclaim the buffer.</li>
</ol>
<h4 id="2110-hd_videoenc_uninit">2.1.10 hd_videoenc_uninit<a class="headerlink" href="#2110-hd_videoenc_uninit" title="Permanent link">&para;</a></h4>
<p>[Description]</p>
<p>Uninitialize the unit</p>
<p>[Syntax]</p>
<p>HD_RESULT hd_videoenc_uninit(VOID);</p>
<p>[Parameter]</p>
<table>
<thead>
<tr>
<th></th>
<th></th>
</tr>
</thead>
<tbody>
<tr>
<td>Value</td>
<td>Description</td>
</tr>
<tr>
<td>VOID</td>
<td>Not available</td>
</tr>
</tbody>
</table>
<p>[Return Value]</p>
<table>
<thead>
<tr>
<th></th>
<th></th>
</tr>
</thead>
<tbody>
<tr>
<td>Value</td>
<td>Description</td>
</tr>
<tr>
<td>HD_OK</td>
<td>Success</td>
</tr>
<tr>
<td>HD_ERR_NG</td>
<td>Failure</td>
</tr>
</tbody>
</table>
<h4 id="2111-hd_videoenc_push_in_buf">2.1.11 hd_videoenc_push_in_buf<a class="headerlink" href="#2111-hd_videoenc_push_in_buf" title="Permanent link">&para;</a></h4>
<p>[Description]</p>
<p>Push the video frame buffer to unit</p>
<p>[Syntax]</p>
<p>HD_RESULT hd_videoenc_push_in_buf(HD_PATH_ID path_id, HD_VIDEO_FRAME<em> p_in_video_frame, HD_VIDEOENC_BS</em> p_user_out_videoenc_bs, INT32 wait_ms);</p>
<p>[Parameter]</p>
<table>
<thead>
<tr>
<th></th>
<th></th>
</tr>
</thead>
<tbody>
<tr>
<td>Value</td>
<td>Description</td>
</tr>
<tr>
<td>path_id</td>
<td>the path id</td>
</tr>
<tr>
<td>p_in_video_frame</td>
<td>pointer of the input video frame buffer</td>
</tr>
<tr>
<td>p_user_out_videoenc_bs</td>
<td>pointer of the output video bitstream buffer</td>
</tr>
<tr>
<td>wait_ms</td>
<td>timeout value in ms</td>
</tr>
</tbody>
</table>
<p>[Return Value]</p>
<table>
<thead>
<tr>
<th></th>
<th></th>
</tr>
</thead>
<tbody>
<tr>
<td>Value</td>
<td>Description</td>
</tr>
<tr>
<td>HD_OK</td>
<td>Success</td>
</tr>
<tr>
<td>HD_ERR_NG</td>
<td>Failure</td>
</tr>
</tbody>
</table>
<p>[Note]</p>
<p>p_user_out_videoenc_bs is optional. If this value is set, videoenc module uses it as the output buffer for bitstream, and the buffer should be released by user after using it; otherwise, if the value is NULL, videoenc will allocate the buffer internally, and user need to call hd_videoenc_release_out_buf API to release the buffer finally.</p>
<p>[Note]</p>
<p>If videoproc is NOT binding to videoenc, that is, SDK user call pull_out YUV from videoproc and push_in to videoenc to encode. Be sure to check YUV weight/height is equal to encoder weight/height.</p>
<p>If videoproc is binding to videoenc, the SDK will automatically check YUV &amp; encoder setting. If the YUV weight/height is not correctly for encoding, SDK will automatically drop YUV.</p>
<p>But if videoproc is NOT binding to videoenc, the SDK will NOT automatically check YUV &amp; encoder setting, SDK user should take responsibility for checking YUV weight/height and encoder setting. This is essential to check YUV &amp; encoder settings while changing resolution, because the two module will NOT change to new setting at the same time. If YUV from videoproc is NOT match videoenc setting, the YUV should be dropped instead of pushing to videoenc.</p>
<h4 id="2112-hd_videoenc_pull_out_buf">2.1.12 hd_videoenc_pull_out_buf<a class="headerlink" href="#2112-hd_videoenc_pull_out_buf" title="Permanent link">&para;</a></h4>
<p>[Description]</p>
<p>Pull the video bitstream buffer from unit</p>
<p>[Syntax]</p>
<p>HD_RESULT hd_videoenc_pull_out_buf (HD_PATH_ID path_id, HD_VIDEOENC_BS* p_videoenc_bs, INT32 wait_ms);</p>
<p>[Parameter]</p>
<table>
<thead>
<tr>
<th></th>
<th></th>
</tr>
</thead>
<tbody>
<tr>
<td>Value</td>
<td>Description</td>
</tr>
<tr>
<td>path_id</td>
<td>the path id</td>
</tr>
<tr>
<td>p_videoenc_bs</td>
<td>pointer of the output video bitstream buffer</td>
</tr>
<tr>
<td>wait_ms</td>
<td>timeout value in ms</td>
</tr>
</tbody>
</table>
<p>[Return Value]</p>
<table>
<thead>
<tr>
<th></th>
<th></th>
</tr>
</thead>
<tbody>
<tr>
<td>Value</td>
<td>Description</td>
</tr>
<tr>
<td>HD_OK</td>
<td>Success</td>
</tr>
<tr>
<td>HD_ERR_NG</td>
<td>Failure</td>
</tr>
</tbody>
</table>
<h4 id="2113-hd_videoenc_release_out_buf">2.1.13 hd_videoenc_release_out_buf<a class="headerlink" href="#2113-hd_videoenc_release_out_buf" title="Permanent link">&para;</a></h4>
<p>[Description]</p>
<p>Release the video bitstream buffer which is get from unit</p>
<p>[Syntax]</p>
<p>HD_RESULT hd_videoenc_release_out_buf (HD_PATH_ID path_id, HD_VIDEOENC_BS* p_videoenc_bs)</p>
<p>[Parameter]</p>
<table>
<thead>
<tr>
<th></th>
<th></th>
</tr>
</thead>
<tbody>
<tr>
<td>Value</td>
<td>Description</td>
</tr>
<tr>
<td>path_id</td>
<td>the path id</td>
</tr>
<tr>
<td>p_videoenc_bs</td>
<td>pointer of the output video bitstream buffer</td>
</tr>
</tbody>
</table>
<p>[Return Value]</p>
<table>
<thead>
<tr>
<th></th>
<th></th>
</tr>
</thead>
<tbody>
<tr>
<td>Value</td>
<td>Description</td>
</tr>
<tr>
<td>HD_OK</td>
<td>Success</td>
</tr>
<tr>
<td>HD_ERR_NG</td>
<td>Failure</td>
</tr>
</tbody>
</table>
<h3 id="22-multi-list-operation">2.2 Multi List Operation<a class="headerlink" href="#22-multi-list-operation" title="Permanent link">&para;</a></h3>
<p>Multi channel operation is used to send multi bitstream simultaneously, it is very efficiency in the multi channels case. The flow is shown as below:</p>
<p><img alt="" src="Novatek%2BHDAL%2BDesign%2BSpecification%2B-%2Bhd_videoenc.files/image007.gif" /></p>
<h4 id="221-hd_videoenc_start_list">2.2.1 hd_videoenc_start_list<a class="headerlink" href="#221-hd_videoenc_start_list" title="Permanent link">&para;</a></h4>
<p>[Description]</p>
<p>Start to send multi bitstream data to the unit</p>
<p>[Syntax]</p>
<p>HD_RESULT hd_videoenc_start_list(HD_PATH_ID *path_id, UINT num);</p>
<p>[Parameter]</p>
<table>
<thead>
<tr>
<th></th>
<th></th>
</tr>
</thead>
<tbody>
<tr>
<td>Value</td>
<td>Description</td>
</tr>
<tr>
<td>path_id</td>
<td>the path id</td>
</tr>
<tr>
<td>num</td>
<td>number of bitstream data</td>
</tr>
</tbody>
</table>
<p>[Return Value]</p>
<table>
<thead>
<tr>
<th></th>
<th></th>
</tr>
</thead>
<tbody>
<tr>
<td>Value</td>
<td>Description</td>
</tr>
<tr>
<td>HD_OK</td>
<td>Success</td>
</tr>
<tr>
<td>HD_ERR_NG</td>
<td>Failure</td>
</tr>
</tbody>
</table>
<p>[Difference]</p>
<table>
<thead>
<tr>
<th></th>
<th></th>
</tr>
</thead>
<tbody>
<tr>
<td>Chip</td>
<td>Description</td>
</tr>
<tr>
<td>NT9668X<br><br>NT9852X<br><br>NT9856X<br><br>NT98530</td>
<td>NOT supported.</td>
</tr>
<tr>
<td>NT9831X<br><br>NT9832X<br><br>NT9833X<br><br>NT98331</td>
<td>All functions are supported.</td>
</tr>
</tbody>
</table>
<h4 id="222-hd_videoenc_stop_list">2.2.2 hd_videoenc_stop_list<a class="headerlink" href="#222-hd_videoenc_stop_list" title="Permanent link">&para;</a></h4>
<p>[Description]</p>
<p>Stop sending multi bitstream data to the unit</p>
<p>[Syntax]</p>
<p>HD_RESULT hd_videoenc_stop_list(HD_PATH_ID *path_id, UINT num);</p>
<p>[Parameter]</p>
<table>
<thead>
<tr>
<th></th>
<th></th>
</tr>
</thead>
<tbody>
<tr>
<td>Value</td>
<td>Description</td>
</tr>
<tr>
<td>path_id</td>
<td>the path id</td>
</tr>
<tr>
<td>num</td>
<td>number of bitstream data</td>
</tr>
</tbody>
</table>
<p>[Return Value]</p>
<table>
<thead>
<tr>
<th></th>
<th></th>
</tr>
</thead>
<tbody>
<tr>
<td>Value</td>
<td>Description</td>
</tr>
<tr>
<td>HD_OK</td>
<td>Success</td>
</tr>
<tr>
<td>HD_ERR_NG</td>
<td>Failure</td>
</tr>
</tbody>
</table>
<p>[Difference]</p>
<table>
<thead>
<tr>
<th></th>
<th></th>
</tr>
</thead>
<tbody>
<tr>
<td>Chip</td>
<td>Description</td>
</tr>
<tr>
<td>NT9668X<br><br>NT9852X<br><br>NT9856X<br><br>NT98530</td>
<td>NOT supported.</td>
</tr>
<tr>
<td>NT9831X<br><br>NT9832X<br><br>NT9833X<br><br>NT98331</td>
<td>All functions are supported.</td>
</tr>
</tbody>
</table>
<h4 id="223-hd_videoenc_poll_list">2.2.3 hd_videoenc_poll_list<a class="headerlink" href="#223-hd_videoenc_poll_list" title="Permanent link">&para;</a></h4>
<p>[Description]????????????????????????????????????</p>
<p>Query the bitstream status of all specifying channels</p>
<p>[Syntax]</p>
<p>HD_RESULT hd_videoenc_poll_list(HD_VIDEOENC_POLL_LIST *p_poll, UINT32 num, INT32 wait_ms);</p>
<p>[Parameter]</p>
<table>
<thead>
<tr>
<th></th>
<th></th>
</tr>
</thead>
<tbody>
<tr>
<td>Value</td>
<td>Description</td>
</tr>
<tr>
<td>p_poll</td>
<td>The path information of multi channels</td>
</tr>
<tr>
<td>num</td>
<td>Number of bitstream paths</td>
</tr>
<tr>
<td>wait_ms</td>
<td>The timeout value in millisecond while polling.<br><br>0: not wait<br><br>&gt;0: wait time (in millisecond)<br><br>&lt;0: wait forever or not supported</td>
</tr>
</tbody>
</table>
<p>[Return Value]</p>
<table>
<thead>
<tr>
<th></th>
<th></th>
</tr>
</thead>
<tbody>
<tr>
<td>Value</td>
<td>Description</td>
</tr>
<tr>
<td>HD_OK</td>
<td>Success</td>
</tr>
<tr>
<td>HD_ERR_NG</td>
<td>Failure</td>
</tr>
</tbody>
</table>
<p>[Difference]</p>
<table>
<thead>
<tr>
<th></th>
<th></th>
</tr>
</thead>
<tbody>
<tr>
<td>Chip</td>
<td>Description</td>
</tr>
<tr>
<td>NT9668X<br><br>NT9852X<br><br>NT9856X<br><br>NT98530</td>
<td>Only revent.event is supported.<br><br>wait_ms &lt; 0: wait forever</td>
</tr>
<tr>
<td>NT9831X<br><br>NT9832X<br><br>NT9833X<br><br>NT98331</td>
<td>All functions are supported.<br><br>wait_ms &lt; 0: not supported</td>
</tr>
</tbody>
</table>
<h4 id="224-hd_videoenc_recv_list">2.2.4 hd_videoenc_recv_list<a class="headerlink" href="#224-hd_videoenc_recv_list" title="Permanent link">&para;</a></h4>
<p>[Description]</p>
<p>Receive bitstream data for all channels</p>
<p>[Syntax]</p>
<p>HD_RESULT hd_videoenc_recv_list(HD_VIDEOENC_RECV_LIST *p_videoenc_list, UINT32 num);</p>
<p>[Parameter]</p>
<table>
<thead>
<tr>
<th></th>
<th></th>
</tr>
</thead>
<tbody>
<tr>
<td>Value</td>
<td>Description</td>
</tr>
<tr>
<td>p_videoenc_list</td>
<td>An array of bitstream structure to be filled for multi channels</td>
</tr>
<tr>
<td>num</td>
<td>The number of channels to retrieve bitstream</td>
</tr>
</tbody>
</table>
<p>[Return Value]</p>
<table>
<thead>
<tr>
<th></th>
<th></th>
</tr>
</thead>
<tbody>
<tr>
<td>Value</td>
<td>Description</td>
</tr>
<tr>
<td>HD_OK</td>
<td>Success</td>
</tr>
<tr>
<td>HD_ERR_NG</td>
<td>Failure</td>
</tr>
</tbody>
</table>
<p>[Difference]</p>
<table>
<thead>
<tr>
<th></th>
<th></th>
</tr>
</thead>
<tbody>
<tr>
<td>Chip</td>
<td>Description</td>
</tr>
<tr>
<td>NT9668X<br><br>NT9852X<br><br>NT9856X<br><br>NT98530</td>
<td>NOT supported.</td>
</tr>
<tr>
<td>NT9831X<br><br>NT9832X<br><br>NT9833X<br><br>NT98331</td>
<td>All functions are supported.</td>
</tr>
</tbody>
</table>
<h3 id="23-data-structure-definition">2.3 Data structure  definition<a class="headerlink" href="#23-data-structure-definition" title="Permanent link">&para;</a></h3>
<h4 id="231-hd_videoenc_param_syscaps">2.3.1 HD_VIDEOENC_PARAM_SYSCAPS<a class="headerlink" href="#231-hd_videoenc_param_syscaps" title="Permanent link">&para;</a></h4>
<p>[Description]</p>
<p>System capability</p>
<p>[Parameter]</p>
<table>
<thead>
<tr>
<th></th>
<th></th>
</tr>
</thead>
<tbody>
<tr>
<td>Value</td>
<td>Description</td>
</tr>
<tr>
<td>dev_id</td>
<td>device id</td>
</tr>
<tr>
<td>chip_id</td>
<td>chip id of this device</td>
</tr>
<tr>
<td>max_in_count</td>
<td>max count of input of this device</td>
</tr>
<tr>
<td>max_out_count</td>
<td>max count of output of this device</td>
</tr>
<tr>
<td>dev_caps</td>
<td>capability of device, using HD_DEVICE_CAPS</td>
</tr>
<tr>
<td>in_caps</td>
<td>capability of input, using HD_VIDEO_CAPS</td>
</tr>
<tr>
<td>out_caps</td>
<td>capability of output, using HD_VIDEOENC_CAPS</td>
</tr>
<tr>
<td>max_in_stamp</td>
<td>max input stamp</td>
</tr>
<tr>
<td>max_in_stamp_ex</td>
<td>max input stamp_ex</td>
</tr>
<tr>
<td>max_in_mask</td>
<td>max input mask</td>
</tr>
<tr>
<td>max_in_mask_ex</td>
<td>max input mask_ex</td>
</tr>
</tbody>
</table>
<p>[Difference]</p>
<table>
<thead>
<tr>
<th></th>
<th></th>
</tr>
</thead>
<tbody>
<tr>
<td>Chip</td>
<td>Description</td>
</tr>
<tr>
<td>NT9668X<br><br>NT9852X<br><br>NT9856X<br><br>NT98530</td>
<td>max_in_count? = 16;<br><br>max_out_count = 16;<br><br>dev_caps =<br><br>??????????????? HD_CAPS_PATHCONFIG;<br><br>in_caps[0~15] =<br><br>??????????????? HD_VIDEO_CAPS_YUV420<br><br>??????????????? | HD_VIDEO_CAPS_YUV422<br><br>??????????????? | HD_VIDEO_CAPS_COMPRESS<br><br>??????????????? | HD_VIDEO_CAPS_DIR_ROTATER<br><br>??????????????? | HD_VIDEO_CAPS_DIR_ROTATEL<br><br>??????????????? | HD_VIDEO_CAPS_STAMP<br><br>??????????????? | HD_VIDEO_CAPS_MASK;<br><br>out_caps[0~15] =<br><br>??????????????? HD_VIDEOENC_CAPS_JPEG<br><br>??????????????? | HD_VIDEOENC_CAPS_H264<br><br>??????????????? | HD_VIDEOENC_CAPS_H265;<br><br>max_in_stamp = 32;<br><br>max_in_stamp_ex = 64;<br><br>max_in_mask = 8;<br><br>max_in_mask_ex = 16;</td>
</tr>
<tr>
<td>NT9831X<br><br>NT9832X<br><br>NT9833X<br><br>NT98331</td>
<td>max_in_count = 64;<br><br>max_out_count = 64;<br><br>dev_caps =<br><br>??????????????? HD_CAPS_PATHCONFIG<br><br>??????????????? | HD_CAPS_LISTFUNC;<br><br>in_caps[0~63] =<br><br>??????????????? HD_VIDEO_CAPS_YUV420<br><br>??????????????? | HD_VIDEO_CAPS_YUV422<br><br>??????????????? | HD_VIDEO_CAPS_DIR_ROTATER<br><br>??????????????? | HD_VIDEO_CAPS_DIR_ROTATE180<br><br>??????????????? | HD_VIDEO_CAPS_DIR_ROTATEL<br><br>??????????????? | HD_VIDEO_CAPS_MASK;<br><br>out_caps[0~63] =<br><br>??????????????? HD_VIDEOENC_CAPS_JPEG<br><br>??????????????? | HD_VIDEOENC_CAPS_H264<br><br>??????????????? | HD_VIDEOENC_CAPS_H265;<br><br>max_in_stamp = 0;<br><br>max_in_stamp_ex = 0;<br><br>max_in_mask = 0;<br><br>max_in_mask_ex = 0;</td>
</tr>
</tbody>
</table>
<h4 id="232-hd_videoenc_param_path_config">2.3.2 HD_VIDEOENC_PARAM_PATH_CONFIG<a class="headerlink" href="#232-hd_videoenc_param_path_config" title="Permanent link">&para;</a></h4>
<p>[Description]</p>
<p>Path configure</p>
<p>[Parameter]</p>
<table>
<thead>
<tr>
<th></th>
<th></th>
</tr>
</thead>
<tbody>
<tr>
<td>Value</td>
<td>Description</td>
</tr>
<tr>
<td>max_mem</td>
<td>maximum memory information. Using HD_VIDEOENC_MAXMEM struct</td>
</tr>
<tr>
<td>isp_id</td>
<td>ISP id. range: 0~7 or 0xffffffff = ignore</td>
</tr>
<tr>
<td>data_pool</td>
<td>pool memory information.<br><br>User can specify the size/count of buffers for encoder’s out-buffer.</td>
</tr>
</tbody>
</table>
<p>[Difference]</p>
<table>
<thead>
<tr>
<th></th>
<th></th>
</tr>
</thead>
<tbody>
<tr>
<td>Chip</td>
<td>Description</td>
</tr>
<tr>
<td>NT9668X<br><br>NT9852X<br><br>NT9856X<br><br>NT98530</td>
<td>data_pool is not supported</td>
</tr>
<tr>
<td>NT9831X<br><br>NT9832X<br><br>NT9833X<br><br>NT98331</td>
<td>max_mem and isp_id are not supported.</td>
</tr>
</tbody>
</table>
<p>[Apply Require]</p>
<p>stop -&gt; close -&gt; open -&gt; set -&gt; start</p>
<h4 id="233-hd_videoenc_param_bufinfo">2.3.3 HD_VIDEOENC_PARAM_BUFINFO<a class="headerlink" href="#233-hd_videoenc_param_bufinfo" title="Permanent link">&para;</a></h4>
<p>[Description]</p>
<p>Buffer information</p>
<p>[Parameter]</p>
<table>
<thead>
<tr>
<th></th>
<th></th>
</tr>
</thead>
<tbody>
<tr>
<td>Value</td>
<td>Description</td>
</tr>
<tr>
<td>buf_info</td>
<td>physical addr/size of bitstream buffer, for user space to mmap</td>
</tr>
</tbody>
</table>
<p>[Difference]</p>
<table>
<thead>
<tr>
<th></th>
<th></th>
</tr>
</thead>
<tbody>
<tr>
<td>Chip</td>
<td>Description</td>
</tr>
<tr>
<td>NT9668X<br><br>NT9852X<br><br>NT9856X<br><br>NT98530</td>
<td>Function is supported.</td>
</tr>
<tr>
<td>NT9831X<br><br>NT9832X<br><br>NT9833X<br><br>NT98331</td>
<td>Function is not supported.</td>
</tr>
</tbody>
</table>
<h4 id="234-hd_videoenc_param_in">2.3.4 HD_VIDEOENC_PARAM_IN<a class="headerlink" href="#234-hd_videoenc_param_in" title="Permanent link">&para;</a></h4>
<p>[Description]</p>
<p>Input parameters</p>
<p>[Parameter]</p>
<table>
<thead>
<tr>
<th></th>
<th></th>
</tr>
</thead>
<tbody>
<tr>
<td>Value</td>
<td>Description</td>
</tr>
<tr>
<td>dim</td>
<td>encode width/height, using HD_DIM struct</td>
</tr>
<tr>
<td>pxl_fmt</td>
<td>source format, using HD_VIDEO_PXLFMT struct</td>
</tr>
<tr>
<td>dir</td>
<td>input direction, using HD_VIDEO_DIR struct</td>
</tr>
<tr>
<td>frc</td>
<td>frame rate control</td>
</tr>
</tbody>
</table>
<p>[Difference]</p>
<table>
<thead>
<tr>
<th></th>
<th></th>
</tr>
</thead>
<tbody>
<tr>
<td>Chip</td>
<td>Description</td>
</tr>
<tr>
<td>NT9668X</td>
<td>the valid pxl_fmt values in H26X with<br><br>HD_VIDEO_PXLFMT_YUV420<br><br>HD_VIDEO_PXLFMT_YUV420_NVX1_H264(for H264 encode)<br><br>HD_VIDEO_PXLFMT_YUV420_NVX1_H265(for H265 encode)<br><br>and JPEG with<br><br>HD_VIDEO_PXLFMT_YUV420<br><br>HD_VIDEO_PXLFMT_YUV422</td>
</tr>
<tr>
<td>NT9852X</td>
<td>the valid pxl_fmt values in H26X with<br><br>HD_VIDEO_PXLFMT_YUV420<br><br>HD_VIDEO_PXLFMT_YUV420_NVX2<br><br>and JPEG with<br><br>HD_VIDEO_PXLFMT_YUV420<br><br>HD_VIDEO_PXLFMT_YUV422</td>
</tr>
<tr>
<td>NT9856X</td>
<td>the valid pxl_fmt values in H26X with<br><br>HD_VIDEO_PXLFMT_YUV420<br><br>HD_VIDEO_PXLFMT_YUV420_NVX2<br><br>and JPEG with<br><br>HD_VIDEO_PXLFMT_YUV420<br><br>HD_VIDEO_PXLFMT_YUV420_NVX2<br><br>HD_VIDEO_PXLFMT_YUV422</td>
</tr>
<tr>
<td>NT98530</td>
<td>the valid pxl_fmt values in H26X with<br><br>HD_VIDEO_PXLFMT_YUV420<br><br>HD_VIDEO_PXLFMT_YUV420_MB4<br><br>HD_VIDEO_PXLFMT_YUV420_NVX2<br><br>HD_VIDEO_PXLFMT_YUV420_NVX5<br><br>and JPEG with<br><br>HD_VIDEO_PXLFMT_YUV420<br><br>HD_VIDEO_PXLFMT_YUV420_NVX2<br><br>HD_VIDEO_PXLFMT_YUV422</td>
</tr>
<tr>
<td>NT9831X<br><br>NT9832X</td>
<td>frc is not supported.<br><br>the valid pxl_fmt values in H26X with<br><br>HD_VIDEO_PXLFMT_YUV420<br><br>HD_VIDEO_PXLFMT_YUV420_NVX3<br><br>And JPEG with<br><br>HD_VIDEO_PXLFMT_YUV420_MB</td>
</tr>
<tr>
<td>NT9833X<br><br>NT98331</td>
<td>the valid pxl_fmt values in H26X and jpeg with<br><br>HD_VIDEO_PXLFMT_YUV420<br><br>HD_VIDEO_PXLFMT_YUV420_NVX3</td>
</tr>
</tbody>
</table>
<p>[Apply Require]</p>
<p>stop -&gt; set -&gt; start</p>
<p>[Note]</p>
<p>If videoproc is binding to videoenc, and HD_VIDEOPROC_OUT is set to default=0 (auto-sync parameters from videoenc), then remember to call start for videoproc</p>
<p>[videoenc] stop -&gt; set -&gt; start</p>
<p>[videoproc] start</p>
<h4 id="235-hd_videoenc_param_in_frc">2.3.5 HD_VIDEOENC_PARAM_IN_FRC<a class="headerlink" href="#235-hd_videoenc_param_in_frc" title="Permanent link">&para;</a></h4>
<p>[Description]</p>
<p>Input parameters</p>
<p>[Parameter]</p>
<table>
<thead>
<tr>
<th></th>
<th></th>
</tr>
</thead>
<tbody>
<tr>
<td>Value</td>
<td>Description</td>
</tr>
<tr>
<td>frc</td>
<td>frame rate control</td>
</tr>
</tbody>
</table>
<p>[Difference]</p>
<table>
<thead>
<tr>
<th></th>
<th></th>
</tr>
</thead>
<tbody>
<tr>
<td>Chip</td>
<td>Description</td>
</tr>
<tr>
<td>NT9668X<br><br>NT9852X<br><br>NT9856X<br><br>NT98530</td>
<td>Function is supported.</td>
</tr>
<tr>
<td>NT9831X<br><br>NT9832X<br><br>NT9833X<br><br>NT98331</td>
<td>Function is not supported.</td>
</tr>
</tbody>
</table>
<p>[Apply Require]</p>
<p>If change between (dst &lt;= src) and (dst &lt;= src)</p>
<p>set -&gt; start</p>
<p>If change between (dst &lt;= src) and (dst &gt; src)? (both direction)</p>
<p>If change between (dst &gt; src) and (dst &gt; src)</p>
<p>stop -&gt; set -&gt; start</p>
<h4 id="236-hd_videoenc_param_out_enc_param">2.3.6 HD_VIDEOENC_PARAM_OUT_ENC_PARAM<a class="headerlink" href="#236-hd_videoenc_param_out_enc_param" title="Permanent link">&para;</a></h4>
<p>[Description]</p>
<p>Input frame</p>
<p>[Parameter]</p>
<table>
<thead>
<tr>
<th></th>
<th></th>
</tr>
</thead>
<tbody>
<tr>
<td>Value</td>
<td>Description</td>
</tr>
<tr>
<td>codec_type</td>
<td>codec type, using HD_VIDEO_CODEC struct</td>
</tr>
<tr>
<td>h26x</td>
<td>H26x config, using HD_H26X_CONFIG struct</td>
</tr>
<tr>
<td>jpeg</td>
<td>Jpeg config, using HD_JPEG_CONFIG struct</td>
</tr>
</tbody>
</table>
<p>[Apply Require]</p>
<p>stop -&gt; set -&gt; start</p>
<h4 id="237-hd_videoenc_param_out_vui">2.3.7 HD_VIDEOENC_PARAM_OUT_VUI<a class="headerlink" href="#237-hd_videoenc_param_out_vui" title="Permanent link">&para;</a></h4>
<p>[Description]</p>
<p>H26x vui settings</p>
<p>[Parameter]</p>
<table>
<thead>
<tr>
<th></th>
<th></th>
</tr>
</thead>
<tbody>
<tr>
<td>Value</td>
<td>Description</td>
</tr>
<tr>
<td>vui_en</td>
<td>enable vui. default: 0, range: 0~1 (0: disable, 1: enable)</td>
</tr>
<tr>
<td>sar_width</td>
<td>Horizontal size of the sample aspect ratio. default: 0, range: 0~65535</td>
</tr>
<tr>
<td>sar_height</td>
<td>Vertical size of the sample aspect rat. default: 0, range: 0~65535</td>
</tr>
<tr>
<td>matrix_coef</td>
<td>Matrix coefficients are used to derive the luma and Chroma signals from green, blue, and red primaries. default: 2, range: 0~255</td>
</tr>
<tr>
<td>transfer_characteristics</td>
<td>The opto-electronic transfers characteristic of the source pictures. default: 2, range: 0~255</td>
</tr>
<tr>
<td>colour_primaries</td>
<td>Chromaticity coordinates the source primaries. default: 2, range: 0~255</td>
</tr>
<tr>
<td>video_format</td>
<td>Indicate the representation of pictures. default: 5, range: 0~7</td>
</tr>
<tr>
<td>color_range</td>
<td>Indicate the black level and range of the luma and Chroma signals. default: 0, range: 0~1 (0: Not full range, 1: Full range)</td>
</tr>
<tr>
<td>timing_present_flag</td>
<td>timing info present flag. default: 0, range: 0~1 (0: disable, 1: enable)</td>
</tr>
</tbody>
</table>
<p>[Apply Require]</p>
<p>stop -&gt; set -&gt; start</p>
<h4 id="238-hd_videoenc_param_out_deblock">2.3.8 HD_VIDEOENC_PARAM_OUT_DEBLOCK<a class="headerlink" href="#238-hd_videoenc_param_out_deblock" title="Permanent link">&para;</a></h4>
<p>[Description]</p>
<p>H26x deblock settings</p>
<p>[Parameter]</p>
<table>
<thead>
<tr>
<th></th>
<th></th>
</tr>
</thead>
<tbody>
<tr>
<td>Value</td>
<td>Description</td>
</tr>
<tr>
<td>dis_ilf_idc</td>
<td>Disable loop filter in slice header. default: 0, range: 0~2 (0: Filter, 1: No Filter, 2: Slice Mode)</td>
</tr>
<tr>
<td>db_alpha</td>
<td>Alpha &amp; C0 offset. default: 0, range: -12~12</td>
</tr>
<tr>
<td>db_beta</td>
<td>Beta offset.?????? default: 0, range: -12~12</td>
</tr>
</tbody>
</table>
<p>[Difference]</p>
<table>
<thead>
<tr>
<th></th>
<th></th>
</tr>
</thead>
<tbody>
<tr>
<td>Chip</td>
<td>Description</td>
</tr>
<tr>
<td>NT9668X</td>
<td>dis_ilf_idc-&gt; across_tile_en is not supported</td>
</tr>
<tr>
<td>NT9852X<br><br>NT9856X<br><br>NT98530<br><br>NT9831X<br><br>NT9832X<br><br>NT9833X<br><br>NT98331</td>
<td>All functions are supported.</td>
</tr>
</tbody>
</table>
<p>[Apply Require]</p>
<p>stop -&gt; set -&gt; start</p>
<h4 id="239-hd_videoenc_param_out_rate_control">2.3.9 HD_VIDEOENC_PARAM_OUT_RATE_CONTROL<a class="headerlink" href="#239-hd_videoenc_param_out_rate_control" title="Permanent link">&para;</a></h4>
<p>[Description]</p>
<p>H26x rate control settings</p>
<p>[Parameter]</p>
<table>
<thead>
<tr>
<th></th>
<th></th>
</tr>
</thead>
<tbody>
<tr>
<td>Value</td>
<td>Description</td>
</tr>
<tr>
<td>rc_mode</td>
<td>rate control mode. default: 1, range: 1~4 (1: CBR, 2: VBR, 3: FixQP, 4: EVBR), using HD_VIDEOENC_RC_MODE struct</td>
</tr>
<tr>
<td>cbr</td>
<td>parameter of rate control mode CBR, using HD_H26XENC_CBR struct</td>
</tr>
<tr>
<td>vbr</td>
<td>parameter of rate control mode VBR, using HD_H26XENC_VBR struct</td>
</tr>
<tr>
<td>fixqp</td>
<td>parameter of rate control mode FixQP, using HD_H26XENC_FIXQP struct</td>
</tr>
<tr>
<td>evbr</td>
<td>parameter of rate control mode EVBR, using HD_H26XENC_EVBR struct</td>
</tr>
</tbody>
</table>
<p>[Apply Require]</p>
<p>set -&gt; start</p>
<h4 id="2310-hd_videoenc_param_out_usr_qp">2.3.10 HD_VIDEOENC_PARAM_OUT_USR_QP<a class="headerlink" href="#2310-hd_videoenc_param_out_usr_qp" title="Permanent link">&para;</a></h4>
<p>[Description]</p>
<p>H26x user qp settings</p>
<p>[Parameter]</p>
<table>
<thead>
<tr>
<th></th>
<th></th>
</tr>
</thead>
<tbody>
<tr>
<td>Value</td>
<td>Description</td>
</tr>
<tr>
<td>Enable</td>
<td>enable user qp. default: 0, range: 0~1 (0: disable, 1: enable)</td>
</tr>
<tr>
<td>qp_map_addr</td>
<td>buffer address of user qp map.<br><br>one byte per cu16<br><br>(bit[0:7] qp value. default: 26, range: 0~51)<br><br>two byte per cu16.<br><br>(bit[0:5] qp value (default: 0; if qp mode is 3 then qp value means fixed qp [range: 0~51], otherwise qp value means delta qp [range: -32~31]))<br><br>(bit[6:7] qp? mode (default: 0; 0: delta qp, 1: reserved, 2: delta qp [disable AQ], 3: fixed qp)</td>
</tr>
</tbody>
</table>
<p>[Difference]</p>
<table>
<thead>
<tr>
<th></th>
<th></th>
</tr>
</thead>
<tbody>
<tr>
<td>Chip</td>
<td>Description</td>
</tr>
<tr>
<td>NT9668X</td>
<td>qp_map_addr is one byte per cu16</td>
</tr>
<tr>
<td>NT9852X<br><br>NT9856X<br><br>NT98530</td>
<td>qp_map_addr is two bytes per cu16</td>
</tr>
<tr>
<td>NT9831X<br><br>NT9832X<br><br>NT9833X<br><br>NT98331</td>
<td>All functions are supported.</td>
</tr>
</tbody>
</table>
<p>[Apply Require]</p>
<p>set -&gt; start</p>
<h4 id="2311-hd_videoenc_param_out_slice_split">2.3.11 HD_VIDEOENC_PARAM_OUT_SLICE_SPLIT<a class="headerlink" href="#2311-hd_videoenc_param_out_slice_split" title="Permanent link">&para;</a></h4>
<p>[Description]</p>
<p>H26x slice split</p>
<p>[Parameter]</p>
<table>
<thead>
<tr>
<th></th>
<th></th>
</tr>
</thead>
<tbody>
<tr>
<td>Value</td>
<td>Description</td>
</tr>
<tr>
<td>enable</td>
<td>enable multiple slice. default: 0, range: 0~1 (0: disable, 1: enable)</td>
</tr>
<tr>
<td>slice_row_num</td>
<td>number of macroblock/ctu rows occupied by a slice, range: 1 ~ number of macroblock/ctu row</td>
</tr>
</tbody>
</table>
<p>[Apply Require]</p>
<p>set -&gt; start</p>
<h4 id="2312-hd_videoenc_param_out_enc_gdr">2.3.12 HD_VIDEOENC_PARAM_OUT_ENC_GDR<a class="headerlink" href="#2312-hd_videoenc_param_out_enc_gdr" title="Permanent link">&para;</a></h4>
<p>[Description]</p>
<p>H26x GDR settins</p>
<p>[Parameter]</p>
<table>
<thead>
<tr>
<th></th>
<th></th>
</tr>
</thead>
<tbody>
<tr>
<td>Value</td>
<td>Description</td>
</tr>
<tr>
<td>enable</td>
<td>enable gdr. default: 0, range: 0~1 (0: disable, 1: enable)</td>
</tr>
<tr>
<td>period</td>
<td>intra refresh period. default: 0, range: 0~0xFFFFFFFF (0: always refresh, others: intra refresh frame period)</td>
</tr>
<tr>
<td>number</td>
<td>intra refresh row number. default: 1, range: 1 ~ number of macroblock/ctu row</td>
</tr>
</tbody>
</table>
<p>[Apply Require]</p>
<p>set -&gt; start</p>
<h4 id="2313-hd_videoenc_param_out_roi">2.3.13 HD_VIDEOENC_PARAM_OUT_ROI<a class="headerlink" href="#2313-hd_videoenc_param_out_roi" title="Permanent link">&para;</a></h4>
<p>[Description]</p>
<p>H26x ROI settings</p>
<p>[Parameter]</p>
<table>
<thead>
<tr>
<th></th>
<th></th>
</tr>
</thead>
<tbody>
<tr>
<td>Value</td>
<td>Description</td>
</tr>
<tr>
<td>roi_qp_mode</td>
<td>roi qp mode for all windows.? available value: HD_VIDEOENC_QPMODE_FIXED_QP(default) / HD_VIDEOENC_QPMODE_DELTA, using HD_VIDEOENC_QPMODE struct</td>
</tr>
<tr>
<td>st_roi</td>
<td>roi window settings. ROIs can be overlaid, and the priority of the ROIs is based on index number, index 0 is highest priority and index 9 is lowest. Using HD_H26XENC_ROI_WIN struct</td>
</tr>
</tbody>
</table>
<p>[Difference]</p>
<table>
<thead>
<tr>
<th></th>
<th></th>
</tr>
</thead>
<tbody>
<tr>
<td>Chip</td>
<td>Description</td>
</tr>
<tr>
<td>NT9668X</td>
<td>st_roi is not supported.</td>
</tr>
<tr>
<td>NT9852X<br><br>NT9856X<br><br>NT98530</td>
<td>All functions are supported.</td>
</tr>
<tr>
<td>NT9831X<br><br>NT9832X<br><br>NT9833X<br><br>NT98331</td>
<td>roi_qp_mode is not supported.</td>
</tr>
</tbody>
</table>
<p>[Apply Require]</p>
<p>set -&gt; start</p>
<h4 id="2314-hd_videoenc_param_out_row_rc">2.3.14 HD_VIDEOENC_PARAM_OUT_ROW_RC<a class="headerlink" href="#2314-hd_videoenc_param_out_row_rc" title="Permanent link">&para;</a></h4>
<p>[Description]</p>
<p>H26x row rc settings</p>
<p>[Parameter]</p>
<table>
<thead>
<tr>
<th></th>
<th></th>
</tr>
</thead>
<tbody>
<tr>
<td>Value</td>
<td>Description</td>
</tr>
<tr>
<td>enable</td>
<td>enable row rc. default: 1, range: 0~1 (0: disable, 1: enable)</td>
</tr>
<tr>
<td>i_qp_range</td>
<td>row-level rata control. default: 2, range: 0~15</td>
</tr>
<tr>
<td>i_qp_step</td>
<td>row-level rata control. default: 1, range: 0~15</td>
</tr>
<tr>
<td>p_qp_range</td>
<td>qp range of P frame for row-level rata control. default: 4, range: 0~15</td>
</tr>
<tr>
<td>p_qp_step</td>
<td>qp step? of P frame for row-level rata control. default: 1, range: 0~15</td>
</tr>
<tr>
<td>min_i_qp</td>
<td>min qp of I frame for row-level rata control. default:? 1, range: 0~51</td>
</tr>
<tr>
<td>max_i_qp</td>
<td>max qp of I frame for row-level rata control. default: 51, range: 0~51</td>
</tr>
<tr>
<td>min_p_qp</td>
<td>min qp of P frame for row-level rata control. default:? 1, range: 0~51</td>
</tr>
<tr>
<td>max_p_qp</td>
<td>max qp of P frame for row-level rata control. default: 51, range: 0~51</td>
</tr>
</tbody>
</table>
<p>[Difference]</p>
<table>
<thead>
<tr>
<th></th>
<th></th>
</tr>
</thead>
<tbody>
<tr>
<td>Chip</td>
<td>Description</td>
</tr>
<tr>
<td>NT9668X<br><br>NT9852X<br><br>NT9856X<br><br>NT98530</td>
<td>i_qp_range: qp range of I&amp;P frame.<br><br>i_qp_step: qp step of I&amp;P frame.<br><br>p_qp_range, p_qp_step, min_i_qp, max_i_qp, min_i_qp and max_i_qp are not supported.</td>
</tr>
<tr>
<td>NT9831X<br><br>NT9832X<br><br>NT9833X<br><br>NT98331</td>
<td>i_qp_range: qp range of I frame.<br><br>i_qp_step: qp step of I frame.</td>
</tr>
</tbody>
</table>
<p>[Apply Require]</p>
<p>set -&gt; start</p>
<h4 id="2315-hd_videoenc_param_out_aq">2.3.15 HD_VIDEOENC_PARAM_OUT_AQ<a class="headerlink" href="#2315-hd_videoenc_param_out_aq" title="Permanent link">&para;</a></h4>
<p>[Description]</p>
<p>H26x aq settings</p>
<p>[Parameter]</p>
<table>
<thead>
<tr>
<th></th>
<th></th>
</tr>
</thead>
<tbody>
<tr>
<td>Value</td>
<td>Description</td>
</tr>
<tr>
<td>enable</td>
<td>AQ enable. default: 0, range: 0~1 (0: disable, 1: enable)</td>
</tr>
<tr>
<td>i_str</td>
<td>aq strength of I frame. default: 3, range: 1~8</td>
</tr>
<tr>
<td>p_str</td>
<td>aq strength of P frame. default: 1, range: 1~8</td>
</tr>
<tr>
<td>max_delta_qp</td>
<td>max delta qp of aq.</td>
</tr>
<tr>
<td>min_delta_qp</td>
<td>min delta qp of aq.</td>
</tr>
<tr>
<td>depth</td>
<td>AQ depth. default: 2, range(H.264): 2, range(H.265): 0~2 (0: cu64, 1: cu32, 2: cu16)</td>
</tr>
<tr>
<td>thd_table</td>
<td>non-linear AQ mapping table. range: -512~511, default: {-120,-112,-104, -96, -88, -80, -72, -64, -56, -48, -40, -32, -24, -16, -8, 7, 15, 23, 31, 39,47, 55, 63, 71, 79, 87, 95, 103, 111, 119}<br><br>for ( dqp = -15; dqp &lt; 15; dqp++ ) if ( Cu.RelativeTextureComplexity(x_str) &lt;= thd_table[dqp+15] ) break; Cu.DeltaQP_AQ = MIN ( MAX (min_delta_qp, dqp), max_delta_qp );</td>
</tr>
</tbody>
</table>
<p>[Difference]</p>
<table>
<thead>
<tr>
<th></th>
<th></th>
</tr>
</thead>
<tbody>
<tr>
<td>Chip</td>
<td>Description</td>
</tr>
<tr>
<td>NT9668X<br><br>NT9852X<br><br>NT9856X<br><br>NT98530</td>
<td>max_delta_qp range 0~8 (default: 6).<br><br>min_delta_qp range -8~0 (default: -6).<br><br>depth and thd_table are not supported.</td>
</tr>
<tr>
<td>NT9831X<br><br>NT9832X<br><br>NT9833X<br><br>NT98331</td>
<td>max_delta_qp range 0~15 (default: 6).<br><br>min_delta_qp range -15~0 (default: -6).</td>
</tr>
</tbody>
</table>
<p>[Apply Require]</p>
<p>set -&gt; start</p>
<h4 id="2316-hd_videoenc_param_out_request_iframe">2.3.16 HD_VIDEOENC_PARAM_OUT_REQUEST_IFRAME<a class="headerlink" href="#2316-hd_videoenc_param_out_request_iframe" title="Permanent link">&para;</a></h4>
<p>[Description]</p>
<p>H26x request I-frame</p>
<p>[Parameter]</p>
<table>
<thead>
<tr>
<th></th>
<th></th>
</tr>
</thead>
<tbody>
<tr>
<td>Value</td>
<td>Description</td>
</tr>
<tr>
<td>enable</td>
<td>request i-frame enable. default: 0, range: 0~1 (0: disable, 1: enable)</td>
</tr>
</tbody>
</table>
<p>[Apply Require]</p>
<p>set -&gt; start</p>
<h4 id="2317-hd_videoenc_param_out_trig_snapshot">2.3.17 HD_VIDEOENC_PARAM_OUT_TRIG_SNAPSHOT<a class="headerlink" href="#2317-hd_videoenc_param_out_trig_snapshot" title="Permanent link">&para;</a></h4>
<p>[Description]</p>
<p>H26x trigger snapshot</p>
<p>[Parameter]</p>
<table>
<thead>
<tr>
<th></th>
<th></th>
</tr>
</thead>
<tbody>
<tr>
<td>Value</td>
<td>Description</td>
</tr>
<tr>
<td>phy_addr</td>
<td>[w]physical address of encoded data (user provide memory space to put JPEG result)</td>
</tr>
<tr>
<td>size</td>
<td>[w]user buffer size provided<br><br>[r]real size of encoded data</td>
</tr>
</tbody>
</table>
<p>[Apply Require]</p>
<p>set</p>
<h4 id="2318-hd_videoenc_param_in_stamp_buf">2.3.18 HD_VIDEOENC_PARAM_IN_STAMP_BUF<a class="headerlink" href="#2318-hd_videoenc_param_in_stamp_buf" title="Permanent link">&para;</a></h4>
<p>[Description]</p>
<p>Stamp buffer settings</p>
<p>[Parameter]</p>
<table>
<thead>
<tr>
<th></th>
<th></th>
</tr>
</thead>
<tbody>
<tr>
<td>Value</td>
<td>Description</td>
</tr>
<tr>
<td>type</td>
<td>ping pong buffer or single buffer, using HD_OSG_BUF_TYPE</td>
</tr>
<tr>
<td>size</td>
<td>buffer&rsquo;s size in byte</td>
</tr>
<tr>
<td>p_addr</td>
<td>buffer&rsquo;s physical address</td>
</tr>
<tr>
<td>ddr_id</td>
<td>p_addr’s ddr id</td>
</tr>
</tbody>
</table>
<p>[Difference]</p>
<table>
<thead>
<tr>
<th></th>
<th></th>
</tr>
</thead>
<tbody>
<tr>
<td>Chip</td>
<td>Description</td>
</tr>
<tr>
<td>NT9668X<br><br>NT9852X<br><br>NT9856X<br><br>NT98530</td>
<td>ddr_id is not supported.</td>
</tr>
<tr>
<td>NT9831X<br><br>NT9832X<br><br>NT9833X<br><br>NT98331</td>
<td>All functions are not supported.</td>
</tr>
</tbody>
</table>
<p>[Apply Require]</p>
<p>stop -&gt; set -&gt; start</p>
<p>[Note]</p>
<p>For NT9668X / NT9852X / NT9856X / NT98530:</p>
<ol start="2">
<li>
<p>Different OSGs can share the same buffer to save memory</p>
</li>
<li>
<p>Double buffer requires “2 * max OSG resolution * sizeof(short)” while single buffer requires only “max OSG resolution* sizeof(short)”. But single buffer suffers from blinking when image is updated.</p>
</li>
<li>
<p>The starting address and length should be (2 x cpu cache line) aligned for ping pong buffer (128 or 64 bytes) and cpu cache line aligned for single buffer(64 or 32 bytes).</p>
</li>
<li>
<p>If stamp will be rendered on mjpg or jpeg, width must be extended to multiple of 4 to calculate buffer size.</p>
</li>
</ol>
<h4 id="2319-hd_videoenc_param_in_stamp_img">2.3.19 HD_VIDEOENC_PARAM_IN_STAMP_IMG<a class="headerlink" href="#2319-hd_videoenc_param_in_stamp_img" title="Permanent link">&para;</a></h4>
<p>[Description]</p>
<p>Stamp image settings</p>
<p>[Parameter]</p>
<table>
<thead>
<tr>
<th></th>
<th></th>
</tr>
</thead>
<tbody>
<tr>
<td>Value</td>
<td>Description</td>
</tr>
<tr>
<td>fmt</td>
<td>RGB565/ARGB1555/ARGB4444/ARGB8888/<br><br>Using HD_VIDEO_PXLFMT struct</td>
</tr>
<tr>
<td>dim</td>
<td>image&rsquo;s width and height, using HD_DIM struct</td>
</tr>
<tr>
<td>p_addr</td>
<td>image&rsquo;s bitmap content</td>
</tr>
<tr>
<td>ddr_id</td>
<td>p_addr’s ddr id</td>
</tr>
</tbody>
</table>
<p>[Difference]</p>
<table>
<thead>
<tr>
<th></th>
<th></th>
</tr>
</thead>
<tbody>
<tr>
<td>Chip</td>
<td>Description</td>
</tr>
<tr>
<td>NT9668X</td>
<td>Palette and ddr_id are not supported.</td>
</tr>
<tr>
<td>NT9852X<br><br>NT9856X<br><br>NT98530</td>
<td>ddr_id Is not supported.</td>
</tr>
<tr>
<td>NT9831X<br><br>NT9832X<br><br>NT9833X<br><br>NT98331</td>
<td>All functions are supported</td>
</tr>
</tbody>
</table>
<p>[Apply Require]</p>
<p>set</p>
<p>[Note]</p>
<p>For NT9668X / NT9852X / NT9856X / NT98530:</p>
<ol>
<li>
<p>Only RGB565/ARGB1555/ARGB4444 are supported</p>
</li>
<li>
<p>Image width is best to be multiple of 4 bytes for best compatibility. For example, image width of an argb1555 is multiple of 2 and image width of a palette2 (a pixels takes 2 bits) is multiple of 16.</p>
</li>
<li>
<p>Image height is best to be multiple of 2 for best compatibility.</p>
</li>
<li>
<p>In addition to the whole image width and height, every color area(e.g. timestamp and border)’s width and height should be multiple of 2.</p>
</li>
<li>
<p>hd_videoenc_get retrieves free buffer(not accessed by hardware) for OSG of ping pong buffer</p>
</li>
</ol>
<p>For NT9831X / NT9832X / NT98331</p>
<p>1. User needs to use external OSG for JPEG codec. Please refer to hd_videoout.doc.</p>
<h4 id="2320-hd_videoenc_param_in_stamp_attr">2.3.20 HD_VIDEOENC_PARAM_IN_STAMP_ATTR<a class="headerlink" href="#2320-hd_videoenc_param_in_stamp_attr" title="Permanent link">&para;</a></h4>
<p>[Description]</p>
<p>Stamp attr settings</p>
<p>[Parameter]</p>
<table>
<thead>
<tr>
<th></th>
<th></th>
</tr>
</thead>
<tbody>
<tr>
<td>Value</td>
<td>Description</td>
</tr>
<tr>
<td>align_type</td>
<td>to which corner is stamp aligned<br><br>Using HD_OSG_ALIGN_TYPE struct</td>
</tr>
<tr>
<td>alpha</td>
<td>(DISP)alpha value</td>
</tr>
<tr>
<td>position</td>
<td>(DISP)stamp&rsquo;s x,y position, using HD_IPOINT struct</td>
</tr>
<tr>
<td>colorkey_en</td>
<td>colorkey used to filter background</td>
</tr>
<tr>
<td>colorkey_val</td>
<td>filtered background color</td>
</tr>
<tr>
<td>qp_en</td>
<td>does stamp have its own qp</td>
</tr>
<tr>
<td>qp_fix</td>
<td>qp_val is fixed or relative to streaming qp</td>
</tr>
<tr>
<td>qp_val</td>
<td>qp value</td>
</tr>
<tr>
<td>layer</td>
<td>set layer attribute for videoenc</td>
</tr>
<tr>
<td>region</td>
<td>set region attribute for videoenc</td>
</tr>
<tr>
<td>gcac_enable</td>
<td>(GCAC)gcac enable</td>
</tr>
<tr>
<td>gcac_blk_width</td>
<td>unit width of GCAC</td>
</tr>
<tr>
<td>gcac_blk_height</td>
<td>unit height of GCAC. Note: OSG dim / (gcac_blk_width* gcac_blk_height) must less than 64</td>
</tr>
</tbody>
</table>
<p>[Difference]</p>
<table>
<thead>
<tr>
<th></th>
<th></th>
</tr>
</thead>
<tbody>
<tr>
<td>Chip</td>
<td>Description</td>
</tr>
<tr>
<td>NT9668X</td>
<td>alpha only for rgb565.<br><br>align_type, gcac_enable, gcac_blk_width and gcac_blk_width are not supported.</td>
</tr>
<tr>
<td>NT9852X<br><br>NT9856X<br><br>NT98530</td>
<td>alpha for argb4444, argb1555, rgb565.<br><br>align_type, gcac_enable, gcac_blk_width and gcac_blk_width are not supported.</td>
</tr>
<tr>
<td>NT9831X<br><br>NT9832X<br><br>NT9833X<br><br>NT98331</td>
<td>colorkey_en, colorkey_val, qp_en, qp_fix, qp_val, layer and region are not supported.</td>
</tr>
</tbody>
</table>
<p>[Apply Require]</p>
<p>set</p>
<p>[Note]</p>
<p>For NT9668X / NT9852X / NT9856X / NT98530:</p>
<ol>
<li>
<p>align_type, gcac_* are not supported</p>
</li>
<li>
<p>For ARGB4444, alpha field is not applicable. For ARGB1555. alpha[3..0] is for pixels of A = 0 and alpha[7..4] is for pixels of A = 1. For best compatibility, set alpha to 0xf0. Other values may lead to missing stamp or opaque background.</p>
</li>
<li>
<p>X y are best to be multiple of 2 for best compatibility. For h264, any 16*16 macro block can have only one OSG. For h265, any 64*64 macro block can have only one OSG.</p>
</li>
<li>
<p>If two OSGs are inside a macro block or even overlapped, they must be in different layer(currently, there are only two layers : 0 and 1. Layer 1 will be rendered above layer 0.)</p>
</li>
<li>
<p>region is a serial number(each layer has 16 regions : 0 ~ 15)</p>
</li>
<li>
<p>qp_* are used to resolve conflicting qp value between streaming and OSG.</p>
</li>
<li>
<p>Ext stamp doesn’t support colorkey_en, colorkey_val, qp_en, qp_fix, qp_val, layer, region, gcac_enable, gcac_blk_width, gcac_blk_height</p>
</li>
<li>
<p>Ext stamp opened with higher HD_STAMP_EX value will override ext stamps with lower value</p>
</li>
</ol>
<p>For NT9831X / NT9832X / NT9833X / NT98331:</p>
<p>1.x/y need to be multiple of 2 for best compatibility.</p>
<p>2. For NT9831X / NT9832X / NT98331, user needs to use external OSG for JPEG codec. Please refer to hd_videoout.doc.</p>
<h4 id="2321-hd_videoenc_param_in_mask_attr">2.3.21 HD_VIDEOENC_PARAM_IN_MASK_ATTR<a class="headerlink" href="#2321-hd_videoenc_param_in_mask_attr" title="Permanent link">&para;</a></h4>
<p>[Description]</p>
<p>Mask attribute settings</p>
<p>[Parameter]</p>
<table>
<thead>
<tr>
<th></th>
<th></th>
</tr>
</thead>
<tbody>
<tr>
<td>Value</td>
<td>Description</td>
</tr>
<tr>
<td>type</td>
<td>mask is solid or hollow. Using HD_OSG_MASK_TYPE</td>
</tr>
<tr>
<td>color</td>
<td>mask color in rgb, mask palette index</td>
</tr>
<tr>
<td>alpha</td>
<td>mask transparency</td>
</tr>
<tr>
<td>position</td>
<td>4 vertices&rsquo; position, using HD_UPOINT struct</td>
</tr>
<tr>
<td>thickness</td>
<td>border width for hollow mask</td>
</tr>
</tbody>
</table>
<p>[Difference]</p>
<table>
<thead>
<tr>
<th></th>
<th></th>
</tr>
</thead>
<tbody>
<tr>
<td>Chip</td>
<td>Description</td>
</tr>
<tr>
<td>NT9668X</td>
<td>only support ext mask.</td>
</tr>
<tr>
<td>NT9852X</td>
<td>support builtin mask and builtin mask should be set through vendor_videoenc_set</td>
</tr>
<tr>
<td>NT9853X</td>
<td>support builtin mask and builtin mask should be set through hd_videoenc_set. Irregular rectangle is supported.</td>
</tr>
<tr>
<td>NT9831X<br><br>NT9832X<br><br>NT9833X<br><br>NT98331</td>
<td>color and thickness are not supported.</td>
</tr>
</tbody>
</table>
<p>[Apply Require]</p>
<p>set</p>
<p>[Note]</p>
<p>For NT9668X / NT9852X / NT9856X / NT98530:</p>
<ol>
<li>
<p>position[0] should be the top left. Others should be in clockwise order.</p>
</li>
<li>
<p>thickness should be multiple of 2</p>
</li>
<li>
<p>Hollow mask takes more time to complete than solid mask. Don’t set over 4 hollow masks in a path.</p>
</li>
<li>
<p>mask opened with higher HD_MASK_EX value will override ext masks with lower value</p>
</li>
<li>
<p>DDR consumption is proportional to ext mask’s area. This is true even for hollow ext masks with thin border.</p>
</li>
</ol>
<p>For NT9831X / NT9832X / NT9833X / NT98331</p>
<p>1. JPEG doesn’t have relative engine, so user needs to use external OSG for JPEG mask. Please refer to hd_videoout.doc.</p>
<h4 id="2322-hd_videoenc_param_in_mosaic_attr">2.3.22 HD_VIDEOENC_PARAM_IN_MOSAIC_ATTR<a class="headerlink" href="#2322-hd_videoenc_param_in_mosaic_attr" title="Permanent link">&para;</a></h4>
<p>[Description]</p>
<p>Mosaic attribute settings</p>
<p>[Parameter]</p>
<table>
<thead>
<tr>
<th></th>
<th></th>
</tr>
</thead>
<tbody>
<tr>
<td>Value</td>
<td>Description</td>
</tr>
<tr>
<td>Type</td>
<td>mask is solid or inversion. Using HD_OSG_MASK_TYPE struct</td>
</tr>
<tr>
<td>Alpha</td>
<td>mask alpha blending. range: 0 ~ 256 (0: foreground, 256: background)</td>
</tr>
<tr>
<td>mosaic_blk_w</td>
<td>witdh of internal block</td>
</tr>
<tr>
<td>mosaic_blk_h</td>
<td>height of internal block</td>
</tr>
<tr>
<td>position</td>
<td>4 vertices&rsquo; position, using HD_UPOINT struct</td>
</tr>
</tbody>
</table>
<p>[Difference]</p>
<table>
<thead>
<tr>
<th></th>
<th></th>
</tr>
</thead>
<tbody>
<tr>
<td>Chip</td>
<td>Description</td>
</tr>
<tr>
<td>NT9853X</td>
<td>type and alpha are not supported.</td>
</tr>
<tr>
<td>NT9831X<br><br>NT9832X<br><br>NT9833X<br><br>NT98331</td>
<td>All functions are supported.</td>
</tr>
</tbody>
</table>
<p>[Apply Require]</p>
<p>set</p>
<p>[Note]</p>
<p>For NT9668X / NT9852X / NT9856X / NT98530:</p>
<ol>
<li>Mosaic is not supported</li>
</ol>
<p>For NT9831X / NT9832X / NT9833X / NT98331</p>
<p>1. JPEG doesn’t have relative engine, so user needs to use external OSG for JPEG mosaic. Please refer to hd_videoout.doc.</p>
<h4 id="2323-hd_videoenc_param_in_palette_table">2.3.23 HD_VIDEOENC_PARAM_IN_PALETTE_TABLE<a class="headerlink" href="#2323-hd_videoenc_param_in_palette_table" title="Permanent link">&para;</a></h4>
<p>[Description]</p>
<p>Palette table settings</p>
<p>[Parameter]</p>
<table>
<thead>
<tr>
<th></th>
<th></th>
</tr>
</thead>
<tbody>
<tr>
<td>Value</td>
<td>Description</td>
</tr>
<tr>
<td>pal_y</td>
<td>palette colors y. range: 0 ~ 255</td>
</tr>
<tr>
<td>pal_cb</td>
<td>palette colors cb. range: 0 ~ 255</td>
</tr>
<tr>
<td>pal_cr</td>
<td>palette colors cr. range: 0 ~ 255</td>
</tr>
</tbody>
</table>
<p>[Difference]</p>
<table>
<thead>
<tr>
<th></th>
<th></th>
</tr>
</thead>
<tbody>
<tr>
<td>Chip</td>
<td>Description</td>
</tr>
<tr>
<td>NT9668X<br><br>NT9852X<br><br>NT9856X<br><br>NT98530</td>
<td>All functions are not supported.</td>
</tr>
<tr>
<td>NT9831X<br><br>NT9832X<br><br>NT9833X<br><br>NT98331</td>
<td>All functions are supported.</td>
</tr>
</tbody>
</table>
<p>[Apply Require]</p>
<p>set</p>
<p>For NT9831X / NT9832X / NT9833X / NT98331</p>
<p>1. JPEG doesn’t have relative engine, so user needs to use external OSG for JPEG palette table. Please refer to hd_videoout.doc.</p>
<h4 id="2324-hd_videoenc_param_func_config">2.3.24 HD_VIDEOENC_PARAM_FUNC_CONFIG<a class="headerlink" href="#2324-hd_videoenc_param_func_config" title="Permanent link">&para;</a></h4>
<p>[Description]</p>
<p>Function configure</p>
<p>[Parameter]</p>
<table>
<thead>
<tr>
<th></th>
<th></th>
</tr>
</thead>
<tbody>
<tr>
<td>Value</td>
<td>Description</td>
</tr>
<tr>
<td>ddr_id</td>
<td>Configure which ddr to work &amp; output bitstream</td>
</tr>
<tr>
<td>in_func</td>
<td>additional function of in (bit-wise mask). enable ONEBUFF/ LOWLATENCY mode.</td>
</tr>
</tbody>
</table>
<p>[Difference]</p>
<table>
<thead>
<tr>
<th></th>
<th></th>
</tr>
</thead>
<tbody>
<tr>
<td>Chip</td>
<td>Description</td>
</tr>
<tr>
<td>NT9668X</td>
<td>ddr_id and in_func  are not supported.</td>
</tr>
<tr>
<td>NT9852X<br><br>NT9856X<br><br>NT98530</td>
<td>All functions are supported.</td>
</tr>
<tr>
<td>NT9831X<br><br>NT9832X<br><br>NT9833X<br><br>NT98331</td>
<td>ddr_id and in_func are not supported.</td>
</tr>
</tbody>
</table>
<h4 id="2325-hd_videoenc_poll_list">2.3.25 HD_VIDEOENC_POLL_LIST<a class="headerlink" href="#2325-hd_videoenc_poll_list" title="Permanent link">&para;</a></h4>
<p>[Description]</p>
<p>The polling item including path information</p>
<p>Use this type to form an array in hd_videoenc_poll_list() to get the results for all paths.</p>
<p>[Parameter]</p>
<table>
<thead>
<tr>
<th></th>
<th></th>
</tr>
</thead>
<tbody>
<tr>
<td>Value</td>
<td>Description</td>
</tr>
<tr>
<td>path_id</td>
<td>path ID</td>
</tr>
<tr>
<td>revent</td>
<td>The returned event value</td>
</tr>
</tbody>
</table>
<p>[Difference]</p>
<table>
<thead>
<tr>
<th></th>
<th></th>
</tr>
</thead>
<tbody>
<tr>
<td>Chip</td>
<td>Description</td>
</tr>
<tr>
<td>NT9668X<br><br>NT9852X<br><br>NT9856X<br><br>NT98530</td>
<td>NOT supported.</td>
</tr>
<tr>
<td>NT9831X<br><br>NT9832X<br><br>NT9833X<br><br>NT98331</td>
<td>Supported.</td>
</tr>
</tbody>
</table>
<h4 id="2326-hd_videoenc_user_bs">2.3.26 HD_VIDEOENC_USER_BS<a class="headerlink" href="#2326-hd_videoenc_user_bs" title="Permanent link">&para;</a></h4>
<p>[Description]</p>
<p>Video bitstream data and relative information</p>
<p>[Parameter]</p>
<table>
<thead>
<tr>
<th></th>
<th></th>
</tr>
</thead>
<tbody>
<tr>
<td>Value</td>
<td>Description</td>
</tr>
<tr>
<td>sign</td>
<td>signature = MAKEFOURCC(&lsquo;V&rsquo;,&rsquo;S&rsquo;,&rsquo;T&rsquo;,&rsquo;M&rsquo;)</td>
</tr>
<tr>
<td>p_next</td>
<td>pointer to next meta</td>
</tr>
<tr>
<td>vcodec_format</td>
<td>Encoded format of video frame</td>
</tr>
<tr>
<td>pack_num</td>
<td>Pack number in video frame</td>
</tr>
<tr>
<td>timestamp</td>
<td>Encode bs timestamp</td>
</tr>
<tr>
<td>frame_type</td>
<td>The frame type</td>
</tr>
<tr>
<td>svc_layer_type</td>
<td>svc layer type</td>
</tr>
<tr>
<td>video_pack</td>
<td>Pack array of encoded data</td>
</tr>
<tr>
<td>psnr_info</td>
<td>The PSNR information</td>
</tr>
<tr>
<td>blk_info</td>
<td>The block partition information</td>
</tr>
<tr>
<td>newbs_flag</td>
<td>Flag notification of new seting</td>
</tr>
<tr>
<td>qp</td>
<td>The qp value</td>
</tr>
<tr>
<td>slice_offset</td>
<td>multi-slice offset 0~VENC_USER_SLICE_MAX</td>
</tr>
<tr>
<td>p_user_buf</td>
<td>Bitstream buffer pointer</td>
</tr>
<tr>
<td>user_buf_size</td>
<td>AP provide bs_buf max size</td>
</tr>
</tbody>
</table>
<p>[Difference]</p>
<table>
<thead>
<tr>
<th></th>
<th></th>
</tr>
</thead>
<tbody>
<tr>
<td>Chip</td>
<td>Description</td>
</tr>
<tr>
<td>NT9668X<br><br>NT9852X<br><br>NT9856X<br><br>NT98530</td>
<td>NOT supported.</td>
</tr>
<tr>
<td>NT9831X<br><br>NT9832X<br><br>NT9833X<br><br>NT98331</td>
<td>Supported.</td>
</tr>
</tbody>
</table>
<h4 id="2327-hd_videoenc_recv_list">2.3.27 HD_VIDEOENC_RECV_LIST<a class="headerlink" href="#2327-hd_videoenc_recv_list" title="Permanent link">&para;</a></h4>
<p>[Description]</p>
<p>The video bitstream item including path information</p>
<p>Use this type to form an array in hd_videoenc_recv_list() to get the video bitstreams for all paths.</p>
<p>[Parameter]</p>
<table>
<thead>
<tr>
<th></th>
<th></th>
</tr>
</thead>
<tbody>
<tr>
<td>Value</td>
<td>Description</td>
</tr>
<tr>
<td>path_id</td>
<td>path ID</td>
</tr>
<tr>
<td>user_bs</td>
<td>video encode user bitstream</td>
</tr>
<tr>
<td>retval</td>
<td>less than 0: recv bistream fail.</td>
</tr>
</tbody>
</table>
<p>[Difference]</p>
<table>
<thead>
<tr>
<th></th>
<th></th>
</tr>
</thead>
<tbody>
<tr>
<td>Chip</td>
<td>Description</td>
</tr>
<tr>
<td>NT9668X<br><br>NT9852X<br><br>NT9856X<br><br>NT98530</td>
<td>NOT supported.</td>
</tr>
<tr>
<td>NT9831X<br><br>NT9832X<br><br>NT9833X<br><br>NT98331</td>
<td>Supported.</td>
</tr>
</tbody>
</table>
<h4 id="2328-hd_h26x_config">2.3.28 HD_H26X_CONFIG<a class="headerlink" href="#2328-hd_h26x_config" title="Permanent link">&para;</a></h4>
<p>[Description]</p>
<p>The basic parameters for H264/H265.</p>
<p>[Parameter]</p>
<table>
<thead>
<tr>
<th></th>
<th></th>
</tr>
</thead>
<tbody>
<tr>
<td>Value</td>
<td>Description</td>
</tr>
<tr>
<td>gop_num</td>
<td>I-frame period</td>
</tr>
<tr>
<td>chrm_qp_idx</td>
<td>chroma qp offset</td>
</tr>
<tr>
<td>sec_chrm_qp_idx</td>
<td>Second chroma QP offset</td>
</tr>
<tr>
<td>ltr_interval</td>
<td>Long-term reference frame interval  <br>0: all long-term reference to IDR frame, 1: reference latest long-term reference frame</td>
</tr>
<tr>
<td>ltr_pre_ref</td>
<td>Long-term reference setting</td>
</tr>
<tr>
<td>gray_en</td>
<td>Encode color to gray</td>
</tr>
<tr>
<td>source_output</td>
<td>Source output</td>
</tr>
<tr>
<td>profile</td>
<td>Profile IDC</td>
</tr>
<tr>
<td>level_idc</td>
<td>Level IDC</td>
</tr>
<tr>
<td>svc_layer</td>
<td>SVC Layer</td>
</tr>
<tr>
<td>entropy_mode</td>
<td>Entropy coding method</td>
</tr>
</tbody>
</table>
<h4 id="2329-hd_jpeg_config">2.3.29 HD_JPEG_CONFIG<a class="headerlink" href="#2329-hd_jpeg_config" title="Permanent link">&para;</a></h4>
<p>[Description]</p>
<p>The basic parameters for JPEG.</p>
<p>[Parameter]</p>
<table>
<thead>
<tr>
<th></th>
<th></th>
</tr>
</thead>
<tbody>
<tr>
<td>Value</td>
<td>Description</td>
</tr>
<tr>
<td>retstart_interval</td>
<td>Specifies the interval between RSTn markers, in Minimum Coded Units (MCUs). This marker is followed by two bytes indicating the fixed size so it can be treated like any other variable size segment.  <br>Restart interval default setting is zero. The user can setting interval value from 0 to image size/256.</td>
</tr>
<tr>
<td>image_quality</td>
<td>Specify the picture quality</td>
</tr>
</tbody>
</table>
<h2 id="3-trouble-shooting">3 Trouble shooting<a class="headerlink" href="#3-trouble-shooting" title="Permanent link">&para;</a></h2>
<p>The hd_videoenc provides a useful feature to debug, it is called debug menu.</p>
<h3 id="31-debug-menu-nt9668x-nt9852x-nt9856x-nt98530">3.1 debug  menu (NT9668X / NT9852X / NT9856X / NT98530)<a class="headerlink" href="#31-debug-menu-nt9668x-nt9852x-nt9856x-nt98530" title="Permanent link">&para;</a></h3>
<p>In application, call hd_debug_run_menu() to open the debug menu.</p>
<p>==============================</p>
<p>?HDAL</p>
<p>------------------------------</p>
<p>?01 : AUDIOCAPTURE</p>
<p>?02 : AUDIOOUT</p>
<p>?03 : AUDIOENC</p>
<p>?04 : AUDIODEC</p>
<p>?05 : VIDEOCAPTURE</p>
<p>?06 : VIDEOOUT</p>
<p>?07 : VIDEOPROCESS</p>
<p>?08 : VIDEOENC</p>
<p>?09 : VIDEODEC</p>
<p>?10 : OSG</p>
<p>?11 : COMMON</p>
<p>?12 : UTIL</p>
<p>?13 : DEBUG</p>
<p>------------------------------</p>
<p>?254 : Quit</p>
<p>?255 : Return</p>
<p>------------------------------</p>
<p>Enter “8” to open VIDEOENC debug menu</p>
<p>==============================</p>
<p>?VIDEOENC</p>
<p>------------------------------</p>
<p>?01 : dump status</p>
<p>?02 : enc info</p>
<p>?03 : rc info ON</p>
<p>?04 : rc info OFF</p>
<p>------------------------------</p>
<p>?254 : Quit</p>
<p>?255 : Return</p>
<p>------------------------------</p>
<p>Note: The items in the menu may vary for each chip.</p>
<h4 id="311-dump-status">3.1.1 dump status<a class="headerlink" href="#311-dump-status" title="Permanent link">&para;</a></h4>
<p>Enter “1” to show the status of videoenc</p>
<p>Run: 01 : dump status</p>
<p>HDAL_VERSION: 00010001:00010001</p>
<p>------------------------- VIDEOENC 0? PATH &amp; BIND ------------------------------</p>
<p>in??? out?? state bind_src????????????? bind_dest</p>
<p>0???? 0???? START VIDEOPROC_0_OUT_0???? (null)</p>
<p>------------------------- VIDEOENC 0? PATH CONFIG ------------------------------</p>
<p>in??? out?? max_w max_h? svc? ltr? rotate? bitrate?? enc_ms</p>
<p>0???? 0???? 1920? 1080??? 2??? 1????? 0??? 2097152?? 3000</p>
<p>------------------------- VIDEOENC 0? IN FRAME ---------------------------------</p>
<p>in??? w???? h???? pxlfmt? frc?? dir</p>
<p>0???? 1920? 1080? YUV420? 1/1?? ....</p>
<p>------------------------- VIDEOENC 0? OUT BS -----------------------------------</p>
<p>--- [H26x] &mdash;</p>
<p>out?? codec? gop? ltr_int? ltr_ref? gray? src_out? profile? level? svc? entropy</p>
<p>0???? H265?? 15?? 0??????? 0??????? 0???? 0??????? MAIN???? 150? ??0??? CABAC</p>
<p>------------------------- VIDEOENC 0? VUI --------------------------------------</p>
<p>out?? vui_en? sar_w? sar_h? mat_c? tran_c? col_prim? vid_fmt? col_rng? time_pre</p>
<p>0???? 0?????? .....? .....? .....? ......? ........? .......? .......? ........</p>
<p>------------------------- VIDEOENC 0? DEBLOCK ----------------------------------</p>
<p>out?? dis_ilf_idc? alpha? beta</p>
<p>0???? 0??????????? 0????? 0</p>
<p>------------------------- VIDEOENC 0? RC ---------------------------------------</p>
<p>out?? mode? bitrate? fr? I(int/min/max)? P(int/min/max)? sta? ip_w</p>
<p>0???? CBR?? 2097152? 30?? ( 26/ 10/ 45)?? ( 26/ 10/ 45)? 4??? 0</p>
<p>------------------------- VIDEOENC 0? USER QP ----------------------------------</p>
<p>out?? en? map_addr</p>
<p>0???? 0?? ........</p>
<p>------------------------- VIDEOENC 0? SLICE SPLIT ------------------------------</p>
<p>out?? en? row_num</p>
<p>0???? 0?? .......</p>
<p>------------------------- VIDEOENC 0? GDR --------------------------------------</p>
<p>out?? en? period? row_num</p>
<p>0???? 0?? ......? .......</p>
<p>------------------------- VIDEOENC 0? ROI --------------------------------------</p>
<p>out?? qp_mode? win? qp? rect(x,y,w,h)</p>
<p>------------------------- VIDEOENC 0? ROW RC -----------------------------------</p>
<p>out?? en? qp_rng? qp_step</p>
<p>0???? 1?? 2?????? 1</p>
<p>------------------------- VIDEOENC 0? AQ ---------------------------------------</p>
<p>out?? en? i_str? p_str? max_delta? min_delta</p>
<p>0???? 0?? .....? .....? .........? .........</p>
<p>------------------------- VIDEOENC 0? IN WORK STATUS --------------------------</p>
<p>in??? PUSH? drop? wrn?? err?? PROC? drop? wrn?? err?? REL</p>
<p>0???? 30?? ??0??? ??0???? 0???? 30??? ?0???? 0???? ?0???? 30</p>
<p>------------------------- VIDEOENC 0? OUT WORK STATUS -------------------------</p>
<p>out?? NEW?? drop? wrn?? err?? PROC? drop? wrn?? err?? PUSH? drop? wrn?? err</p>
<p>0???? ?30??? 0???? ?0???? 0???? 30?? ??0???? 0?? ???0???? 30?? ?0??? ??0???? 0</p>
<p>------------------------- VIDEOENC 0? USER WORK STATUS -------------------------</p>
<p>out?? PULL?? drop? wrn?? err?? REL</p>
<p>0??? ?30???? ?0??? ??0???? 0???? 30</p>
<p>As above, the debug menu shows the path &amp; bind information, path_config , input frame / output bitstream information.</p>
<p>The detail for each count value is as following,</p>
<p>[IN]</p>
<table>
<thead>
<tr>
<th></th>
<th></th>
<th></th>
<th></th>
</tr>
</thead>
<tbody>
<tr>
<td>IN</td>
<td>PUSH</td>
<td>=&gt;</td>
<td>get YUV from previous unit / user push_in</td>
</tr>
<tr>
<td>err</td>
<td>(1) module is NOT start  <br>??? (2) for auto-bind mod, check YUV lineoffset is wrong</td>
<td></td>
<td></td>
</tr>
<tr>
<td>wrn</td>
<td>(1) YUV ping-pong buffer if full  <br>??? (2) bitstream buffer is full, drop this YUV</td>
<td></td>
<td></td>
</tr>
<tr>
<td>drop</td>
<td>(1) module is stop, drop any YUV that is not processed</td>
<td></td>
<td></td>
</tr>
<tr>
<td>PROC</td>
<td>=&gt;</td>
<td>prepare to encode</td>
<td></td>
</tr>
<tr>
<td>err</td>
<td>(1) encode fail</td>
<td></td>
<td></td>
</tr>
<tr>
<td>wrn</td>
<td>(1) N/A</td>
<td></td>
<td></td>
</tr>
<tr>
<td>drop</td>
<td>(1) N/A</td>
<td></td>
<td></td>
</tr>
<tr>
<td>REL</td>
<td>=&gt;</td>
<td>release YUV</td>
<td></td>
</tr>
</tbody>
</table>
<p>[OUT]</p>
<table>
<thead>
<tr>
<th></th>
<th></th>
<th></th>
<th></th>
</tr>
</thead>
<tbody>
<tr>
<td>OUT</td>
<td>NEW</td>
<td>=&gt;</td>
<td>search for bitstream buffer to put encode result</td>
</tr>
<tr>
<td>err</td>
<td>(1) N/A</td>
<td></td>
<td></td>
</tr>
<tr>
<td>wrn</td>
<td>(1) bitstream buffer is full, could not encode this YUV</td>
<td></td>
<td></td>
</tr>
<tr>
<td>drop</td>
<td>(1) N/A</td>
<td></td>
<td></td>
</tr>
<tr>
<td>PROC</td>
<td>=&gt;</td>
<td>prepare to encode</td>
<td></td>
</tr>
<tr>
<td>err</td>
<td>(1) encode fail</td>
<td></td>
<td></td>
</tr>
<tr>
<td>wrn</td>
<td>(1) N/A</td>
<td></td>
<td></td>
</tr>
<tr>
<td>drop</td>
<td>(1) N/A</td>
<td></td>
<td></td>
</tr>
<tr>
<td>PUSH</td>
<td>=&gt;</td>
<td>push encoded bitstream to pull queue (for user pull later)</td>
<td></td>
</tr>
<tr>
<td>err</td>
<td>(1) N/A</td>
<td></td>
<td></td>
</tr>
<tr>
<td>wrn</td>
<td>(1) pull queue is full</td>
<td></td>
<td></td>
</tr>
<tr>
<td>drop</td>
<td>(1) N/A</td>
<td></td>
<td></td>
</tr>
</tbody>
</table>
<p>[USER]</p>
<table>
<thead>
<tr>
<th></th>
<th></th>
<th></th>
<th></th>
</tr>
</thead>
<tbody>
<tr>
<td>USER</td>
<td>PULL</td>
<td>=&gt;</td>
<td>user call hd_videoenc_pull_out_buf() to get bitstream</td>
</tr>
<tr>
<td>err</td>
<td>(1) N/A</td>
<td></td>
<td></td>
</tr>
<tr>
<td>wrn</td>
<td>(1) pull fail due to timeout</td>
<td></td>
<td></td>
</tr>
<tr>
<td>drop</td>
<td>(1) N/A</td>
<td></td>
<td></td>
</tr>
<tr>
<td>REL</td>
<td>=&gt;</td>
<td>user call hd_videoenc_release_out_buf() to release bitstream</td>
<td></td>
</tr>
</tbody>
</table>
<h4 id="312-enc-info">3.1.2 enc info<a class="headerlink" href="#312-enc-info" title="Permanent link">&para;</a></h4>
<p>Enter “2” and then enter which path to show encoder information</p>
<p>Run: 02 : enc info</p>
<p>Please enter which path (0~15)? =&gt;</p>
<p>: 0</p>
<p>[ 2855.827904] [VDOENC][0] Codec = H265, RC Mode = CBR, W = 1920, H = 1080, BitRate = 2097152, Fps = 30, Gop = 15, SVC = 0, IQP = (26, 10, 45), PQP = (26, 10, 45), Static = 4, Weight = 0, RowRc = (1, 2, 1), SmartRoi = 0, LTR = (0, 0), DB = (0, 0, 0), VUI = (0, 1, 1, 2, 2, 2, 5, 0, 0), 3DNR Callback = 0x7ed68f20, AQ = (0, 3, 1, 36, 6, -6, 0), Rotate = 0, GDR = (0, 0, 1), SLICE = (0, 1), QPMap = (0, 80000000), Enc(Drop, In, Out, Re-Enc, Err) = (0, 8444, 8444, 0, 0)</p>
<p>As above, the debug menu shows the encoder settings for certain path.</p>
<h4 id="313-rc-info-on">3.1.3 rc info on<a class="headerlink" href="#313-rc-info-on" title="Permanent link">&para;</a></h4>
<p>Enter “3” and then enter which path to START dump rate control information</p>
<p>Run: 03 : rc info ON</p>
<p>Please enter which path (0~15)? =&gt;</p>
<p>: 0</p>
<p>[ 3034.766550] h265Enc_DumpRcInfo:mode CBR, frame rate 30/1, gop 15, GOP bitrate 1048576, QP (I 10/45, P 10/45), cur qp 23 (23)</p>
<p>[ 3035.795426] dal_h265enc_encodeone:[H265ENC][0]</p>
<p>[ 3035.799832] h265Enc_DumpRcInfo:mode CBR, frame rate 30/1, gop 15, GOP bitrate 1048576, QP (I 10/45, P 10/45), cur qp 24 (24)</p>
<p>[ 3036.828812] dal_h265enc_encodeone:[H265ENC][0]</p>
<p>[ 3036.833193] h265Enc_DumpRcInfo:mode CBR, frame rate 30/1, gop 15, GOP bitrate 1048576, QP (I 10/45, P 10/45), cur qp 26 (26)</p>
<p>[ 3037.862142] dal_h265enc_encodeone:[H265ENC][0]</p>
<p>[ 3037.866552] h265Enc_DumpRcInfo:mode CBR, frame rate 30/1, gop 15, GOP bitrate 1048576, QP (I 10/45, P 10/45), cur qp 24 (24)</p>
<p>As above, the debug menu START dump rate control information.</p>
<h4 id="314-rc-info-off">3.1.4 rc info off<a class="headerlink" href="#314-rc-info-off" title="Permanent link">&para;</a></h4>
<p>Enter “4” and then enter which path to STOP dump rate control information</p>
<p>Run: 04 : rc info OFF</p>
<p>Please enter which path (0~15)? =&gt;</p>
<p>: 0</p>
<p>As above, the debug menu STOP dump rate control information.</p>
<h3 id="32-proc-command-nt9668x-nt9852x-nt9856x-nt98530">3.2 proc command (NT9668X / NT9852X / NT9856X / NT98530)<a class="headerlink" href="#32-proc-command-nt9668x-nt9852x-nt9856x-nt98530" title="Permanent link">&para;</a></h3>
<h4 id="321-dump-status">3.2.1 dump status<a class="headerlink" href="#321-dump-status" title="Permanent link">&para;</a></h4>
<p>[dump info]</p>
<p>Cat /proc/hdal/venc/info</p>
<p>the result is exactly the same as <a href="#_Dump_status">3.1.1 Dump status</a></p>
<p>root@NVTEVM:~$ cat /proc/hdal/venc/info</p>
<p>HDAL_VERSION: 00010001:00010001</p>
<p>------------------------- VIDEOENC 0? PATH &amp; BIND ------------------------------</p>
<p>in??? out?? state bind_src????????????? bind_dest</p>
<p>0???? 0???? START VIDEOPROC_0_OUT_0???? (null)</p>
<p>------------------------- VIDEOENC 0? PATH CONFIG ------------------------------</p>
<p>in??? out?? max_w max_h? svc? ltr? rotate? bitrate?? enc_ms</p>
<p>0???? 0???? 1920? 1080??? 2??? 1????? 0??? 2097152?? 3000</p>
<p>------------------------- VIDEOENC 0? IN FRAME ---------------------------------</p>
<p>in??? w???? h???? pxlfmt? frc?? dir</p>
<p>0???? 1920? 1080? YUV420? 1/1?? ....</p>
<p>------------------------- VIDEOENC 0? OUT BS -----------------------------------</p>
<p>--- [H26x] &mdash;</p>
<p>out?? codec? gop? ltr_int? ltr_ref? gray? src_out? profile? level? svc? entropy</p>
<p>0???? H265?? 15?? 0??????? 0??????? 0???? 0??????? MAIN???? 150??? 0??? CABAC</p>
<p>------------------------- VIDEOENC 0? VUI --------------------------------------</p>
<p>out?? vui_en? sar_w? sar_h? mat_c? tran_c? col_prim? vid_fmt? col_rng? time_pre</p>
<p>0???? 0?????? .....? .....? .....? ......? ........? .......? .......? ........</p>
<p>------------------------- VIDEOENC 0? DEBLOCK ----------------------------------</p>
<p>out?? dis_ilf_idc? alpha? beta</p>
<p>0???? 0??????????? 0????? 0</p>
<p>------------------------- VIDEOENC 0? RC ---------------------------------------</p>
<p>out?? mode? bitrate? fr? I(int/min/max)? P(int/min/max)? sta? ip_w</p>
<p>0???? CBR?? 2097152? 30?? ( 26/ 10/ 45)?? ( 26/ 10/ 45)? 4??? 0</p>
<p>------------------------- VIDEOENC 0? USER QP ----------------------------------</p>
<p>out?? en? map_addr</p>
<p>0???? 0?? ........</p>
<p>------------------------- VIDEOENC 0? SLICE SPLIT ------------------------------</p>
<p>out?? en? row_num</p>
<p>0???? 0?? .......</p>
<p>------------------------- VIDEOENC 0? GDR --------------------------------------</p>
<p>out?? en? period? row_num</p>
<p>0???? 0?? ......? .......</p>
<p>------------------------- VIDEOENC 0? ROI --------------------------------------</p>
<p>out?? qp_mode? win? qp? rect(x,y,w,h)</p>
<p>------------------------- VIDEOENC 0? ROW RC -----------------------------------</p>
<p>out?? en? qp_rng? qp_step</p>
<p>0???? 1?? 2?????? 1</p>
<p>------------------------- VIDEOENC 0? AQ ---------------------------------------</p>
<p>out?? en? i_str? p_str? max_delta? min_delta</p>
<p>0???? 0?? .....? .....? .........? .........</p>
<p>------------------------- VIDEOENC 0? IN WORK STATUS --------------------------</p>
<p>in??? PUSH? drop? wrn?? err?? PROC? drop? wrn?? err?? REL</p>
<p>0???? 30??? ?0???? 0??? ??0???? 30??? ?0???? 0??? ??0???? 30</p>
<p>------------------------- VIDEOENC 0? OUT WORK STATUS -------------------------</p>
<p>out?? NEW ??drop? wrn?? err?? PROC? drop? wrn?? err?? PUSH? drop? wrn?? err</p>
<p>0???? ?30??? 0???? ?0???? 0???? 30?? ??0???? 0?? ???0???? 30?? ?0??? ??0???? 0</p>
<p>------------------------- VIDEOENC 0? USER WORK STATUS -------------------------</p>
<p>out?? PULL?? drop? wrn?? err? ?REL</p>
<p>0???? 30?? ???0??? ??0???? 0???? 30</p>
<h4 id="322-debug-command">3.2.2 debug command<a class="headerlink" href="#322-debug-command" title="Permanent link">&para;</a></h4>
<p>[debug port]</p>
<p>echo debug [dev] [i/o] [mask] &gt; /proc/hdal/venc/cmd</p>
<p>where [dev] = d0 , [i/o] = i0, i1, i2, &hellip;, o0, o1, o2, &hellip; , [mask] = show info mask</p>
<p>[ Sample ]</p>
<p>echo debug d0 o0 mfff &gt; /proc/hdal/venc/cmd</p>
<p>this debug command can show more debug log on console</p>
<p>root@NVTEVM:/mnt/sd$ hd_video_record</p>
<p>[ 4376.440341] hd_reset - begin</p>
<p>[ 4376.445192] hd_reset - end</p>
<p>HDAL_VERSION: 00010001:00010001</p>
<p>[ 4376.467841]</p>
<p>[ 4376.467841]? &ldquo;vdoenc&rdquo;.out[0]: open begin, state=0</p>
<p>[ 4376.475047]? &ldquo;vdoenc&rdquo;.out[0]: cmd OPEN</p>
<p>[ 4376.479852] _ISF_VdoEnc_ImgCap_Open:bIs_NMI_ImgCap_ON = 0</p>
<p>[ 4376.485364]? &ldquo;vdoenc&rdquo;.out[0]: open end, state=1</p>
<p>[ 4376.490942] ?&rdquo;vdoenc&rdquo;.out[0]: set param(0000f000)=2</p>
<p>[ 4376.496720] ?&rdquo;vdoenc&rdquo;.out[0]: set param(0000f005)=3000</p>
<p>[ 4376.502745]? &ldquo;vdoenc&rdquo;.out[0]: set param(0000f039)=0</p>
<p>[ 4376.508512] ?&rdquo;vdoenc&rdquo;.out[0]: set param(0000f004)=2</p>
<p>[ 4376.514284] [VDOENC][0] Set max alloc size, codec = 2, w = 1920, h = 1080, byterate = 262144, recformat = 7, rotate = 0, svc = 2, ltr = 1, snapshot size = 0, codec size = 9581988, enc buf size = 786432</p>
<p>[ 4376.532280]? &ldquo;vdoenc&rdquo;.out[0]: set vdo-size(1920,1080) vdo-format(520C0420) vdo-dir(0)</p>
<p>[ 4376.540977]? &ldquo;vdoenc&rdquo;.out[0]: set vdo-framerate(1,1)</p>
<p>enc_type=0</p>
<p>[ 4377.711187]? &ldquo;vdoenc&rdquo;.out[0]: set param(0000f015)=0</p>
<p>[ 4377.717186]? &ldquo;vdoenc&rdquo;.out[0]: set param(0000f018)=1</p>
<p>[ 4377.722982]? &ldquo;vdoenc&rdquo;.out[0]: set param(0000f01c)=0</p>
<p>[ 4377.728742]? &ldquo;vdoenc&rdquo;.out[0]: set param(0000f023)=0</p>
<p>[ 4377.734515]? &ldquo;vdoenc&rdquo;.out[0]: set param(0000f03d)=0</p>
<p>[ 4377.740272]? &ldquo;vdoenc&rdquo;.out[0]: set param(0000f03e)=0</p>
<p>[ 4377.748686]? &ldquo;vdoenc&rdquo;.out[0]: set param(0000f03f)=0</p>
<p>[ 4377.754662]? &ldquo;vdoenc&rdquo;.out[0]: set param(0000f040)=0</p>
<p>[ 4377.760429]? &ldquo;vdoenc&rdquo;.out[0]: set param(0000f041)=0</p>
<p>[ 4377.767241]? &ldquo;vdoenc&rdquo;.out[0]: set param(0000f000)=3</p>
<p>[ 4377.773002]? &ldquo;vdoenc&rdquo;.out[0]: set param(0000f001)=1</p>
<p>[ 4377.779520] ?&rdquo;vdoenc&rdquo;.out[0]: set param(0000f005)=3000</p>
<p>[ 4377.785535]? &ldquo;vdoenc&rdquo;.out[0]: set param(0000f008)=0</p>
<p>[ 4377.791287] ?&rdquo;vdoenc&rdquo;.out[0]: set param(0000f009)=15</p>
<p>[ 4377.797124]? &ldquo;vdoenc&rdquo;.out[0]: set param(0000f00a)=7</p>
<p>[ 4377.802874]? &ldquo;vdoenc&rdquo;.out[0]: set param(0000f014)=0</p>
<p>[ 4377.808624] ?&rdquo;vdoenc&rdquo;.out[0]: set param(0000f030)=0</p>
<p>[ 4377.815039]? &ldquo;vdoenc&rdquo;.out[0]: set param(0000f035)=0</p>
<p>[ 4377.820793] ?&rdquo;vdoenc&rdquo;.out[0]: set param(0000f03a)=150</p>
<p>[ 4377.826717]? &ldquo;vdoenc&rdquo;.out[0]: set param(0000f03b)=1</p>
<p>[ 4377.832467]? &ldquo;vdoenc&rdquo;.out[0]: set param(0000f03c)=0</p>
<p>[ 4377.839343]</p>
<p>[ 4377.839343]? &ldquo;vdoenc&rdquo;.out[0]: start begin, state=1</p>
<p>[ 4377.846625]? &ldquo;vdoenc&rdquo;.out[0]: cmd RDYSYNC</p>
<p>[ 4377.851524] ?&rdquo;vdoenc&rdquo;.out[0]: cmd START</p>
<p>[ 4377.856325] [VDOENC][0] Action = 0, Codec = 3, Mode = 7, Size = (1920, 1080), Fr = 30, Trig = 1, Alloc size = (0, 3239692, 786432), Enc Buf = (3000 ms, 0 ms, 0x95575f0c, 0x95635f08, 0x95635f08, 786428), Min Size(I, P) = (393216, 262144)</p>
<p>[ 4377.877363] dal_h265enc_init:[H265ENC][0] Init Codec = (0x9525f000, 3239692), W = 1920, H = 1080, Prof = 1, Br = 2097152, Fps = 30, Gop = 15, SVC = 0, IQP = (26, 10, 45), PQP = (26, 10, 45), Sta = 4, Wei = 0, RowRc = (1, 2, 1), LTR = (0, 0), MultiT = 0, Rot = 0, FastSr = 0, ColorR = 0, Mode = 0, SEI = 0</p>
<p>[ 4377.904386] h26x_open:H26X Version = 0x20161211</p>
<p>[ 4377.909023] _h265enc_setratecontrol:[H265ENC][0] Set CBR</p>
<p>[ 4377.914457]? &ldquo;vdoenc&rdquo;.out[0]: start end, state=2</p>
<p>[ 4377.920980]? &ldquo;vdoenc&rdquo;.out[0]: get param(0000f037)=329641984</p>
<p>[ 4377.927623]? &ldquo;vdoenc&rdquo;.out[0]: get param(0000f038)=10384808</p>
<p>Enter q to exit</p>
<p>[ 4377.936965] dal_h265enc_encodeone:[H265ENC][0] Reset I OK, idx = 0, Frame Type = 3, Frame = (0x95575f0c, 258106), Buf = (0x95575f0c, 0x95635f08), t = 103465566 us</p>
<p>dump main bitstream to file (/mnt/sd/dump_bs_main.dat) ....</p>
<p>if you want to stop, enter &ldquo;q&rdquo; to exit !!</p>
<h4 id="323-trace-command">3.2.3 trace command<a class="headerlink" href="#323-trace-command" title="Permanent link">&para;</a></h4>
<p>[trace port]</p>
<p>echo trace [dev] [i/o] [mask] &gt; /proc/hdal/venc/cmd</p>
<p>where [dev] = d0 , [i/o] = i0, i1, i2, &hellip;, o0, o1, o2, &hellip; , [mask] = show info mask</p>
<p>[ Sample ]</p>
<p>echo trace d0 o0 mfff &gt; /proc/hdal/venc/cmd</p>
<p>this trace command could enable module internal debug message to know what’s going on for the VIDEOENC module.</p>
<h4 id="324-probe-command">3.2.4 probe command<a class="headerlink" href="#324-probe-command" title="Permanent link">&para;</a></h4>
<p>[probe port]</p>
<p>echo probe [dev] [i/o] [mask] &gt; /proc/hdal/venc/cmd</p>
<p>where [dev] = d0 , [i/o] = i0, i1, i2, &hellip;, o0, o1, o2, &hellip; , [mask] = show info mask</p>
<p>[ Sample ]</p>
<p>echo probe d0 o0 mffff &gt; /proc/hdal/venc/cmd</p>
<p>this probe command could print per-data status</p>
<p>[ 5692.621611] &ldquo;vdoenc&rdquo;.out[0] - NEW - new &ndash; h=9558697c size=00000000 addr=9558697c OK</p>
<p>[ 5692.631780] &ldquo;vdoenc&rdquo;.out[0] - PUSH - rel &ndash; h=9558697c (result=0) OK</p>
<p>[ 5692.652093] &ldquo;vdoenc&rdquo;.out[0] - NEW - new &ndash; h=9558779c size=00000000 addr=9558779c OK</p>
<p>[ 5692.662281] &ldquo;vdoenc&rdquo;.out[0] - PUSH - rel &ndash; h=9558779c (result=0) OK</p>
<p>[ 5692.682488] &ldquo;vdoenc&rdquo;.out[0] - NEW - new &ndash; h=95588474 size=00000000 addr=95588474 OK</p>
<p>[ 5692.691369] &ldquo;vdoenc&rdquo;.out[0] - PUSH - rel &ndash; h=95588474 (result=0) OK</p>
<p>[ 5692.718160] &ldquo;vdoenc&rdquo;.out[0] - NEW - new &ndash; h=95589084 size=00000000 addr=95589084 OK</p>
<p>[ 5692.729104] &ldquo;vdoenc&rdquo;.out[0] - PUSH - rel &ndash; h=95589084 (result=0) OK</p>
<p>[ 5692.749191] &ldquo;vdoenc&rdquo;.out[0] - NEW - new &ndash; h=95589e88 size=00000000 addr=95589e88 OK</p>
<p>[ 5692.758027] &ldquo;vdoenc&rdquo;.out[0] - PUSH - rel &ndash; h=95589e88 (result=0) OK</p>
<p>[ 5692.785621] &ldquo;vdoenc&rdquo;.out[0] - NEW - new &ndash; h=9558a9f0 size=00000000 addr=9558a9f0 OK</p>
<p>[ 5692.796616] &ldquo;vdoenc&rdquo;.out[0] - PUSH - rel &ndash; h=9558a9f0 (result=0) OK</p>
<h4 id="325-perf-command">3.2.5 perf command<a class="headerlink" href="#325-perf-command" title="Permanent link">&para;</a></h4>
<p>[perf port]</p>
<p>echo perf [dev] [i/o] &gt; /proc/hdal/venc/cmd</p>
<p>[ Sample ]</p>
<p>echo perf d0 i0 &gt; /proc/hdal/venc/cmd</p>
<p>this perf command could print data count per second</p>
<p>[?? 37.463860] &ldquo;vdoenc&rdquo;.in[0] Perf! &ndash; (Video) 30 Frame/sec</p>
<p>[?? 38.495429] &ldquo;vdoenc&rdquo;.in[0] Perf! &ndash; (Video) 30 Frame/sec</p>
<p>[?? 39.495233] &ldquo;vdoenc&rdquo;.in[0] Perf! &ndash; (Video) 30 Frame/sec</p>
<h4 id="326-save-command">3.2.6 save command<a class="headerlink" href="#326-save-command" title="Permanent link">&para;</a></h4>
<p>[save port]</p>
<p>echo save [dev] [i/o] [count] &gt; /proc/hdal/venc/cmd</p>
<p>where [count] means how many i/o datas to save</p>
<p>[ Sample ]</p>
<p>echo perf d0 i0 1 &gt; /proc/hdal/venc/cmd</p>
<p>this save command could save i/o data to SDCard for debug purpose.</p>
<p>[? 140.135994] save i/o begin: &ldquo;vdoenc&rdquo;.in[0] count=1</p>
<p>[? 140.153779] &ldquo;vdoenc&rdquo;.in[0] Save &ndash; h=94f5bfc0 t=00000000099334e3 (YUV: 1920x1080.520c0420 94f5c000 95156400 1920 1920)</p>
<p>[? 141.330243] &ldquo;vdoenc&rdquo;.in[0] Save &ndash; //mnt//sd//isf_? vdoenc_in[0]_520c0420_1920_1080_1920_c208.vdo ok</p>
<p>[? 141.340271] save port end</p>
<h3 id="33-osg-proc-command">3.3 OSG proc command<a class="headerlink" href="#33-osg-proc-command" title="Permanent link">&para;</a></h3>
<h4 id="331-dump-status">3.3.1 dump status<a class="headerlink" href="#331-dump-status" title="Permanent link">&para;</a></h4>
<p>cat /proc/hdal/osg/info to show the status of OSG and focus on VIDEOENC</p>
<p>------------------------- VIDEOENC 0 BUFFER ------------------------------------</p>
<p>pid???? type??? fmt???? w?????? h?????? addr??? ????size??????? draw</p>
<p>0?????? pp????? 4444??? 1000??? 200???? 13a55000??? 400000????? 1</p>
<p>0?????? pp????????????? ?0?????? ?0?????? 13ab6a80??? 400000????? 0</p>
<p>------------------------- VIDEOENC 0 STAMP -------------------------------------</p>
<p>pid???? start?? x? ?????y?????? alpha?? cken??? ckval?? layer?? rgn</p>
<p>0?????? 1?????? ?0?????? 0?????? 255???? ?0?????? ?0?????? 0?????? ?0</p>
<p>------------------------- VIDEOENC 0 MASK --------------------------------------</p>
<p>pid???? start?? x?????? y?????? w?????? h?????? solid?? thick?? color?????????? alpha</p>
<p>0?????? 1?????? ?500???? 0?????? 100???? 120???? 1?????? 0?????? ff0000????????? 255</p>
<p>As above, the debug menu shows buffer, stamp and mask configuration of all videoenc’s OSGs. Most values are simply from hd_videoenc_set and self-explained. pid serves as an internal serial number and is mainly used to associate stamp and buffer information. start reflects if hd_videoenc_start/hd_videoenc_stop had been applied to that OSG.</p>
<h4 id="332-change-status">3.3.2 change status<a class="headerlink" href="#332-change-status" title="Permanent link">&para;</a></h4>
<p>OSG attr can be changed through debug menu while buffer and image can’t because buffer and image typically require a buffer which can’t be created by shell console. To change an OSG’s attr, echo <em>data</em> > /proc/hdal/osg/cmd. Below are the format of <em>data</em>:</p>
<ol>
<li>
<p>For stamp: phase osg pid io start x y alpha cken ckval layer region<br />
example: to set the 5th stamp of output id 3 of videoenc to position[1024,512] and layer(1) region(8), run “echo videoenc stamp 5 3 1 1024 512 255 0 0 1 8”</p>
</li>
<li>
<p>For mask : phase osg pid io start x y w h solid thick color alpha<br />
example: to set the 5th green mask of output id 3 of videoenc to position[1024,512] and size 256x128, run “echo videoenc mask 5 3 1 1024 512 256 128 1 0 0x0FF00 255”</p>
</li>
</ol>
<h3 id="34-debug-menu-nt9831x-nt9832x-nt9833x-nt98331">3.4 Debug menu (NT9831X / NT9832X / NT9833X / NT98331)<a class="headerlink" href="#34-debug-menu-nt9831x-nt9832x-nt9833x-nt98331" title="Permanent link">&para;</a></h3>
<h4 id="341-dump-status">3.4.1 dump status<a class="headerlink" href="#341-dump-status" title="Permanent link">&para;</a></h4>
<p>In application, call hd_debug_run_menu() to open the debug menu.</p>
<p>Run: 01 : dump status</p>
<p>------------------------- VIDEOENC 0? PATH &amp; BIND -----------------------------</p>
<p>in????? out???? state?? bind_src??????????????? bind_dest</p>
<p>0?????? 0?????? START?? VIDEOCAP_0_OUT_1??????? -</p>
<p>0?????? 1?????? START?? VIDEOCAP_1_OUT_1??????? -</p>
<p>0?????? 2?????? START?? VIDEOCAP_2_OUT_1??????? -</p>
<p>0?????? 3?????? START?? VIDEOCAP_3_OUT_1??????? -</p>
<p>0?????? 4?????? START?? VIDEOCAP_0_OUT_2??????? -</p>
<p>0?????? 5?????? START?? VIDEOCAP_1_OUT_2??????? -</p>
<p>0?????? 6?????? START?? VIDEOCAP_2_OUT_2??????? -</p>
<p>0?????? 7?????? START?? VIDEOCAP_3_OUT_2??????? -</p>
<p>------------------------- VIDEOENC 0? IN FRAME -----------------------------</p>
<p>in????? w?????? h?????? pxlfmt</p>
<p>0?????? 1920??? 1080??? YUV420</p>
<p>1?????? 1920??? 1080??? YUV420</p>
<p>2?????? 1920??? 1080??? YUV420</p>
<p>3?????? 1920??? 1080??? YUV420</p>
<p>4?????? 960???? 480???? YUV420_NVX3</p>
<p>5?????? 960???? 480???? YUV420_NVX3</p>
<p>6?????? 960???? 480???? YUV420_NVX3</p>
<p>7?????? 960???? 480???? YUV420_NVX3</p>
<p>------------------------- VIDEOENC 0? OUT FRAME -----------------------------</p>
<p>in????? codec?? gop???? profile svc???? level?? entropy</p>
<p>0?????? -?????? -?????? 0001??? -??????? -</p>
<p>1?????? -?????? -?????? 0001??? -??????? -</p>
<p>2?????? -?????? -?????? 0001??? -??????? -</p>
<p>3?????? -?????? -?????? 0001??? -??????? -</p>
<p>4?????? - ??????-?????? 0001??? -??????? -</p>
<p>5?????? -?????? -?????? 0001??? -??????? -</p>
<p>6?????? -?????? -?????? 0001??? -??????? -</p>
<p>7?????? -?????? -?????? 0001??? -??????? -</p>
<p>------------------------- VIDEOENC 0? RC -----------------------------</p>
<p>in????? mode??? base?? ?incr??? bitrate</p>
<p>0?????? CBR???? 0025??? 0001??? 4096Kbps</p>
<p>1?????? CBR???? 0025??? 0001??? 4096Kbps</p>
<p>2?????? CBR???? 0025??? 0001??? 4096Kbps</p>
<p>3?????? CBR???? 0025??? 0001??? 4096Kbps</p>
<p>4?????? CBR???? 0025??? 0001??? 1024Kbps</p>
<p>5?????? CBR???? 0025??? 0001??? 1024Kbps</p>
<p>6?????? CBR???? 0025??? 0001??? 1024Kbps</p>
<p>7?????? CBR???? 0025??? 0001??? 1024Kbps</p>
<h3 id="35-proc-command-nt9831x-nt9832x-nt9833x">3.5 proc command (NT9831X / NT9832X / NT9833X)<a class="headerlink" href="#35-proc-command-nt9831x-nt9832x-nt9833x" title="Permanent link">&para;</a></h3>
<h4 id="351-dump-status">3.5.1 dump status<a class="headerlink" href="#351-dump-status" title="Permanent link">&para;</a></h4>
<p>[dump info]</p>
<p>Cat /proc/videograph/hdal_setting</p>
<p>the result is similar to <a href="#_Dump_status">3.1.1 Dump status</a></p>
<p>root@NVTEVM:/$ cat /proc/videograph/hdal_setting</p>
<p>========================== VIDEOCAP 0? SYSCAP ==========================</p>
<p>w?????? h?????? fps???? scaling</p>
<p>1920??? 1080??? 25????? 4088</p>
<p>------------------------- VIDEOCAP 0? PATH &amp; BIND -----------------------------</p>
<p>in????? out???? state?? bind_src??????????????? bind_dest</p>
<p>0?????? 0?????? START?? -?????????????????????? VIDEOENC_0_IN_0</p>
<p>------------------------- VIDEOCAP 0? OUT FRAME -----------------------------</p>
<p>out???? w?????? h?????? pxlfmt</p>
<p>0???? ??1920??? 1080??? YUV420_NVX3</p>
<p>------------------------- VIDEOCAP 0? PATH POOL -----------------------------</p>
<p>out???? pool??? ddr_id? count?? max_count</p>
<p>0?????? 0?????? 0?????? 4.0???? 4.0</p>
<p>------------------------- VIDEOENC 0? PATH &amp; BIND -----------------------------</p>
<p>in????? out???? state?? bind_src??????????????? bind_dest</p>
<p>0?????? 0?????? START?? VIDEOCAP_0_OUT_0??????? -</p>
<p>------------------------- VIDEOENC 0? IN FRAME -----------------------------</p>
<p>in????? w?????? h?????? pxlfmt</p>
<p>0?????? 1920??? 1080??? YUV420_NVX3</p>
<p>------------------------- VIDEOENC 0? OUT FRAME -----------------------------</p>
<p>in????? codec?? gop???? profile svc???? level?? entropy</p>
<p>0?????? -?????? -?????? 1992728576??? -??????? CABAC</p>
<p>------------------------- VIDEOENC 0? RC -----------------------------</p>
<p>in????? mode??? base??? incr??? bitrate</p>
<p>0?????? CBR???? 0030??? 0001??? 2048Kbps</p>
<h2 id="4-sample-codes">4 Sample Codes<a class="headerlink" href="#4-sample-codes" title="Permanent link">&para;</a></h2>
<h3 id="41-hd_videoenc_only">4.1 hd_videoenc_only<a class="headerlink" href="#41-hd_videoenc_only" title="Permanent link">&para;</a></h3>
<p>This sample code is used in NT9668X / NT9852X / NT9856X / NT98530. The <strong>hd_videoenc_only</strong> demonstrates how to use the single trigger operation to process the input image.</p>
<p><strong>/* Allocate common buffer */</strong></p>
<p>? mem_cfg.pool_info[0].type???? = HD_COMMON_MEM_COMMON_POOL;</p>
<p>? mem_cfg.pool_info[0].blk_size = YUV_BLK_SIZE;</p>
<p>? mem_cfg.pool_info[0].blk_cnt? = MAX_YUV_BLK_CNT;</p>
<p>? mem_cfg.pool_info[0].ddr_id?? = DDR_ID0;</p>
<p>? ret = hd_common_mem_init(&amp;mem_cfg);</p>
<p><strong>/* set enc path configuration */</strong></p>
<p>? video_path_config.max_mem.codec_type = HD_CODEC_TYPE_H265;</p>
<p>? video_path_config.max_mem.max_dim.w? = 1920;</p>
<p>? video_path_config.max_mem.max_dim.h? = 1080;</p>
<p>? video_path_config.max_mem.bitrate??? = 2 * 1024 * 1024; // 2 Mb/s = 512 MB/s</p>
<p>? video_path_config.max_mem.enc_buf_ms = 3000;</p>
<p>? video_path_config.max_mem.svc_layer? = HD_SVC_4X;</p>
<p>? video_path_config.max_mem.ltr??????? = TRUE;</p>
<p>? video_path_config.max_mem.rotate???? = FALSE;</p>
<p>? video_path_config.max_mem.source_output?? = FALSE;</p>
<p>? video_path_config.isp_id???????????? = 0;</p>
<p>? ret = hd_videoenc_set(video_enc_path0, HD_VIDEOENC_PARAM_PATH_CONFIG, &amp;video_path_config);</p>
<p><strong>/* set enc parameters */</strong></p>
<p>? //--- HD_VIDEOENC_PARAM_IN &mdash;</p>
<p>? video_in_param.dir???? = HD_VIDEO_DIR_NONE;</p>
<p>? video_in_param.pxl_fmt = HD_VIDEO_PXLFMT_YUV420;</p>
<p>? video_in_param.dim.w?? = main_dim.w;</p>
<p>? video_in_param.dim.h?? = main_dim.h;</p>
<p>? ret = hd_videoenc_set(video_enc_path0, HD_VIDEOENC_PARAM_IN, &amp;video_in_param);</p>
<p>? //--- HD_VIDEOENC_PARAM_OUT_ENC_PARAM &mdash;</p>
<p>? video_out_param.codec_type???????? = HD_CODEC_TYPE_H264;</p>
<p>? video_out_param.h26x.profile?????? = HD_H264E_HIGH_PROFILE;</p>
<p>? video_out_param.h26x.level_idc???? = HD_H264E_LEVEL_5_1;</p>
<p>? video_out_param.h26x.gop_num?????? = 15;</p>
<p>? video_out_param.h26x.ltr_interval? = 0;</p>
<p>? video_out_param.h26x.ltr_pre_ref?? = 0;</p>
<p>? video_out_param.h26x.gray_en?????? = 0;</p>
<p>? video_out_param.h26x.source_output = 0;</p>
<p>? video_out_param.h26x.svc_layer???? = HD_SVC_DISABLE;</p>
<p>? video_out_param.h26x.entropy_mode? = HD_H264E_CABAC_CODING;</p>
<p>? ret = hd_videoenc_set(video_enc_path0, HD_VIDEOENC_PARAM_OUT_ENC_PARAM, &amp;video_out_param);</p>
<p>? //--- HD_VIDEOENC_PARAM_OUT_RATE_CONTROL &mdash;</p>
<p>? rc_param.rc_mode???????????? = HD_RC_MODE_CBR;</p>
<p>? rc_param.cbr.bitrate???????? = 2 * 1024 * 1024;</p>
<p>? rc_param.cbr.frame_rate_base = 30;</p>
<p>? rc_param.cbr.frame_rate_incr = 1;</p>
<p>? rc_param.cbr.init_i_qp?????? = 26;</p>
<p>? rc_param.cbr.min_i_qp??????? = 10;</p>
<p>? rc_param.cbr.max_i_qp??????? = 45;</p>
<p>? rc_param.cbr.init_p_qp?????? = 26;</p>
<p>? rc_param.cbr.min_p_qp??????? = 10;</p>
<p>? rc_param.cbr.max_p_qp?? ?????= 45;</p>
<p>? rc_param.cbr.static_time???? = 4;</p>
<p>? rc_param.cbr.ip_weight?????? = 0;</p>
<p>? ret = hd_videoenc_set(video_enc_path0, HD_VIDEOENC_PARAM_OUT_RATE_CONTROL, &amp;rc_param);</p>
<p><strong>/* Push in buffer */</strong></p>
<p>? blk = hd_common_mem_get_block(HD_COMMON_MEM_COMMON_POOL, blk_size, ddr_id);</p>
<p>? pa = hd_common_mem_blk2pa(blk);</p>
<p>? va = (UINT32)hd_common_mem_mmap(HD_COMMON_MEM_MEM_TYPE_CACHE, pa, blk_size);</p>
<p>? fread((void *)va, 1, yuv_size, fd_yuv);</p>
<p>? video_frame.sign??????? = MAKEFOURCC(&lsquo;V&rsquo;,&rsquo;F&rsquo;,&rsquo;R&rsquo;,&rsquo;M&rsquo;);</p>
<p>? video_frame.p_next????? = NULL;</p>
<p>? video_frame.ddr_id????? = ddr_id;</p>
<p>? video_frame.pxlfmt????? = HD_VIDEO_PXLFMT_YUV420;</p>
<p>? video_frame.dim.w?????? = VDO_SIZE_W;</p>
<p>? video_frame.dim.h?????? = VDO_SIZE_H;</p>
<p>? video_frame.count?????? = 0;</p>
<p>? video_frame.timestamp?? = 0;</p>
<p>? video_frame.loff[0]???? = VDO_SIZE_W; // Y</p>
<p>? video_frame.loff[1]???? = VDO_SIZE_W; // UV</p>
<p>? video_frame.phy_addr[0] = pa;? ????????????????????????????// Y</p>
<p>? video_frame.phy_addr[1] = pa + VDO_SIZE_W*VDO_SIZE_H;? // UV pack</p>
<p>? video_frame.blk???????? = blk;</p>
<p>? ret = hd_videoenc_push_in_buf(video_enc_path0, &amp;video_frame, NULL, 0);</p>
<p>//--- release buffer &mdash;</p>
<p>? hd_common_mem_release_block(blk);</p>
<p>? hd_common_mem_munmap((void *)va, blk_size);</p>
<p><strong>/* pull out buffer */</strong></p>
<p>? ret = hd_videoenc_pull_out_buf(video_enc_path0, &amp;data_pull, -1);</p>
<p>? if (ret == HD_OK) {</p>
<p>? ???? hd_videoenc_get(video_enc_path0, HD_VIDEOENC_PARAM_BUFINFO, &amp;phy_buf_main);</p>
<p>?????? vir_addr_main = (UINT32)hd_common_mem_mmap(HD_COMMON_MEM_MEM_TYPE_CACHE,</p>
<p>phy_buf_main.buf_info.phy_addr,</p>
<p>phy_buf_main.buf_info.buf_size);</p>
<h1 id="define-phy2virt_mainpa-vir_addr_main-pa-phy_buf_mainbuf_infophy_addr">define PHY2VIRT_MAIN(pa) (vir_addr_main + (pa - phy_buf_main.buf_info.phy_addr))<a class="headerlink" href="#define-phy2virt_mainpa-vir_addr_main-pa-phy_buf_mainbuf_infophy_addr" title="Permanent link">&para;</a></h1>
<p>for (j=0; j&lt; data_pull.pack_num; j++) {</p>
<p>?????????? va ??= PHY2VIRT_MAIN(data_pull.video_pack[j].phy_addr);</p>
<p>?????????? size = data_pull.video_pack[j].size;</p>
<p>?????????? fwrite(va, 1, size, fd_bs);</p>
<p>?????? }</p>
<p>???????? //--- release buffer &mdash;</p>
<p>ret = hd_videoenc_release_out_buf(video_enc_path0, &amp;data_pull);</p>
<p>hd_common_mem_munmap((void *)vir_addr_main, phy_buf_main.buf_info.buf_size);</p>
<p>}</p>
<h3 id="42-user_videoenc">4.2 user_videoenc<a class="headerlink" href="#42-user_videoenc" title="Permanent link">&para;</a></h3>
<p>This sample code is used in NT9831X / NT9832X / NT9833X. The <strong>user_videoenc</strong> demonstrates how to use the single trigger operation to process the input image.</p>
<p>typedef struct {</p>
<p>? union {</p>
<p>?????? HD_VIDEO_FRAME frame;</p>
<p>?????? HD_VIDEOENC_BS bs;</p>
<p>? };</p>
<p>? UINT64 pool;</p>
<p>? int size;</p>
<p>? HD_COMMON_MEM_DDR_ID ddr_id;</p>
<p>? HD_COMMON_MEM_VB_BLK blk;</p>
<p>? void *va;</p>
<p>? UINT32 pa;</p>
<p>} app_buffer_t;</p>
<p>typedef struct _USER_VIDEOENC {</p>
<p>? app_buffer_t enc_in_buffer[MAX_IN_FRAME_COUNT];</p>
<p>? int mem_fd;</p>
<p>? HD_PATH_ID videoenc_path_id;</p>
<p>} USER_VIDEOENC;</p>
<p>void save_output(char *filename, void *data, int size)</p>
<p>{</p>
<p>? FILE *pfile;</p>
<p>? if ((pfile = fopen(filename, &ldquo;wb&rdquo;)) == NULL) {</p>
<p>?????? printf(&ldquo;[ERROR] Open File %s failed!!\n&rdquo;, filename);</p>
<p>?????? exit(1);</p>
<p>? }</p>
<p>? fwrite(data, 1, size, pfile);</p>
<p>? fclose(pfile);</p>
<p>? printf(&ldquo;Write file: %s\n&rdquo;, filename);</p>
<p>}</p>
<p>int read_input(char *filename, void *buffer, int max_buf_size, int read_size)</p>
<p>{</p>
<p>? FILE *pfile;</p>
<p>? INT ret;</p>
<p>? if ((pfile = fopen(filename, &ldquo;rb&rdquo;)) == NULL) {</p>
<p>?????? printf(&ldquo;[ERROR] Open File %s failed!!\n&rdquo;, filename);</p>
<p>?????? exit(1);</p>
<p>? }</p>
<p><strong>? //if read_size is zero, read whole file.</strong></p>
<p>? if (read_size == 0) {</p>
<p>? ??? fseek(pfile, 0, SEEK_END);</p>
<p>? ??? read_size = ftell(pfile);</p>
<p>?????? fseek(pfile, 0, SEEK_SET);</p>
<p>? }</p>
<p>? if (read_size &gt; max_buf_size)</p>
<p>?????? read_size = max_buf_size;</p>
<p>? if (read_size &gt; 0) {</p>
<p>?????? ret = fread(buffer, 1, read_size, pfile);</p>
<p>? }</p>
<p>? fclose(pfile);</p>
<p>? return ret;</p>
<p>}</p>
<p>HD_RESULT allocate_buffer(UINT64 pool, int size, HD_COMMON_MEM_DDR_ID ddr_id, app_buffer_t *p_app_buf)</p>
<p>{</p>
<p>? HD_RESULT ret = HD_OK;</p>
<p>? HD_COMMON_MEM_VB_BLK blk;</p>
<p>? UINT32 pa, sign;</p>
<p>? VOID *va;</p>
<p>? p_app_buf-&gt;pool = pool;</p>
<p>? p_app_buf-&gt;size = size;</p>
<p>? p_app_buf-&gt;ddr_id = ddr_id;</p>
<p>? blk = hd_common_mem_get_block(pool, size, ddr_id);</p>
<p>? if (HD_COMMON_MEM_VB_INVALID_BLK == blk) {</p>
<p>?????? printf(&ldquo;hd_common_mem_get_block fail\r\n&rdquo;);</p>
<p>?????? ret = HD_ERR_NG;</p>
<p>?????? goto exit;</p>
<p>? }</p>
<p>? pa = hd_common_mem_blk2pa(blk);</p>
<p>? if (pa == 0) {</p>
<p>?????? printf(&ldquo;hd_common_mem_blk2pa fail, blk = %#lx\r\n&rdquo;, blk);</p>
<p>?????? hd_common_mem_release_block(blk);</p>
<p>?????? ret = HD_ERR_NG;</p>
<p>?????? goto exit;</p>
<p>? }</p>
<p>? va = hd_common_mem_mmap(HD_COMMON_MEM_MEM_TYPE_NONCACHE, pa, size);</p>
<p>? p_app_buf-&gt;blk = blk;</p>
<p>? p_app_buf-&gt;va = va;</p>
<p>? p_app_buf-&gt;pa = pa;</p>
<p>? sign = p_app_buf-&gt;frame.sign;</p>
<p>? if (sign == MAKEFOURCC(&lsquo;V&rsquo;,&rsquo;F&rsquo;,&rsquo;R&rsquo;,&rsquo;M&rsquo;)) {</p>
<p>?????? p_app_buf-&gt;frame.phy_addr[0] = pa;</p>
<p>? } else {</p>
<p>?????? p_app_buf-&gt;bs.video_pack[0].phy_addr = pa;</p>
<p>? }</p>
<p>exit:</p>
<p>? return ret;</p>
<p>}</p>
<p>HD_RESULT free_buffer(app_buffer_t *p_app_buf)</p>
<p>{</p>
<p>? HD_RESULT hd_ret;</p>
<p>? hd_ret = hd_common_mem_munmap(p_app_buf-&gt;va, p_app_buf-&gt;size);</p>
<p>? if (hd_ret != HD_OK) {</p>
<p>?????? printf(&ldquo;hd_common_mem_munmap fail\r\n&rdquo;);</p>
<p>?????? goto exit;</p>
<p>? }</p>
<p>? hd_ret = hd_common_mem_release_block((HD_COMMON_MEM_VB_BLK)p_app_buf-&gt;blk);</p>
<p>? if (hd_ret != HD_OK) {</p>
<p>?????? printf(&ldquo;hd_common_mem_munmap fail\r\n&rdquo;);</p>
<p>?????? goto exit;</p>
<p>? }</p>
<p>exit:</p>
<p>? return hd_ret;</p>
<p>}</p>
<p>HD_RESULT prepare_buffers(USER_VIDEOENC *p_usr_videoenc)</p>
<p>{</p>
<p>? INT i, x, y, raw_frame_size;</p>
<p>? UINT16 *pixel;</p>
<p>? HD_VIDEO_FRAME *p_frame;</p>
<p>? HD_RESULT ret = HD_OK;</p>
<p>? for (i = 0; i &lt; MAX_IN_FRAME_COUNT; i++) {</p>
<p>?????? p_frame = &amp;p_usr_videoenc-&gt;enc_in_buffer[i].frame;</p>
<p>?????? p_frame-&gt;sign = MAKEFOURCC(&lsquo;V&rsquo;,&rsquo;F&rsquo;,&rsquo;R&rsquo;,&rsquo;M&rsquo;);</p>
<p>?????? p_frame-&gt;ddr_id = 0;</p>
<p>?????? p_frame-&gt;dim.w = RAW_FRAME_WIDTH;</p>
<p>?????? p_frame-&gt;dim.h = RAW_FRAME_HEIGHT;</p>
<p>?????? p_frame-&gt;pxlfmt = HD_VIDEO_PXLFMT_YUV420;</p>
<p>?????? raw_frame_size = p_frame-&gt;dim.w * p_frame-&gt;dim.h * 2;</p>
<p>?????? ret = allocate_buffer(HD_COMMON_MEM_ENC_CAP_OUT_POOL, raw_frame_size, p_frame-&gt;ddr_id, &amp;p_usr_videoenc-&gt;enc_in_buffer[i]);</p>
<p>?????? if (ret != 0) {</p>
<p>?????????? goto exit;</p>
<p>?????? }</p>
<p>?????? read_input(RAW_FRAME_FILE, p_usr_videoenc-&gt;enc_in_buffer[i].va, FRAME_BUF_SIZE, 0);</p>
<p><strong>????? // Set moving black block</strong></p>
<p>?????? for (y = 300; y &lt; 330; y ++)</p>
<p>?????? for (x = (i * 10 + 300); x &lt; (i * 10 + 330); x ++) {</p>
<p>?????????? pixel = (unsigned short *) (p_usr_videoenc-&gt;enc_in_buffer[i].va + ((y * p_frame-&gt;dim.w) + x) * 2);</p>
<p>?????????? *pixel = 0x1080;</p>
<p>?????? }</p>
<p>? }</p>
<p>exit:</p>
<p>? return ret;</p>
<p>}</p>
<p>HD_RESULT return_buffers(USER_VIDEOENC *p_usr_videoenc)</p>
<p>{</p>
<p>? INT i;</p>
<p>? HD_RESULT ret = HD_OK;</p>
<p>? for (i = 0; i &lt; MAX_IN_FRAME_COUNT; i++) {</p>
<p>?????? ret = free_buffer(&amp;p_usr_videoenc-&gt;enc_in_buffer[i]);</p>
<p>?????? if (ret != HD_OK) {</p>
<p>?????????? printf(&ldquo;free_buffer fail\n&rdquo;);</p>
<p>?????????? break;</p>
<p>?????? }</p>
<p>? }</p>
<p>? return ret;</p>
<p>}</p>
<p>HD_RESULT set_param(USER_VIDEOENC *p_usr_videoenc)</p>
<p>{</p>
<p>? HD_RESULT ret = HD_OK;</p>
<p>? HD_VIDEOENC_IN video_in_param;</p>
<p>? HD_VIDEOENC_OUT enc_param;</p>
<p>? HD_H26XENC_RATE_CONTROL rc_param;</p>
<p>? //set main stream param</p>
<p>? video_in_param.dim.w = RAW_FRAME_WIDTH;</p>
<p>? video_in_param.dim.h = RAW_FRAME_HEIGHT;</p>
<p>? ret = hd_videoenc_set(p_usr_videoenc-&gt;videoenc_path_id, HD_VIDEOENC_PARAM_IN, &amp;video_in_param);</p>
<p>? if (ret != HD_OK) {</p>
<p>?????? printf(&ldquo;hd_videoenc_set(HD_VIDEOENC_PARAM_IN) fail\n&rdquo;);</p>
<p>?????? goto exit;</p>
<p>? }</p>
<p>? ret = hd_videoenc_get(p_usr_videoenc-&gt;videoenc_path_id, HD_VIDEOENC_PARAM_OUT_ENC_PARAM, &amp;enc_param);</p>
<p>? if (ret != HD_OK) {</p>
<p>?????? printf(&ldquo;hd_videoenc_get(HD_VIDEOENC_PARAM_OUT_ENC_PARAM) fail\n&rdquo;);</p>
<p>?????? goto exit;</p>
<p>? }</p>
<p>? enc_param.codec_type = HD_CODEC_TYPE_H264;</p>
<p>? enc_param.h26x.gop_num = 60;</p>
<p>? ret = hd_videoenc_set(p_usr_videoenc-&gt;videoenc_path_id, HD_VIDEOENC_PARAM_OUT_ENC_PARAM, &amp;enc_param);</p>
<p>? if (ret != HD_OK) {</p>
<p>?????? printf(&ldquo;hd_videoenc_set(HD_VIDEOENC_PARAM_OUT_ENC_PARAM) fail\n&rdquo;);</p>
<p>?????? goto exit;</p>
<p>? }</p>
<p>? ret = hd_videoenc_get(p_usr_videoenc-&gt;videoenc_path_id, HD_VIDEOENC_PARAM_OUT_RATE_CONTROL, &amp;rc_param);</p>
<p>? if (ret != HD_OK) {</p>
<p>?????? printf(&ldquo;hd_videoenc_get(HD_VIDEOENC_PARAM_OUT_RATE_CONTROL) fail\n&rdquo;);</p>
<p>?????? goto exit;</p>
<p>? }</p>
<p>? rc_param.rc_mode = HD_RC_MODE_CBR;</p>
<p>? rc_param.cbr.frame_rate_base = 30;?? //fps = 30/1 = 30</p>
<p>? rc_param.cbr.frame_rate_incr = 1;</p>
<p>? rc_param.cbr.bitrate = 2048 * 1024;</p>
<p>? ret = hd_videoenc_set(p_usr_videoenc-&gt;videoenc_path_id, HD_VIDEOENC_PARAM_OUT_RATE_CONTROL, &amp;rc_param);</p>
<p>? if (ret != HD_OK) {</p>
<p>?????? printf(&ldquo;hd_videoenc_set(HD_VIDEOENC_PARAM_OUT_RATE_CONTROL) fail\n&rdquo;);</p>
<p>?????? goto exit;</p>
<p>? }</p>
<p>exit:</p>
<p>? return ret;</p>
<p>}</p>
<p>int encode_the_buffer(USER_VIDEOENC *p_usr_videoenc)</p>
<p>{</p>
<p>? INT i, pattern_idx, bs_max_size;</p>
<p>? FILE *bs_file;</p>
<p>? HD_VIDEOENC_BS video_bitstream;</p>
<p>? app_buffer_t bs_out_buffer;</p>
<p>? HD_RESULT ret = HD_OK;</p>
<p>? <strong>//open files for writing</strong></p>
<p>? if ((bs_file = fopen(OUT_BS_FILE, &ldquo;wb&rdquo;)) == NULL) {</p>
<p>?????? printf(&ldquo;[ERROR] Open File %s failed!!\n&rdquo;, OUT_BS_FILE);</p>
<p>?????? exit(1);</p>
<p>? }</p>
<p>? <strong>//prepare bitstream buffer</strong></p>
<p>? bs_max_size = BS_BUF_SIZE;</p>
<p>? bs_out_buffer.bs.sign = MAKEFOURCC(&lsquo;V&rsquo;,&rsquo;S&rsquo;,&rsquo;T&rsquo;,&rsquo;M&rsquo;);</p>
<p>? bs_out_buffer.bs.video_pack[0].size = bs_max_size;</p>
<p>? bs_out_buffer.bs.ddr_id = 0;</p>
<p>? ret = allocate_buffer(HD_COMMON_MEM_ENC_CAP_OUT_POOL, bs_max_size, bs_out_buffer.bs.ddr_id, &amp;bs_out_buffer);</p>
<p>? if (ret != 0) {</p>
<p>?????? printf(&ldquo;allocate_buffer fail\n&rdquo;);</p>
<p>?????? goto exit;</p>
<p>? }</p>
<p>? <strong>//encode frames for LOOP_COUNT times</strong></p>
<p>? pattern_idx = 0;</p>
<p>? for (i = 0; i &lt; LOOP_COUNT; i++) {</p>
<p>?????? bs_out_buffer.bs.video_pack[0].size = bs_max_size;</p>
<p>?????? <strong>//trigger it</strong></p>
<p>?????? ret = hd_videoenc_push_in_buf(p_usr_videoenc-&gt;videoenc_path_id, &amp;p_usr_videoenc-&gt;enc_in_buffer[pattern_idx++].frame, &amp;(bs_out_buffer.bs), 500);</p>
<p>?????? if (ret != HD_OK) {</p>
<p>?????????? printf(&ldquo;hd_videoenc_push_in_buf fail\n&rdquo;);</p>
<p>?????????? goto exit;</p>
<p>?????? }</p>
<p>?????? <strong>//get the result</strong></p>
<p>?????? ret = hd_videoenc_pull_out_buf(p_usr_videoenc-&gt;videoenc_path_id, &amp;video_bitstream, 500);</p>
<p>?????? if (ret != HD_OK) {</p>
<p>?????????? printf(&ldquo;hd_videoenc_pull_out_buf fail\n&rdquo;);</p>
<p>?????? } else {</p>
<p>?????????? INT bs_size = 0, pack_num, pa_offset;</p>
<p>?????????? for (pack_num = 0; pack_num &lt; video_bitstream.pack_num; pack_num++) {</p>
<p>??????????????? pa_offset = video_bitstream.video_pack[pack_num].phy_addr - bs_out_buffer.pa;</p>
<p>??????????????? bs_size += fwrite(bs_out_buffer.va+pa_offset, 1, video_bitstream.video_pack[pack_num].size, bs_file);</p>
<p>?????????? }</p>
<p>?????????? printf(&rdquo; Encode output size: %d\n&rdquo;, bs_size);</p>
<p>?????? }</p>
<p>?????? if (pattern_idx &gt;= MAX_IN_FRAME_COUNT)</p>
<p>?????????? pattern_idx = 0;</p>
<p>? }</p>
<p>? <strong>//free bitstream buffer</strong></p>
<p>? ret = free_buffer(&amp;bs_out_buffer);</p>
<p>? if (ret != HD_OK) {</p>
<p>?????? printf(&ldquo;free_buffer fail\n&rdquo;);</p>
<p>? }</p>
<p>exit:</p>
<p>? if (bs_file)</p>
<p>?????? fclose(bs_file);</p>
<p>? return ret;</p>
<p>}</p>
<p>int main(int argc, char *argv[])</p>
<p>{</p>
<p>? HD_RESULT ret = HD_OK;</p>
<p>? USER_VIDEOENC usr_videoenc;</p>
<p>? memset(&amp;usr_videoenc, 0, sizeof(usr_videoenc));</p>
<p>? usr_videoenc.mem_fd = -1;</p>
<p>? if ((usr_videoenc.mem_fd = open(&ldquo;/dev/mem&rdquo;, O_RDWR | O_SYNC)) &lt; 0) {</p>
<p>?????? printf(&ldquo;open /dev/mem failed.\n&rdquo;);</p>
<p>?????? goto exit;</p>
<p>? }</p>
<p>? <strong>//init hdal and open modules</strong></p>
<p>? ret = hd_common_init(1);</p>
<p>? if (ret != HD_OK) {</p>
<p>?????? printf(&ldquo;hd_common_init fail\n&rdquo;);</p>
<p>?????? goto exit;</p>
<p>? }</p>
<p>? ret = hd_videoenc_init();</p>
<p>? if (ret != HD_OK) {</p>
<p>?????? printf(&ldquo;hd_videoenc_init fail\n&rdquo;);</p>
<p>?????? goto exit;</p>
<p>? }</p>
<p>? ret = hd_videoenc_open(HD_VIDEOENC_0_IN_0, HD_VIDEOENC_0_OUT_0, &amp;usr_videoenc.videoenc_path_id);</p>
<p>? if (ret != HD_OK) {</p>
<p>?????? printf(&ldquo;hd_videoenc_open fail\n&rdquo;);</p>
<p>?????? goto exit;</p>
<p>? }</p>
<p>? <strong>//setup encoder parameters</strong></p>
<p>? ret = set_param(&amp;usr_videoenc);</p>
<p>? if (ret &lt; 0) {</p>
<p>?????? printf(&ldquo;set_param fail\n&rdquo;);</p>
<p>?????? goto exit;</p>
<p>? }</p>
<p>? <strong>//generate source frame for encoding</strong></p>
<p>? ret = prepare_buffers(&amp;usr_videoenc);</p>
<p>? if (ret &lt; 0) {</p>
<p>?????? printf(&ldquo;prepare_buffers fail\n&rdquo;);</p>
<p>?????? goto exit;</p>
<p>? }</p>
<p>? <strong>//encode the frames</strong></p>
<p>? ret = encode_the_buffer(&amp;usr_videoenc);</p>
<p>? if (ret &lt; 0) {</p>
<p>?????? printf(&ldquo;encode_the_buffer fail\n&rdquo;);</p>
<p>?????? goto exit;</p>
<p>? }</p>
<p>? <strong>//release source frames</strong></p>
<p>? ret = return_buffers(&amp;usr_videoenc);</p>
<p>? if (ret &lt; 0) {</p>
<p>?????? printf(&ldquo;return_buffers fail\n&rdquo;);</p>
<p>?????? goto exit;</p>
<p>? }</p>
<p>exit:</p>
<p>? <strong>//close modules, release resources and exit hdal</strong></p>
<p>? ret = hd_videoenc_close(usr_videoenc.videoenc_path_id);</p>
<p>? if (ret != HD_OK) {</p>
<p>?????? printf(&ldquo;hd_videoenc_close fail\n&rdquo;);</p>
<p>?????? return -1;</p>
<p>? }</p>
<p>? ret = hd_videoenc_uninit();</p>
<p>? if (ret != HD_OK) {</p>
<p>?????? printf(&ldquo;hd_videoenc_uninit fail\n&rdquo;);</p>
<p>?????? return -1;</p>
<p>? }</p>
<p>? ret = hd_common_uninit();</p>
<p>? if (ret != HD_OK) {</p>
<p>?????? printf(&ldquo;hd_common_uninit fail\n&rdquo;);</p>
<p>?????? return -1;</p>
<p>? }</p>
<p>? if (usr_videoenc.mem_fd != -1) {</p>
<p>?????? close(usr_videoenc.mem_fd);</p>
<p>? }</p>
<p>? return 0;</p>
<h2 id="5-faq-nt9668x-nt9852x-nt9856x-nt98530">5 FAQ (NT9668X / NT9852X / NT9856X / NT98530)<a class="headerlink" href="#5-faq-nt9668x-nt9852x-nt9856x-nt98530" title="Permanent link">&para;</a></h2>
<ol>
<li>What is the differnece from HD_VIDEOENC_PARAM_PATH_CONFIG.max_mem and HD_VIDEOENC_PARAM_OUT_ENC_PARAM?</li>
</ol>
<p>Answer:</p>
<p>n HD_VIDEOENC_PARAM_PATH_CONFIG.max_mem sets &ldquo;Maximum requirement&rdquo;, while HD_VIDEOENC_PARAM_OUT_ENC_PARAM sets current encode settings.</p>
<p>n For example, you may set PATH_CONFIG.max_mem.max_dim as 1920x1080. Then you can set HD_VIDEOENC_IN.dim as any resolution smaller than 1920x1080.</p>
<p>n Another example, you may set PATH_CONFIG.max_mem.ltr as TRUE. Then you can set HD_VIDEOENC_PARAM_OUT_ENC_PARAM.h26x.ltr_interval &gt; 0 to enable LTR, or, you can set ltr_interval = 0 to disable LTR.</p>
<p>n But if you set PATH_CONFIG.max_mem.ltr as FALSE, then you can only set HD_VIDEOEC_PARAM_0UT_ENC_PARAM.h26x.ltr_interval = 0.</p>
<p>n PATH_CONFIG set maximum requirement, if you don&rsquo;t need certain function, you should not set the function as TRUE because this will alloc extra memory.</p>
<p>2 svc_layer, ltr, source_output =&gt; each of those function will alloc extra YUV420 buffer to support function.</p>
<ol start="2">
<li>What control flow should I apply for each param for hd_videoenc_set()?</li>
</ol>
<p>n stop -&gt; close -&gt; open -&gt; set -&gt; start</p>
<p>2 HD_VIDEOENC_PARAM_PATH_CONFIG</p>
<p>O because this will involve memory re-alloc.</p>
<p>n stop -&gt; set -&gt; start</p>
<p>2 HD_VIDEOENC_PARAM_IN</p>
<p>O If videoproc is binding to videoenc, and videoproc.out setting=0 (auto sync videoenc settings), you have to call videoproc_start to sync videoenc new settings.</p>
<p>2 HD_VIDEOENC_PARAM_OUT_ENC_PARAM</p>
<p>2 HD_VIDEOENC_PARAM_OUT_VUI</p>
<p>2 HD_VIDEOENC_PARAM_OUT_DEBLOCK</p>
<p>2 HD_VIDEOENC_PARAM_IN_FRC</p>
<p>O If change between (dst &lt;= src) and (dst &gt; src)? (both direction)</p>
<p>O If change between (dst &gt; src) and (dst &gt; src)</p>
<p>n set -&gt; start</p>
<p>2 HD_VIDEOENC_PARAM_OUT_RATE_CONTROL</p>
<p>2 HD_VIDEOENC_PARAM_OUT_USR_QP</p>
<p>2 HD_VIDEOENC_PARAM_OUT_SLICE_SPLIT</p>
<p>2 HD_VIDEOENC_PARAM_OUT_ENC_GDR</p>
<p>2 HD_VIDEOENC_PARAM_OUT_ROI</p>
<p>2 HD_VIDEOENC_PARAM_OUT_ROW_RC</p>
<p>2 HD_VIDEOENC_PARAM_OUT_AQ</p>
<p>2 HD_VIDEOENC_PARAM_OUT_REQUEST_IFRAME</p>
<p>2 HD_VIDEOENC_PARAM_OUT_TRIG_SNAPSHOT</p>
<p>2 HD_VIDEOENC_PARAM_IN_FRC</p>
<p>O If change between (dst &lt;= src) and (dst &lt;= src)</p>
<ol start="3">
<li>Is there anything I should take care for codec JPG with HD_VIDEOENC_PARAM_IN.dir rotate90/270?</li>
</ol>
<p>n Yes : because JPG rotate depends on gximage library</p>
<p>2 You have to alloc extra YUV buffer. On the other word, hd_common_mem_init() for YUV buffer, set blk_cnt from 3 to 4</p>
<p>2 Also, the YUV buffer width/height MUST be ALIGN_CEIL_16.</p>
<ol start="4">
<li>Calling hd_videoenc_open() failed with return value HD_ERR_IO, what does it mean?</li>
</ol>
<p>n It means that user is accessing invalid HD_IN_ID or HD_OUT_ID. It possibly occurs due to configuration for maxpath in dts file is smaller than needed path.</p>
<p>n For example, in dts file, user set vdoenc_maxpath = 4, but calling hd_videoenc_open(HD_VIDEOENC_0_IN_4, … ) is invalid !!<br />
=> because dts max_path = 4, but attempt to open path 5<br />
=> if user really need to open path 5, user have to modify dts file for vdoenc_maxpath = 5</p>
<ol start="5">
<li>Can an osd image shared between videoprocess, videoenc and videoout?</li>
</ol>
<p>n Yes : Just set the same p_addr value of HD_OSG_STAMP_BUF to videoprocess, videoenc and videoout pathid.</p>
<p>n Subsequent upate through any pathid with automatically reflect on other pathid</p>
<ol start="6">
<li>Why an osd/mask disappear without error or warning message?</li>
</ol>
<p>n In any macro block, only an osd will be rendered in a layer.</p>
<p>n Since there are only two layers, this means at most two images can be rendered in a macro block</p>
<p>n In h264, a macro block is 16x16</p>
<p>n In h265, a macro block is 64x64</p>
<p>n Osd on layer 0 will be rendered above layer 1</p>
<ol start="7">
<li>Any constrain on osd image and buffer?</li>
</ol>
<p>n Width of an image is best to be 4 aligned</p>
<p>n Height of an image is best to be 2 aligned</p>
<p>n Buffer address is best to be 128 aligned</p>
<ol start="8">
<li>Ex stamp and mask consume much system resource. Any advice on the number?</li>
</ol>
<p>n It’s hard to say. System with heavy loading has less margin for ex stamp and mask</p>
<p>n For a 30fps system, 4 ex stamps or 4 ex masks are safe</p>
<ol start="9">
<li>How to set alpha for an osd image</li>
</ol>
<p>n This is conditional to image formats</p>
<p>n Alpha of argb4444 is completely determined by pixel’s 4-bits alpha value</p>
<p>n Alpha of argb1555 is determined by pixel’s 1-bit alpha value and the alpha field of HD_OSG_STAMP_ATTR. If pixel’s alpha value is 0, bits 3 ~ bits 0 of HD_OSG_STAMP_ATTR’s alpha field determines transparency. If pixel’s alpha value is 1, bits 7 ~ bits 4 of HD_OSG_STAMP_ATTR’s alpha field determines transparency</p>
<p>n Alpha of rgb565 is completely determined by the alpha field of HD_OSG_STAMP_ATTR.</p>
<ol start="10">
<li>If an osd is configured with ping pong buffer. Is it possible to directly draw the free buffer?</li>
</ol>
<p>n Yes</p>
<p>n Use HD_VIDEOENC_PARAM_IN_STAMP_IMG to get the physical address of the free buffer</p>
<p>n Draw this free buffer</p>
<p>n Apply the drawing by set HD_VIDEOENC_PARAM_IN_STAMP_IMG. The p_addr field of HD_OSG_STAMP_IMG should be the same physical address.</p>
<ol start="11">
<li>I set vdoenc_maxpath = 17 in dtsi, why show warning message “dts max_path=17 is larger than built-in max_path=16”?</li>
</ol>
<p>n VDOENC_MAX_PATH_NUM is defined as 16 in isf_vdoenc, which means video encode path maximum is 16. Please set vdoenc_maxpath &lt;= 16 in dtsi.</p>
<ol start="12">
<li>OSG nvt-mem-tbl.dtsi</li>
</ol>
<p>n In nvt-mem-tbl.dtsi of cfg_model, stamp_maximg, vdoenc_maxstamp and vdoenc_maxmask determine osd numbers.</p>
<p>???? \configs\Linux\cfg_xxx\nvt-mem-tbl.dtsi<br />
<em>???? <strong>hdal-maxpath-cfg</strong> {</em></p>
<p>stamp_maximg???? = &lt;16&gt;;</p>
<p>???????? vdoenc_maxstamp? = &lt;32 16&gt;;</p>
<p>???????? vdoenc_maxmask?? = &lt;0? 64&gt;;</p>
<p>n stamp_maximg is the max number of stamps across videoprocess, videoencoder and videoout. 16 means vproc, venc and vout can create up to 16 stamps. There is no limit on this number.</p>
<p>n vdoenc_maxstamp is the max number of stamps on videoenc. The left number is for built-in stamp and the right number is for ext stamp. Max left number is 32 and max right number is 16</p>
<p>n vdoenc_maxmask is the max number of masks on videoenc. The left number is for built-in mask and the right number is for ext mask. Since videoenc has no built-in osd, the left number is always 0. Max right number is 64</p>
<ol start="13">
<li>
<p>To update an existing OSG, simply set image. No need to start OSG, stop OGG or reset buffer.</p>
</li>
<li>
<p>If a buffer is shared among many OSG, updating through any of OSG also refreshes other OSG. No need to update every OSG with the same share buffer.</p>
</li>
<li>
<p>To setup a new buffer on OSG with shared buffer, all OSG with this shared buffer should be stopped and closed.</p>
</li>
</ol>





                
              </article>
            </div>
          
          
        </div>
        
      </main>
      
        <footer class="md-footer">
  
    
    <nav class="md-footer__inner md-grid" aria-label="Footer" >
      
        
        <a href="Novatek%2BHDAL%2BDesign%2BSpecification%2B-%2Bhd_videodec.html" class="md-footer__link md-footer__link--prev" aria-label="Previous: HDAL hd_videodec" rel="prev">
          <div class="md-footer__button md-icon">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
          </div>
          <div class="md-footer__title">
            <div class="md-ellipsis">
              <span class="md-footer__direction">
                Previous
              </span>
              HDAL hd_videodec
            </div>
          </div>
        </a>
      
      
        
        <a href="NT9833x_SDK_Pure_Linux_Programming_Guide_en.html" class="md-footer__link md-footer__link--next" aria-label="Next: Linux Programming Guide" rel="next">
          <div class="md-footer__title">
            <div class="md-ellipsis">
              <span class="md-footer__direction">
                Next
              </span>
              Linux Programming Guide
            </div>
          </div>
          <div class="md-footer__button md-icon">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11H4Z"/></svg>
          </div>
        </a>
      
    </nav>
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
        <div class="md-social">
  
    
    
      
      
    
    <a href="https://github.com" target="_blank" rel="noopener" title="github.com" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><!--! Font Awesome Free 6.2.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc.--><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"/></svg>
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    <script id="__config" type="application/json">{"base": ".", "features": ["search.highlight", "navigation.tabs"], "search": "assets/javascripts/workers/search.5bf1dace.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.config.lang": "en", "search.config.pipeline": "trimmer, stopWordFilter", "search.config.separator": "[\\s\\-]+", "search.placeholder": "Search", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version.title": "Select version"}}</script>
    
    
      <script src="assets/javascripts/bundle.37e9125f.min.js"></script>
      
    
  </body>
</html>